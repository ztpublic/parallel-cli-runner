const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./event-DXqYWlmG.js","./core-BEOw45JP.js","./index-CU_haXI-.js","./index-RPoYOzLW.js"])))=>i.map(i=>d[i]);
function av(n,m){for(var b=0;b<m.length;b++){const p=m[b];if(typeof p!="string"&&!Array.isArray(p)){for(const T in p)if(T!=="default"&&!(T in n)){const H=Object.getOwnPropertyDescriptor(p,T);H&&Object.defineProperty(n,T,H.get?H:{enumerable:!0,get:()=>p[T]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))p(T);new MutationObserver(T=>{for(const H of T)if(H.type==="childList")for(const k of H.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&p(k)}).observe(document,{childList:!0,subtree:!0});function b(T){const H={};return T.integrity&&(H.integrity=T.integrity),T.referrerPolicy&&(H.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?H.credentials="include":T.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function p(T){if(T.ep)return;T.ep=!0;const H=b(T);fetch(T.href,H)}})();function hu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pc={exports:{}},Ur={};var m_;function lv(){if(m_)return Ur;m_=1;var n=Symbol.for("react.transitional.element"),m=Symbol.for("react.fragment");function b(p,T,H){var k=null;if(H!==void 0&&(k=""+H),T.key!==void 0&&(k=""+T.key),"key"in T){H={};for(var l in T)l!=="key"&&(H[l]=T[l])}else H=T;return T=H.ref,{$$typeof:n,type:p,key:k,ref:T!==void 0?T:null,props:H}}return Ur.Fragment=m,Ur.jsx=b,Ur.jsxs=b,Ur}var p_;function ov(){return p_||(p_=1,Pc.exports=lv()),Pc.exports}var C=ov(),Ic={exports:{}},ke={};var g_;function cv(){if(g_)return ke;g_=1;var n=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),k=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),w=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=w&&j[w]||j["@@iterator"],typeof j=="function"?j:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,a={};function o(j,V,ee){this.props=j,this.context=V,this.refs=a,this.updater=ee||R}o.prototype.isReactComponent={},o.prototype.setState=function(j,V){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,V,"setState")},o.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function c(){}c.prototype=o.prototype;function h(j,V,ee){this.props=j,this.context=V,this.refs=a,this.updater=ee||R}var S=h.prototype=new c;S.constructor=h,E(S,o.prototype),S.isPureReactComponent=!0;var y=Array.isArray;function A(){}var D={H:null,A:null,T:null,S:null},g=Object.prototype.hasOwnProperty;function L(j,V,ee){var Y=ee.ref;return{$$typeof:n,type:j,key:V,ref:Y!==void 0?Y:null,props:ee}}function O(j,V){return L(j.type,V,j.props)}function z(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function U(j){var V={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ee){return V[ee]})}var I=/\/+/g;function $(j,V){return typeof j=="object"&&j!==null&&j.key!=null?U(""+j.key):V.toString(36)}function te(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(A,A):(j.status="pending",j.then(function(V){j.status==="pending"&&(j.status="fulfilled",j.value=V)},function(V){j.status==="pending"&&(j.status="rejected",j.reason=V)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function G(j,V,ee,Y,se){var me=typeof j;(me==="undefined"||me==="boolean")&&(j=null);var N=!1;if(j===null)N=!0;else switch(me){case"bigint":case"string":case"number":N=!0;break;case"object":switch(j.$$typeof){case n:case m:N=!0;break;case v:return N=j._init,G(N(j._payload),V,ee,Y,se)}}if(N)return se=se(j),N=Y===""?"."+$(j,0):Y,y(se)?(ee="",N!=null&&(ee=N.replace(I,"$&/")+"/"),G(se,V,ee,"",function(ne){return ne})):se!=null&&(z(se)&&(se=O(se,ee+(se.key==null||j&&j.key===se.key?"":(""+se.key).replace(I,"$&/")+"/")+N)),V.push(se)),1;N=0;var Q=Y===""?".":Y+":";if(y(j))for(var ie=0;ie<j.length;ie++)Y=j[ie],me=Q+$(Y,ie),N+=G(Y,V,ee,me,se);else if(ie=x(j),typeof ie=="function")for(j=ie.call(j),ie=0;!(Y=j.next()).done;)Y=Y.value,me=Q+$(Y,ie++),N+=G(Y,V,ee,me,se);else if(me==="object"){if(typeof j.then=="function")return G(te(j),V,ee,Y,se);throw V=String(j),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return N}function K(j,V,ee){if(j==null)return j;var Y=[],se=0;return G(j,Y,"","",function(me){return V.call(ee,me,se++)}),Y}function B(j){if(j._status===-1){var V=j._result;V=V(),V.then(function(ee){(j._status===0||j._status===-1)&&(j._status=1,j._result=ee)},function(ee){(j._status===0||j._status===-1)&&(j._status=2,j._result=ee)}),j._status===-1&&(j._status=0,j._result=V)}if(j._status===1)return j._result.default;throw j._result}var F=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},W={map:K,forEach:function(j,V,ee){K(j,function(){V.apply(this,arguments)},ee)},count:function(j){var V=0;return K(j,function(){V++}),V},toArray:function(j){return K(j,function(V){return V})||[]},only:function(j){if(!z(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ke.Activity=f,ke.Children=W,ke.Component=o,ke.Fragment=b,ke.Profiler=T,ke.PureComponent=h,ke.StrictMode=p,ke.Suspense=d,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ke.__COMPILER_RUNTIME={__proto__:null,c:function(j){return D.H.useMemoCache(j)}},ke.cache=function(j){return function(){return j.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(j,V,ee){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var Y=E({},j.props),se=j.key;if(V!=null)for(me in V.key!==void 0&&(se=""+V.key),V)!g.call(V,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&V.ref===void 0||(Y[me]=V[me]);var me=arguments.length-2;if(me===1)Y.children=ee;else if(1<me){for(var N=Array(me),Q=0;Q<me;Q++)N[Q]=arguments[Q+2];Y.children=N}return L(j.type,se,Y)},ke.createContext=function(j){return j={$$typeof:k,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:H,_context:j},j},ke.createElement=function(j,V,ee){var Y,se={},me=null;if(V!=null)for(Y in V.key!==void 0&&(me=""+V.key),V)g.call(V,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(se[Y]=V[Y]);var N=arguments.length-2;if(N===1)se.children=ee;else if(1<N){for(var Q=Array(N),ie=0;ie<N;ie++)Q[ie]=arguments[ie+2];se.children=Q}if(j&&j.defaultProps)for(Y in N=j.defaultProps,N)se[Y]===void 0&&(se[Y]=N[Y]);return L(j,me,se)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(j){return{$$typeof:l,render:j}},ke.isValidElement=z,ke.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:B}},ke.memo=function(j,V){return{$$typeof:_,type:j,compare:V===void 0?null:V}},ke.startTransition=function(j){var V=D.T,ee={};D.T=ee;try{var Y=j(),se=D.S;se!==null&&se(ee,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(A,F)}catch(me){F(me)}finally{V!==null&&ee.types!==null&&(V.types=ee.types),D.T=V}},ke.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ke.use=function(j){return D.H.use(j)},ke.useActionState=function(j,V,ee){return D.H.useActionState(j,V,ee)},ke.useCallback=function(j,V){return D.H.useCallback(j,V)},ke.useContext=function(j){return D.H.useContext(j)},ke.useDebugValue=function(){},ke.useDeferredValue=function(j,V){return D.H.useDeferredValue(j,V)},ke.useEffect=function(j,V){return D.H.useEffect(j,V)},ke.useEffectEvent=function(j){return D.H.useEffectEvent(j)},ke.useId=function(){return D.H.useId()},ke.useImperativeHandle=function(j,V,ee){return D.H.useImperativeHandle(j,V,ee)},ke.useInsertionEffect=function(j,V){return D.H.useInsertionEffect(j,V)},ke.useLayoutEffect=function(j,V){return D.H.useLayoutEffect(j,V)},ke.useMemo=function(j,V){return D.H.useMemo(j,V)},ke.useOptimistic=function(j,V){return D.H.useOptimistic(j,V)},ke.useReducer=function(j,V,ee){return D.H.useReducer(j,V,ee)},ke.useRef=function(j){return D.H.useRef(j)},ke.useState=function(j){return D.H.useState(j)},ke.useSyncExternalStore=function(j,V,ee){return D.H.useSyncExternalStore(j,V,ee)},ke.useTransition=function(){return D.H.useTransition()},ke.version="19.2.1",ke}var v_;function du(){return v_||(v_=1,Ic.exports=cv()),Ic.exports}var P=du();const nm=hu(P),rm=av({__proto__:null,default:nm},[P]);var qc={exports:{}},Pr={},Fc={exports:{}},Gc={};var y_;function uv(){return y_||(y_=1,(function(n){function m(G,K){var B=G.length;G.push(K);e:for(;0<B;){var F=B-1>>>1,W=G[F];if(0<T(W,K))G[F]=K,G[B]=W,B=F;else break e}}function b(G){return G.length===0?null:G[0]}function p(G){if(G.length===0)return null;var K=G[0],B=G.pop();if(B!==K){G[0]=B;e:for(var F=0,W=G.length,j=W>>>1;F<j;){var V=2*(F+1)-1,ee=G[V],Y=V+1,se=G[Y];if(0>T(ee,B))Y<W&&0>T(se,ee)?(G[F]=se,G[Y]=B,F=Y):(G[F]=ee,G[V]=B,F=V);else if(Y<W&&0>T(se,B))G[F]=se,G[Y]=B,F=Y;else break e}}return K}function T(G,K){var B=G.sortIndex-K.sortIndex;return B!==0?B:G.id-K.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var H=performance;n.unstable_now=function(){return H.now()}}else{var k=Date,l=k.now();n.unstable_now=function(){return k.now()-l}}var d=[],_=[],v=1,f=null,w=3,x=!1,R=!1,E=!1,a=!1,o=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;function S(G){for(var K=b(_);K!==null;){if(K.callback===null)p(_);else if(K.startTime<=G)p(_),K.sortIndex=K.expirationTime,m(d,K);else break;K=b(_)}}function y(G){if(E=!1,S(G),!R)if(b(d)!==null)R=!0,A||(A=!0,U());else{var K=b(_);K!==null&&te(y,K.startTime-G)}}var A=!1,D=-1,g=5,L=-1;function O(){return a?!0:!(n.unstable_now()-L<g)}function z(){if(a=!1,A){var G=n.unstable_now();L=G;var K=!0;try{e:{R=!1,E&&(E=!1,c(D),D=-1),x=!0;var B=w;try{t:{for(S(G),f=b(d);f!==null&&!(f.expirationTime>G&&O());){var F=f.callback;if(typeof F=="function"){f.callback=null,w=f.priorityLevel;var W=F(f.expirationTime<=G);if(G=n.unstable_now(),typeof W=="function"){f.callback=W,S(G),K=!0;break t}f===b(d)&&p(d),S(G)}else p(d);f=b(d)}if(f!==null)K=!0;else{var j=b(_);j!==null&&te(y,j.startTime-G),K=!1}}break e}finally{f=null,w=B,x=!1}K=void 0}}finally{K?U():A=!1}}}var U;if(typeof h=="function")U=function(){h(z)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,$=I.port2;I.port1.onmessage=z,U=function(){$.postMessage(null)}}else U=function(){o(z,0)};function te(G,K){D=o(function(){G(n.unstable_now())},K)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(G){switch(w){case 1:case 2:case 3:var K=3;break;default:K=w}var B=w;w=K;try{return G()}finally{w=B}},n.unstable_requestPaint=function(){a=!0},n.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var B=w;w=G;try{return K()}finally{w=B}},n.unstable_scheduleCallback=function(G,K,B){var F=n.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?F+B:F):B=F,G){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=B+W,G={id:v++,callback:K,priorityLevel:G,startTime:B,expirationTime:W,sortIndex:-1},B>F?(G.sortIndex=B,m(_,G),b(d)===null&&G===b(_)&&(E?(c(D),D=-1):E=!0,te(y,B-F))):(G.sortIndex=W,m(d,G),R||x||(R=!0,A||(A=!0,U()))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var K=w;return function(){var B=w;w=K;try{return G.apply(this,arguments)}finally{w=B}}}})(Gc)),Gc}var S_;function hv(){return S_||(S_=1,Fc.exports=uv()),Fc.exports}var Wc={exports:{}},Ot={};var b_;function dv(){if(b_)return Ot;b_=1;var n=du();function m(d){var _="https://react.dev/errors/"+d;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)_+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function b(){}var p={d:{f:b,r:function(){throw Error(m(522))},D:b,C:b,L:b,m:b,X:b,S:b,M:b},p:0,findDOMNode:null},T=Symbol.for("react.portal");function H(d,_,v){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:f==null?null:""+f,children:d,containerInfo:_,implementation:v}}var k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,_){if(d==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Ot.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,Ot.createPortal=function(d,_){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(m(299));return H(d,_,null,v)},Ot.flushSync=function(d){var _=k.T,v=p.p;try{if(k.T=null,p.p=2,d)return d()}finally{k.T=_,p.p=v,p.d.f()}},Ot.preconnect=function(d,_){typeof d=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,p.d.C(d,_))},Ot.prefetchDNS=function(d){typeof d=="string"&&p.d.D(d)},Ot.preinit=function(d,_){if(typeof d=="string"&&_&&typeof _.as=="string"){var v=_.as,f=l(v,_.crossOrigin),w=typeof _.integrity=="string"?_.integrity:void 0,x=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;v==="style"?p.d.S(d,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:f,integrity:w,fetchPriority:x}):v==="script"&&p.d.X(d,{crossOrigin:f,integrity:w,fetchPriority:x,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Ot.preinitModule=function(d,_){if(typeof d=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var v=l(_.as,_.crossOrigin);p.d.M(d,{crossOrigin:v,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&p.d.M(d)},Ot.preload=function(d,_){if(typeof d=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var v=_.as,f=l(v,_.crossOrigin);p.d.L(d,v,{crossOrigin:f,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Ot.preloadModule=function(d,_){if(typeof d=="string")if(_){var v=l(_.as,_.crossOrigin);p.d.m(d,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:v,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else p.d.m(d)},Ot.requestFormReset=function(d){p.d.r(d)},Ot.unstable_batchedUpdates=function(d,_){return d(_)},Ot.useFormState=function(d,_,v){return k.H.useFormState(d,_,v)},Ot.useFormStatus=function(){return k.H.useHostTransitionStatus()},Ot.version="19.2.1",Ot}var C_;function am(){if(C_)return Wc.exports;C_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(m){console.error(m)}}return n(),Wc.exports=dv(),Wc.exports}var w_;function fv(){if(w_)return Pr;w_=1;var n=hv(),m=du(),b=am();function p(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function T(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function H(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function k(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(H(e)!==e)throw Error(p(188))}function _(e){var t=e.alternate;if(!t){if(t=H(e),t===null)throw Error(p(188));return t!==e?null:e}for(var i=e,s=t;;){var r=i.return;if(r===null)break;var u=r.alternate;if(u===null){if(s=r.return,s!==null){i=s;continue}break}if(r.child===u.child){for(u=r.child;u;){if(u===i)return d(r),e;if(u===s)return d(r),t;u=u.sibling}throw Error(p(188))}if(i.return!==s.return)i=r,s=u;else{for(var M=!1,q=r.child;q;){if(q===i){M=!0,i=r,s=u;break}if(q===s){M=!0,s=r,i=u;break}q=q.sibling}if(!M){for(q=u.child;q;){if(q===i){M=!0,i=u,s=r;break}if(q===s){M=!0,s=u,i=r;break}q=q.sibling}if(!M)throw Error(p(189))}}if(i.alternate!==s)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var f=Object.assign,w=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function U(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function $(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case o:return"Profiler";case a:return"StrictMode";case y:return"Suspense";case A:return"SuspenseList";case L:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case R:return"Portal";case h:return e.displayName||"Context";case c:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return t=e.displayName||null,t!==null?t:$(e.type)||"Memo";case g:t=e._payload,e=e._init;try{return $(e(t))}catch{}}return null}var te=Array.isArray,G=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=b.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},F=[],W=-1;function j(e){return{current:e}}function V(e){0>W||(e.current=F[W],F[W]=null,W--)}function ee(e,t){W++,F[W]=e.current,e.current=t}var Y=j(null),se=j(null),me=j(null),N=j(null);function Q(e,t){switch(ee(me,t),ee(se,e),ee(Y,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zf(t),e=Uf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(Y),ee(Y,e)}function ie(){V(Y),V(se),V(me)}function ne(e){e.memoizedState!==null&&ee(N,e);var t=Y.current,i=Uf(t,e.type);t!==i&&(ee(se,e),ee(Y,i))}function Re(e){se.current===e&&(V(Y),V(se)),N.current===e&&(V(N),jr._currentValue=B)}var ve,Le;function Ne(e){if(ve===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ve=t&&t[1]||"",Le=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+e+Le}var Fe=!1;function Ce(e,t){if(!e||Fe)return"";Fe=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ce){var oe=ce}Reflect.construct(e,[],fe)}else{try{fe.call()}catch(ce){oe=ce}e.call(fe.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(fe=e())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),M=u[0],q=u[1];if(M&&q){var X=M.split(`
`),ae=q.split(`
`);for(r=s=0;s<X.length&&!X[s].includes("DetermineComponentFrameRoot");)s++;for(;r<ae.length&&!ae[r].includes("DetermineComponentFrameRoot");)r++;if(s===X.length||r===ae.length)for(s=X.length-1,r=ae.length-1;1<=s&&0<=r&&X[s]!==ae[r];)r--;for(;1<=s&&0<=r;s--,r--)if(X[s]!==ae[r]){if(s!==1||r!==1)do if(s--,r--,0>r||X[s]!==ae[r]){var he=`
`+X[s].replace(" at new "," at ");return e.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",e.displayName)),he}while(1<=s&&0<=r);break}}}finally{Fe=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ne(i):""}function Be(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ce(e.type,!1);case 11:return Ce(e.type.render,!1);case 1:return Ce(e.type,!0);case 31:return Ne("Activity");default:return""}}function Ut(e){try{var t="",i=null;do t+=Be(e,i),i=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Xt=Object.prototype.hasOwnProperty,Kt=n.unstable_scheduleCallback,Lt=n.unstable_cancelCallback,jt=n.unstable_shouldYield,lt=n.unstable_requestPaint,Ae=n.unstable_now,ut=n.unstable_getCurrentPriorityLevel,mt=n.unstable_ImmediatePriority,Ke=n.unstable_UserBlockingPriority,ht=n.unstable_NormalPriority,Pt=n.unstable_LowPriority,wt=n.unstable_IdlePriority,Nt=n.log,We=n.unstable_setDisableYieldValue,It=null,pt=null;function Bt(e){if(typeof Nt=="function"&&We(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(It,e)}catch{}}var rt=Math.clz32?Math.clz32:kt,Ni=Math.log,Hi=Math.LN2;function kt(e){return e>>>=0,e===0?32:31-(Ni(e)/Hi|0)|0}var pi=256,gi=262144,vi=4194304;function Ht(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function yi(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var r=0,u=e.suspendedLanes,M=e.pingedLanes;e=e.warmLanes;var q=s&134217727;return q!==0?(s=q&~u,s!==0?r=Ht(s):(M&=q,M!==0?r=Ht(M):i||(i=q&~e,i!==0&&(r=Ht(i))))):(q=s&~u,q!==0?r=Ht(q):M!==0?r=Ht(M):i||(i=s&~e,i!==0&&(r=Ht(i)))),r===0?0:t!==0&&t!==r&&(t&u)===0&&(u=r&-r,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:r}function pe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function le(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var e=vi;return vi<<=1,(vi&62914560)===0&&(vi=4194304),e}function _e(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function we(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ye(e,t,i,s,r,u){var M=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var q=e.entanglements,X=e.expirationTimes,ae=e.hiddenUpdates;for(i=M&~i;0<i;){var he=31-rt(i),fe=1<<he;q[he]=0,X[he]=-1;var oe=ae[he];if(oe!==null)for(ae[he]=null,he=0;he<oe.length;he++){var ce=oe[he];ce!==null&&(ce.lane&=-536870913)}i&=~fe}s!==0&&be(e,s,0),u!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=u&~(M&~t))}function be(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-rt(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&261930}function Se(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-rt(i),r=1<<s;r&t|e[s]&t&&(e[s]|=t),i&=~r}}function ot(e,t){var i=t&-t;return i=(i&42)!==0?1:Rt(i),(i&(e.suspendedLanes|t))!==0?0:i}function Rt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Hs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ln(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:o_(e.type))}function on(e,t){var i=K.p;try{return K.p=e,t()}finally{K.p=i}}var $t=Math.random().toString(36).slice(2),dt="__reactFiber$"+$t,it="__reactProps$"+$t,Ai="__reactContainer$"+$t,zs="__reactEvents$"+$t,cn="__reactListeners$"+$t,Us="__reactHandles$"+$t,os="__reactResources$"+$t,zi="__reactMarker$"+$t;function Ps(e){delete e[dt],delete e[it],delete e[zs],delete e[cn],delete e[Us]}function ge(e){var t=e[dt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ai]||i[dt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Yf(e);e!==null;){if(i=e[dt])return i;e=Yf(e)}return t}e=i,i=e.parentNode}return null}function Pe(e){if(e=e[dt]||e[Ai]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ui(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(p(33))}function Si(e){var t=e[os];return t||(t=e[os]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[zi]=!0}var Zn=new Set,un={};function bi(e,t){cs(e,t),cs(e+"Capture",t)}function cs(e,t){for(un[e]=t,e=0;e<t.length;e++)Zn.add(t[e])}var Au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qr={},Du={};function Qm(e){return Xt.call(Du,e)?!0:Xt.call(Qr,e)?!1:Au.test(e)?Du[e]=!0:(Qr[e]=!0,!1)}function Jr(e,t,i){if(Qm(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function ea(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function Pi(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}function ai(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jm(e,t,i){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,u=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(M){i=""+M,u.call(this,M)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(M){i=""+M},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bl(e){if(!e._valueTracker){var t=Tu(e)?"checked":"value";e._valueTracker=Jm(e,t,""+e[t])}}function Mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Tu(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function ta(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ep=/[\n"\\]/g;function li(e){return e.replace(ep,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function kl(e,t,i,s,r,u,M,q){e.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.type=M:e.removeAttribute("type"),t!=null?M==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ai(t)):e.value!==""+ai(t)&&(e.value=""+ai(t)):M!=="submit"&&M!=="reset"||e.removeAttribute("value"),t!=null?Ol(e,M,ai(t)):i!=null?Ol(e,M,ai(i)):s!=null&&e.removeAttribute("value"),r==null&&u!=null&&(e.defaultChecked=!!u),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?e.name=""+ai(q):e.removeAttribute("name")}function Lu(e,t,i,s,r,u,M,q){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Bl(e);return}i=i!=null?""+ai(i):"",t=t!=null?""+ai(t):i,q||t===e.value||(e.value=t),e.defaultValue=t}s=s??r,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=q?e.checked:!!s,e.defaultChecked=!!s,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(e.name=M),Bl(e)}function Ol(e,t,i){t==="number"&&ta(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function hn(e,t,i,s){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&s&&(e[i].defaultSelected=!0)}else{for(i=""+ai(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,s&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Bu(e,t,i){if(t!=null&&(t=""+ai(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+ai(i):""}function ku(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(p(92));if(te(s)){if(1<s.length)throw Error(p(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=ai(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s),Bl(e)}function dn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var tp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ou(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||tp.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function ju(e,t,i){if(t!=null&&typeof t!="object")throw Error(p(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var r in t)s=t[r],t.hasOwnProperty(r)&&i[r]!==s&&Ou(e,r,s)}else for(var u in t)t.hasOwnProperty(u)&&Ou(e,u,t[u])}function jl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ia(e){return sp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ii(){}var Nl=null;function Hl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fn=null,_n=null;function Nu(e){var t=Pe(e);if(t&&(e=t.stateNode)){var i=e[it]||null;e:switch(e=t.stateNode,t.type){case"input":if(kl(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+li(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var r=s[it]||null;if(!r)throw Error(p(90));kl(s,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Mu(s)}break e;case"textarea":Bu(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&hn(e,!!i.multiple,t,!1)}}}var zl=!1;function Hu(e,t,i){if(zl)return e(t,i);zl=!0;try{var s=e(t);return s}finally{if(zl=!1,(fn!==null||_n!==null)&&(Fa(),fn&&(t=fn,e=_n,_n=fn=null,Nu(t),e)))for(t=0;t<e.length;t++)Nu(e[t])}}function Qn(e,t){var i=e.stateNode;if(i===null)return null;var s=i[it]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,t,typeof i));return i}var qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ul=!1;if(qi)try{var Jn={};Object.defineProperty(Jn,"passive",{get:function(){Ul=!0}}),window.addEventListener("test",Jn,Jn),window.removeEventListener("test",Jn,Jn)}catch{Ul=!1}var us=null,Pl=null,sa=null;function zu(){if(sa)return sa;var e,t=Pl,i=t.length,s,r="value"in us?us.value:us.textContent,u=r.length;for(e=0;e<i&&t[e]===r[e];e++);var M=i-e;for(s=1;s<=M&&t[i-s]===r[u-s];s++);return sa=r.slice(e,1<s?1-s:void 0)}function na(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function Uu(){return!1}function qt(e){function t(i,s,r,u,M){this._reactName=i,this._targetInst=r,this.type=s,this.nativeEvent=u,this.target=M,this.currentTarget=null;for(var q in e)e.hasOwnProperty(q)&&(i=e[q],this[q]=i?i(u):u[q]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ra:Uu,this.isPropagationStopped=Uu,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},aa=qt(Is),er=f({},Is,{view:0,detail:0}),np=qt(er),Il,ql,tr,la=f({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tr&&(tr&&e.type==="mousemove"?(Il=e.screenX-tr.screenX,ql=e.screenY-tr.screenY):ql=Il=0,tr=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:ql}}),Pu=qt(la),rp=f({},la,{dataTransfer:0}),ap=qt(rp),lp=f({},er,{relatedTarget:0}),Fl=qt(lp),op=f({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),cp=qt(op),up=f({},Is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hp=qt(up),dp=f({},Is,{data:0}),Iu=qt(dp),fp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_p={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mp[e])?!!t[e]:!1}function Gl(){return pp}var gp=f({},er,{key:function(e){if(e.key){var t=fp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=na(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_p[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(e){return e.type==="keypress"?na(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?na(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vp=qt(gp),yp=f({},la,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=qt(yp),Sp=f({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),bp=qt(Sp),Cp=f({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),wp=qt(Cp),xp=f({},la,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ep=qt(xp),Rp=f({},Is,{newState:0,oldState:0}),Ap=qt(Rp),Dp=[9,13,27,32],Wl=qi&&"CompositionEvent"in window,ir=null;qi&&"documentMode"in document&&(ir=document.documentMode);var Tp=qi&&"TextEvent"in window&&!ir,Fu=qi&&(!Wl||ir&&8<ir&&11>=ir),Gu=" ",Wu=!1;function Yu(e,t){switch(e){case"keyup":return Dp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mn=!1;function Mp(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(Wu=!0,Gu);case"textInput":return e=t.data,e===Gu&&Wu?null:e;default:return null}}function Lp(e,t){if(mn)return e==="compositionend"||!Wl&&Yu(e,t)?(e=zu(),sa=Pl=us=null,mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fu&&t.locale!=="ko"?null:t.data;default:return null}}var Bp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bp[e.type]:t==="textarea"}function Ku(e,t,i,s){fn?_n?_n.push(s):_n=[s]:fn=s,t=$a(t,"onChange"),0<t.length&&(i=new aa("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var sr=null,nr=null;function kp(e){Bf(e,0)}function oa(e){var t=Ui(e);if(Mu(t))return e}function $u(e,t){if(e==="change")return t}var Zu=!1;if(qi){var Yl;if(qi){var Vl="oninput"in document;if(!Vl){var Qu=document.createElement("div");Qu.setAttribute("oninput","return;"),Vl=typeof Qu.oninput=="function"}Yl=Vl}else Yl=!1;Zu=Yl&&(!document.documentMode||9<document.documentMode)}function Ju(){sr&&(sr.detachEvent("onpropertychange",eh),nr=sr=null)}function eh(e){if(e.propertyName==="value"&&oa(nr)){var t=[];Ku(t,nr,e,Hl(e)),Hu(kp,t)}}function Op(e,t,i){e==="focusin"?(Ju(),sr=t,nr=i,sr.attachEvent("onpropertychange",eh)):e==="focusout"&&Ju()}function jp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oa(nr)}function Np(e,t){if(e==="click")return oa(t)}function Hp(e,t){if(e==="input"||e==="change")return oa(t)}function zp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:zp;function rr(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var r=i[s];if(!Xt.call(t,r)||!Zt(e[r],t[r]))return!1}return!0}function th(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ih(e,t){var i=th(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=th(i)}}function sh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?sh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=ta(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=ta(e.document)}return t}function Xl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Up=qi&&"documentMode"in document&&11>=document.documentMode,pn=null,Kl=null,ar=null,$l=!1;function rh(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;$l||pn==null||pn!==ta(s)||(s=pn,"selectionStart"in s&&Xl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ar&&rr(ar,s)||(ar=s,s=$a(Kl,"onSelect"),0<s.length&&(t=new aa("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=pn)))}function qs(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var gn={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Zl={},ah={};qi&&(ah=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function Fs(e){if(Zl[e])return Zl[e];if(!gn[e])return e;var t=gn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ah)return Zl[e]=t[i];return e}var lh=Fs("animationend"),oh=Fs("animationiteration"),ch=Fs("animationstart"),Pp=Fs("transitionrun"),Ip=Fs("transitionstart"),qp=Fs("transitioncancel"),uh=Fs("transitionend"),hh=new Map,Ql="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ql.push("scrollEnd");function Ci(e,t){hh.set(e,t),bi(t,[e])}var ca=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},oi=[],vn=0,Jl=0;function ua(){for(var e=vn,t=Jl=vn=0;t<e;){var i=oi[t];oi[t++]=null;var s=oi[t];oi[t++]=null;var r=oi[t];oi[t++]=null;var u=oi[t];if(oi[t++]=null,s!==null&&r!==null){var M=s.pending;M===null?r.next=r:(r.next=M.next,M.next=r),s.pending=r}u!==0&&dh(i,r,u)}}function ha(e,t,i,s){oi[vn++]=e,oi[vn++]=t,oi[vn++]=i,oi[vn++]=s,Jl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function eo(e,t,i,s){return ha(e,t,i,s),da(e)}function Gs(e,t){return ha(e,null,null,t),da(e)}function dh(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var r=!1,u=e.return;u!==null;)u.childLanes|=i,s=u.alternate,s!==null&&(s.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(r=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,r&&t!==null&&(r=31-rt(i),e=u.hiddenUpdates,s=e[r],s===null?e[r]=[t]:s.push(t),t.lane=i|536870912),u):null}function da(e){if(50<Dr)throw Dr=0,uc=null,Error(p(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var yn={};function Fp(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,i,s){return new Fp(e,t,i,s)}function to(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fi(e,t){var i=e.alternate;return i===null?(i=Qt(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function fh(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function fa(e,t,i,s,r,u){var M=0;if(s=e,typeof e=="function")to(e)&&(M=1);else if(typeof e=="string")M=Xg(e,i,Y.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case L:return e=Qt(31,i,t,r),e.elementType=L,e.lanes=u,e;case E:return Ws(i.children,r,u,t);case a:M=8,r|=24;break;case o:return e=Qt(12,i,t,r|2),e.elementType=o,e.lanes=u,e;case y:return e=Qt(13,i,t,r),e.elementType=y,e.lanes=u,e;case A:return e=Qt(19,i,t,r),e.elementType=A,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case h:M=10;break e;case c:M=9;break e;case S:M=11;break e;case D:M=14;break e;case g:M=16,s=null;break e}M=29,i=Error(p(130,e===null?"null":typeof e,"")),s=null}return t=Qt(M,i,t,r),t.elementType=e,t.type=s,t.lanes=u,t}function Ws(e,t,i,s){return e=Qt(7,e,s,t),e.lanes=i,e}function io(e,t,i){return e=Qt(6,e,null,t),e.lanes=i,e}function _h(e){var t=Qt(18,null,null,0);return t.stateNode=e,t}function so(e,t,i){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var mh=new WeakMap;function ci(e,t){if(typeof e=="object"&&e!==null){var i=mh.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Ut(t)},mh.set(e,t),t)}return{value:e,source:t,stack:Ut(t)}}var Sn=[],bn=0,_a=null,lr=0,ui=[],hi=0,hs=null,Di=1,Ti="";function Gi(e,t){Sn[bn++]=lr,Sn[bn++]=_a,_a=e,lr=t}function ph(e,t,i){ui[hi++]=Di,ui[hi++]=Ti,ui[hi++]=hs,hs=e;var s=Di;e=Ti;var r=32-rt(s)-1;s&=~(1<<r),i+=1;var u=32-rt(t)+r;if(30<u){var M=r-r%5;u=(s&(1<<M)-1).toString(32),s>>=M,r-=M,Di=1<<32-rt(t)+r|i<<r|s,Ti=u+e}else Di=1<<u|i<<r|s,Ti=e}function no(e){e.return!==null&&(Gi(e,1),ph(e,1,0))}function ro(e){for(;e===_a;)_a=Sn[--bn],Sn[bn]=null,lr=Sn[--bn],Sn[bn]=null;for(;e===hs;)hs=ui[--hi],ui[hi]=null,Ti=ui[--hi],ui[hi]=null,Di=ui[--hi],ui[hi]=null}function gh(e,t){ui[hi++]=Di,ui[hi++]=Ti,ui[hi++]=hs,Di=t.id,Ti=t.overflow,hs=e}var At=null,st=null,Ge=!1,ds=null,di=!1,ao=Error(p(519));function fs(e){var t=Error(p(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw or(ci(t,e)),ao}function vh(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[dt]=e,t[it]=s,i){case"dialog":Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":case"embed":Ue("load",t);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ue(Mr[i],t);break;case"source":Ue("error",t);break;case"img":case"image":case"link":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"input":Ue("invalid",t),Lu(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Ue("invalid",t);break;case"textarea":Ue("invalid",t),ku(t,s.value,s.defaultValue,s.children)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||Nf(t.textContent,i)?(s.popover!=null&&(Ue("beforetoggle",t),Ue("toggle",t)),s.onScroll!=null&&Ue("scroll",t),s.onScrollEnd!=null&&Ue("scrollend",t),s.onClick!=null&&(t.onclick=Ii),t=!0):t=!1,t||fs(e,!0)}function yh(e){for(At=e.return;At;)switch(At.tag){case 5:case 31:case 13:di=!1;return;case 27:case 3:di=!0;return;default:At=At.return}}function Cn(e){if(e!==At)return!1;if(!Ge)return yh(e),Ge=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ec(e.type,e.memoizedProps)),i=!i),i&&st&&fs(e),yh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));st=Wf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));st=Wf(e)}else t===27?(t=st,As(e.type)?(e=Mc,Mc=null,st=e):st=t):st=At?_i(e.stateNode.nextSibling):null;return!0}function Ys(){st=At=null,Ge=!1}function lo(){var e=ds;return e!==null&&(Yt===null?Yt=e:Yt.push.apply(Yt,e),ds=null),e}function or(e){ds===null?ds=[e]:ds.push(e)}var oo=j(null),Vs=null,Wi=null;function _s(e,t,i){ee(oo,t._currentValue),t._currentValue=i}function Yi(e){e._currentValue=oo.current,V(oo)}function co(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function uo(e,t,i,s){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var u=r.dependencies;if(u!==null){var M=r.child;u=u.firstContext;e:for(;u!==null;){var q=u;u=r;for(var X=0;X<t.length;X++)if(q.context===t[X]){u.lanes|=i,q=u.alternate,q!==null&&(q.lanes|=i),co(u.return,i,e),s||(M=null);break e}u=q.next}}else if(r.tag===18){if(M=r.return,M===null)throw Error(p(341));M.lanes|=i,u=M.alternate,u!==null&&(u.lanes|=i),co(M,i,e),M=null}else M=r.child;if(M!==null)M.return=r;else for(M=r;M!==null;){if(M===e){M=null;break}if(r=M.sibling,r!==null){r.return=M.return,M=r;break}M=M.return}r=M}}function wn(e,t,i,s){e=null;for(var r=t,u=!1;r!==null;){if(!u){if((r.flags&524288)!==0)u=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var M=r.alternate;if(M===null)throw Error(p(387));if(M=M.memoizedProps,M!==null){var q=r.type;Zt(r.pendingProps.value,M.value)||(e!==null?e.push(q):e=[q])}}else if(r===N.current){if(M=r.alternate,M===null)throw Error(p(387));M.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(jr):e=[jr])}r=r.return}e!==null&&uo(t,e,i,s),t.flags|=262144}function ma(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Xs(e){Vs=e,Wi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Dt(e){return Sh(Vs,e)}function pa(e,t){return Vs===null&&Xs(e),Sh(e,t)}function Sh(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Wi===null){if(e===null)throw Error(p(308));Wi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Wi=Wi.next=t;return i}var Gp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Wp=n.unstable_scheduleCallback,Yp=n.unstable_NormalPriority,yt={$$typeof:h,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ho(){return{controller:new Gp,data:new Map,refCount:0}}function cr(e){e.refCount--,e.refCount===0&&Wp(Yp,function(){e.controller.abort()})}var ur=null,fo=0,xn=0,En=null;function Vp(e,t){if(ur===null){var i=ur=[];fo=0,xn=pc(),En={status:"pending",value:void 0,then:function(s){i.push(s)}}}return fo++,t.then(bh,bh),t}function bh(){if(--fo===0&&ur!==null){En!==null&&(En.status="fulfilled");var e=ur;ur=null,xn=0,En=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Xp(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(r){i.push(r)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var r=0;r<i.length;r++)(0,i[r])(t)},function(r){for(s.status="rejected",s.reason=r,r=0;r<i.length;r++)(0,i[r])(void 0)}),s}var Ch=G.S;G.S=function(e,t){af=Ae(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Vp(e,t),Ch!==null&&Ch(e,t)};var Ks=j(null);function _o(){var e=Ks.current;return e!==null?e:tt.pooledCache}function ga(e,t){t===null?ee(Ks,Ks.current):ee(Ks,t.pool)}function wh(){var e=_o();return e===null?null:{parent:yt._currentValue,pool:e}}var Rn=Error(p(460)),mo=Error(p(474)),va=Error(p(542)),ya={then:function(){}};function xh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Eh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(Ii,Ii),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ah(e),e;default:if(typeof t.status=="string")t.then(Ii,Ii);else{if(e=tt,e!==null&&100<e.shellSuspendCounter)throw Error(p(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=s}},function(s){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ah(e),e}throw Zs=t,Rn}}function $s(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Zs=i,Rn):i}}var Zs=null;function Rh(){if(Zs===null)throw Error(p(459));var e=Zs;return Zs=null,e}function Ah(e){if(e===Rn||e===va)throw Error(p(483))}var An=null,hr=0;function Sa(e){var t=hr;return hr+=1,An===null&&(An=[]),Eh(An,e,t)}function dr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ba(e,t){throw t.$$typeof===w?Error(p(525)):(e=Object.prototype.toString.call(t),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Dh(e){function t(J,Z){if(e){var re=J.deletions;re===null?(J.deletions=[Z],J.flags|=16):re.push(Z)}}function i(J,Z){if(!e)return null;for(;Z!==null;)t(J,Z),Z=Z.sibling;return null}function s(J){for(var Z=new Map;J!==null;)J.key!==null?Z.set(J.key,J):Z.set(J.index,J),J=J.sibling;return Z}function r(J,Z){return J=Fi(J,Z),J.index=0,J.sibling=null,J}function u(J,Z,re){return J.index=re,e?(re=J.alternate,re!==null?(re=re.index,re<Z?(J.flags|=67108866,Z):re):(J.flags|=67108866,Z)):(J.flags|=1048576,Z)}function M(J){return e&&J.alternate===null&&(J.flags|=67108866),J}function q(J,Z,re,de){return Z===null||Z.tag!==6?(Z=io(re,J.mode,de),Z.return=J,Z):(Z=r(Z,re),Z.return=J,Z)}function X(J,Z,re,de){var De=re.type;return De===E?he(J,Z,re.props.children,de,re.key):Z!==null&&(Z.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===g&&$s(De)===Z.type)?(Z=r(Z,re.props),dr(Z,re),Z.return=J,Z):(Z=fa(re.type,re.key,re.props,null,J.mode,de),dr(Z,re),Z.return=J,Z)}function ae(J,Z,re,de){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==re.containerInfo||Z.stateNode.implementation!==re.implementation?(Z=so(re,J.mode,de),Z.return=J,Z):(Z=r(Z,re.children||[]),Z.return=J,Z)}function he(J,Z,re,de,De){return Z===null||Z.tag!==7?(Z=Ws(re,J.mode,de,De),Z.return=J,Z):(Z=r(Z,re),Z.return=J,Z)}function fe(J,Z,re){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=io(""+Z,J.mode,re),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return re=fa(Z.type,Z.key,Z.props,null,J.mode,re),dr(re,Z),re.return=J,re;case R:return Z=so(Z,J.mode,re),Z.return=J,Z;case g:return Z=$s(Z),fe(J,Z,re)}if(te(Z)||U(Z))return Z=Ws(Z,J.mode,re,null),Z.return=J,Z;if(typeof Z.then=="function")return fe(J,Sa(Z),re);if(Z.$$typeof===h)return fe(J,pa(J,Z),re);ba(J,Z)}return null}function oe(J,Z,re,de){var De=Z!==null?Z.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return De!==null?null:q(J,Z,""+re,de);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case x:return re.key===De?X(J,Z,re,de):null;case R:return re.key===De?ae(J,Z,re,de):null;case g:return re=$s(re),oe(J,Z,re,de)}if(te(re)||U(re))return De!==null?null:he(J,Z,re,de,null);if(typeof re.then=="function")return oe(J,Z,Sa(re),de);if(re.$$typeof===h)return oe(J,Z,pa(J,re),de);ba(J,re)}return null}function ce(J,Z,re,de,De){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return J=J.get(re)||null,q(Z,J,""+de,De);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case x:return J=J.get(de.key===null?re:de.key)||null,X(Z,J,de,De);case R:return J=J.get(de.key===null?re:de.key)||null,ae(Z,J,de,De);case g:return de=$s(de),ce(J,Z,re,de,De)}if(te(de)||U(de))return J=J.get(re)||null,he(Z,J,de,De,null);if(typeof de.then=="function")return ce(J,Z,re,Sa(de),De);if(de.$$typeof===h)return ce(J,Z,re,pa(Z,de),De);ba(Z,de)}return null}function xe(J,Z,re,de){for(var De=null,Ye=null,Ee=Z,je=Z=0,qe=null;Ee!==null&&je<re.length;je++){Ee.index>je?(qe=Ee,Ee=null):qe=Ee.sibling;var Ve=oe(J,Ee,re[je],de);if(Ve===null){Ee===null&&(Ee=qe);break}e&&Ee&&Ve.alternate===null&&t(J,Ee),Z=u(Ve,Z,je),Ye===null?De=Ve:Ye.sibling=Ve,Ye=Ve,Ee=qe}if(je===re.length)return i(J,Ee),Ge&&Gi(J,je),De;if(Ee===null){for(;je<re.length;je++)Ee=fe(J,re[je],de),Ee!==null&&(Z=u(Ee,Z,je),Ye===null?De=Ee:Ye.sibling=Ee,Ye=Ee);return Ge&&Gi(J,je),De}for(Ee=s(Ee);je<re.length;je++)qe=ce(Ee,J,je,re[je],de),qe!==null&&(e&&qe.alternate!==null&&Ee.delete(qe.key===null?je:qe.key),Z=u(qe,Z,je),Ye===null?De=qe:Ye.sibling=qe,Ye=qe);return e&&Ee.forEach(function(Bs){return t(J,Bs)}),Ge&&Gi(J,je),De}function Me(J,Z,re,de){if(re==null)throw Error(p(151));for(var De=null,Ye=null,Ee=Z,je=Z=0,qe=null,Ve=re.next();Ee!==null&&!Ve.done;je++,Ve=re.next()){Ee.index>je?(qe=Ee,Ee=null):qe=Ee.sibling;var Bs=oe(J,Ee,Ve.value,de);if(Bs===null){Ee===null&&(Ee=qe);break}e&&Ee&&Bs.alternate===null&&t(J,Ee),Z=u(Bs,Z,je),Ye===null?De=Bs:Ye.sibling=Bs,Ye=Bs,Ee=qe}if(Ve.done)return i(J,Ee),Ge&&Gi(J,je),De;if(Ee===null){for(;!Ve.done;je++,Ve=re.next())Ve=fe(J,Ve.value,de),Ve!==null&&(Z=u(Ve,Z,je),Ye===null?De=Ve:Ye.sibling=Ve,Ye=Ve);return Ge&&Gi(J,je),De}for(Ee=s(Ee);!Ve.done;je++,Ve=re.next())Ve=ce(Ee,J,je,Ve.value,de),Ve!==null&&(e&&Ve.alternate!==null&&Ee.delete(Ve.key===null?je:Ve.key),Z=u(Ve,Z,je),Ye===null?De=Ve:Ye.sibling=Ve,Ye=Ve);return e&&Ee.forEach(function(rv){return t(J,rv)}),Ge&&Gi(J,je),De}function et(J,Z,re,de){if(typeof re=="object"&&re!==null&&re.type===E&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case x:e:{for(var De=re.key;Z!==null;){if(Z.key===De){if(De=re.type,De===E){if(Z.tag===7){i(J,Z.sibling),de=r(Z,re.props.children),de.return=J,J=de;break e}}else if(Z.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===g&&$s(De)===Z.type){i(J,Z.sibling),de=r(Z,re.props),dr(de,re),de.return=J,J=de;break e}i(J,Z);break}else t(J,Z);Z=Z.sibling}re.type===E?(de=Ws(re.props.children,J.mode,de,re.key),de.return=J,J=de):(de=fa(re.type,re.key,re.props,null,J.mode,de),dr(de,re),de.return=J,J=de)}return M(J);case R:e:{for(De=re.key;Z!==null;){if(Z.key===De)if(Z.tag===4&&Z.stateNode.containerInfo===re.containerInfo&&Z.stateNode.implementation===re.implementation){i(J,Z.sibling),de=r(Z,re.children||[]),de.return=J,J=de;break e}else{i(J,Z);break}else t(J,Z);Z=Z.sibling}de=so(re,J.mode,de),de.return=J,J=de}return M(J);case g:return re=$s(re),et(J,Z,re,de)}if(te(re))return xe(J,Z,re,de);if(U(re)){if(De=U(re),typeof De!="function")throw Error(p(150));return re=De.call(re),Me(J,Z,re,de)}if(typeof re.then=="function")return et(J,Z,Sa(re),de);if(re.$$typeof===h)return et(J,Z,pa(J,re),de);ba(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Z!==null&&Z.tag===6?(i(J,Z.sibling),de=r(Z,re),de.return=J,J=de):(i(J,Z),de=io(re,J.mode,de),de.return=J,J=de),M(J)):i(J,Z)}return function(J,Z,re,de){try{hr=0;var De=et(J,Z,re,de);return An=null,De}catch(Ee){if(Ee===Rn||Ee===va)throw Ee;var Ye=Qt(29,Ee,null,J.mode);return Ye.lanes=de,Ye.return=J,Ye}finally{}}}var Qs=Dh(!0),Th=Dh(!1),ms=!1;function po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function go(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ps(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function gs(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Xe&2)!==0){var r=s.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),s.pending=t,t=da(e),dh(e,null,i),t}return ha(e,s,t,i),da(e)}function fr(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Se(e,i)}}function vo(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var r=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var M={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?r=u=M:u=u.next=M,i=i.next}while(i!==null);u===null?r=u=t:u=u.next=t}else r=u=t;i={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var yo=!1;function _r(){if(yo){var e=En;if(e!==null)throw e}}function mr(e,t,i,s){yo=!1;var r=e.updateQueue;ms=!1;var u=r.firstBaseUpdate,M=r.lastBaseUpdate,q=r.shared.pending;if(q!==null){r.shared.pending=null;var X=q,ae=X.next;X.next=null,M===null?u=ae:M.next=ae,M=X;var he=e.alternate;he!==null&&(he=he.updateQueue,q=he.lastBaseUpdate,q!==M&&(q===null?he.firstBaseUpdate=ae:q.next=ae,he.lastBaseUpdate=X))}if(u!==null){var fe=r.baseState;M=0,he=ae=X=null,q=u;do{var oe=q.lane&-536870913,ce=oe!==q.lane;if(ce?(Ie&oe)===oe:(s&oe)===oe){oe!==0&&oe===xn&&(yo=!0),he!==null&&(he=he.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var xe=e,Me=q;oe=t;var et=i;switch(Me.tag){case 1:if(xe=Me.payload,typeof xe=="function"){fe=xe.call(et,fe,oe);break e}fe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Me.payload,oe=typeof xe=="function"?xe.call(et,fe,oe):xe,oe==null)break e;fe=f({},fe,oe);break e;case 2:ms=!0}}oe=q.callback,oe!==null&&(e.flags|=64,ce&&(e.flags|=8192),ce=r.callbacks,ce===null?r.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:q.tag,payload:q.payload,callback:q.callback,next:null},he===null?(ae=he=ce,X=fe):he=he.next=ce,M|=oe;if(q=q.next,q===null){if(q=r.shared.pending,q===null)break;ce=q,q=ce.next,ce.next=null,r.lastBaseUpdate=ce,r.shared.pending=null}}while(!0);he===null&&(X=fe),r.baseState=X,r.firstBaseUpdate=ae,r.lastBaseUpdate=he,u===null&&(r.shared.lanes=0),Cs|=M,e.lanes=M,e.memoizedState=fe}}function Mh(e,t){if(typeof e!="function")throw Error(p(191,e));e.call(t)}function Lh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Mh(i[e],t)}var Dn=j(null),Ca=j(0);function Bh(e,t){e=ts,ee(Ca,e),ee(Dn,t),ts=e|t.baseLanes}function So(){ee(Ca,ts),ee(Dn,Dn.current)}function bo(){ts=Ca.current,V(Dn),V(Ca)}var Jt=j(null),fi=null;function vs(e){var t=e.alternate;ee(gt,gt.current&1),ee(Jt,e),fi===null&&(t===null||Dn.current!==null||t.memoizedState!==null)&&(fi=e)}function Co(e){ee(gt,gt.current),ee(Jt,e),fi===null&&(fi=e)}function kh(e){e.tag===22?(ee(gt,gt.current),ee(Jt,e),fi===null&&(fi=e)):ys()}function ys(){ee(gt,gt.current),ee(Jt,Jt.current)}function ei(e){V(Jt),fi===e&&(fi=null),V(gt)}var gt=j(0);function wa(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Dc(i)||Tc(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Vi=0,Oe=null,Qe=null,St=null,xa=!1,Tn=!1,Js=!1,Ea=0,pr=0,Mn=null,Kp=0;function ft(){throw Error(p(321))}function wo(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Zt(e[i],t[i]))return!1;return!0}function xo(e,t,i,s,r,u){return Vi=u,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?pd:Uo,Js=!1,u=i(s,r),Js=!1,Tn&&(u=jh(t,i,s,r)),Oh(e),u}function Oh(e){G.H=yr;var t=Qe!==null&&Qe.next!==null;if(Vi=0,St=Qe=Oe=null,xa=!1,pr=0,Mn=null,t)throw Error(p(300));e===null||bt||(e=e.dependencies,e!==null&&ma(e)&&(bt=!0))}function jh(e,t,i,s){Oe=e;var r=0;do{if(Tn&&(Mn=null),pr=0,Tn=!1,25<=r)throw Error(p(301));if(r+=1,St=Qe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}G.H=gd,u=t(i,s)}while(Tn);return u}function $p(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?gr(t):t,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Oe.flags|=1024),t}function Eo(){var e=Ea!==0;return Ea=0,e}function Ro(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Ao(e){if(xa){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}xa=!1}Vi=0,St=Qe=Oe=null,Tn=!1,pr=Ea=0,Mn=null}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Oe.memoizedState=St=e:St=St.next=e,St}function vt(){if(Qe===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=St===null?Oe.memoizedState:St.next;if(t!==null)St=t,Qe=e;else{if(e===null)throw Oe.alternate===null?Error(p(467)):Error(p(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},St===null?Oe.memoizedState=St=e:St=St.next=e}return St}function Ra(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gr(e){var t=pr;return pr+=1,Mn===null&&(Mn=[]),e=Eh(Mn,e,t),t=Oe,(St===null?t.memoizedState:St.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?pd:Uo),e}function Aa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return gr(e);if(e.$$typeof===h)return Dt(e)}throw Error(p(438,String(e)))}function Do(e){var t=null,i=Oe.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=Oe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Ra(),Oe.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=O;return t.index++,i}function Xi(e,t){return typeof t=="function"?t(e):t}function Da(e){var t=vt();return To(t,Qe,e)}function To(e,t,i){var s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var r=e.baseQueue,u=s.pending;if(u!==null){if(r!==null){var M=r.next;r.next=u.next,u.next=M}t.baseQueue=r=u,s.pending=null}if(u=e.baseState,r===null)e.memoizedState=u;else{t=r.next;var q=M=null,X=null,ae=t,he=!1;do{var fe=ae.lane&-536870913;if(fe!==ae.lane?(Ie&fe)===fe:(Vi&fe)===fe){var oe=ae.revertLane;if(oe===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),fe===xn&&(he=!0);else if((Vi&oe)===oe){ae=ae.next,oe===xn&&(he=!0);continue}else fe={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(q=X=fe,M=u):X=X.next=fe,Oe.lanes|=oe,Cs|=oe;fe=ae.action,Js&&i(u,fe),u=ae.hasEagerState?ae.eagerState:i(u,fe)}else oe={lane:fe,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},X===null?(q=X=oe,M=u):X=X.next=oe,Oe.lanes|=fe,Cs|=fe;ae=ae.next}while(ae!==null&&ae!==t);if(X===null?M=u:X.next=q,!Zt(u,e.memoizedState)&&(bt=!0,he&&(i=En,i!==null)))throw i;e.memoizedState=u,e.baseState=M,e.baseQueue=X,s.lastRenderedState=u}return r===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Mo(e){var t=vt(),i=t.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var s=i.dispatch,r=i.pending,u=t.memoizedState;if(r!==null){i.pending=null;var M=r=r.next;do u=e(u,M.action),M=M.next;while(M!==r);Zt(u,t.memoizedState)||(bt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,s]}function Nh(e,t,i){var s=Oe,r=vt(),u=Ge;if(u){if(i===void 0)throw Error(p(407));i=i()}else i=t();var M=!Zt((Qe||r).memoizedState,i);if(M&&(r.memoizedState=i,bt=!0),r=r.queue,ko(Uh.bind(null,s,r,e),[e]),r.getSnapshot!==t||M||St!==null&&St.memoizedState.tag&1){if(s.flags|=2048,Ln(9,{destroy:void 0},zh.bind(null,s,r,i,t),null),tt===null)throw Error(p(349));u||(Vi&127)!==0||Hh(s,t,i)}return i}function Hh(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Oe.updateQueue,t===null?(t=Ra(),Oe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function zh(e,t,i,s){t.value=i,t.getSnapshot=s,Ph(t)&&Ih(e)}function Uh(e,t,i){return i(function(){Ph(t)&&Ih(e)})}function Ph(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Zt(e,i)}catch{return!0}}function Ih(e){var t=Gs(e,2);t!==null&&Vt(t,e,2)}function Lo(e){var t=zt();if(typeof e=="function"){var i=e;if(e=i(),Js){Bt(!0);try{i()}finally{Bt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:e},t}function qh(e,t,i,s){return e.baseState=i,To(e,Qe,typeof s=="function"?s:Xi)}function Zp(e,t,i,s,r){if(La(e))throw Error(p(485));if(e=t.action,e!==null){var u={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){u.listeners.push(M)}};G.T!==null?i(!0):u.isTransition=!1,s(u),i=t.pending,i===null?(u.next=t.pending=u,Fh(t,u)):(u.next=i.next,t.pending=i.next=u)}}function Fh(e,t){var i=t.action,s=t.payload,r=e.state;if(t.isTransition){var u=G.T,M={};G.T=M;try{var q=i(r,s),X=G.S;X!==null&&X(M,q),Gh(e,t,q)}catch(ae){Bo(e,t,ae)}finally{u!==null&&M.types!==null&&(u.types=M.types),G.T=u}}else try{u=i(r,s),Gh(e,t,u)}catch(ae){Bo(e,t,ae)}}function Gh(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Wh(e,t,s)},function(s){return Bo(e,t,s)}):Wh(e,t,i)}function Wh(e,t,i){t.status="fulfilled",t.value=i,Yh(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Fh(e,i)))}function Bo(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,Yh(t),t=t.next;while(t!==s)}e.action=null}function Yh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Vh(e,t){return t}function Xh(e,t){if(Ge){var i=tt.formState;if(i!==null){e:{var s=Oe;if(Ge){if(st){t:{for(var r=st,u=di;r.nodeType!==8;){if(!u){r=null;break t}if(r=_i(r.nextSibling),r===null){r=null;break t}}u=r.data,r=u==="F!"||u==="F"?r:null}if(r){st=_i(r.nextSibling),s=r.data==="F!";break e}}fs(s)}s=!1}s&&(t=i[0])}}return i=zt(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:t},i.queue=s,i=fd.bind(null,Oe,s),s.dispatch=i,s=Lo(!1),u=zo.bind(null,Oe,!1,s.queue),s=zt(),r={state:t,dispatch:null,action:e,pending:null},s.queue=r,i=Zp.bind(null,Oe,r,u,i),r.dispatch=i,s.memoizedState=e,[t,i,!1]}function Kh(e){var t=vt();return $h(t,Qe,e)}function $h(e,t,i){if(t=To(e,t,Vh)[0],e=Da(Xi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=gr(t)}catch(M){throw M===Rn?va:M}else s=t;t=vt();var r=t.queue,u=r.dispatch;return i!==t.memoizedState&&(Oe.flags|=2048,Ln(9,{destroy:void 0},Qp.bind(null,r,i),null)),[s,u,e]}function Qp(e,t){e.action=t}function Zh(e){var t=vt(),i=Qe;if(i!==null)return $h(t,i,e);vt(),t=t.memoizedState,i=vt();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function Ln(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=Ra(),Oe.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Qh(){return vt().memoizedState}function Ta(e,t,i,s){var r=zt();Oe.flags|=e,r.memoizedState=Ln(1|t,{destroy:void 0},i,s===void 0?null:s)}function Ma(e,t,i,s){var r=vt();s=s===void 0?null:s;var u=r.memoizedState.inst;Qe!==null&&s!==null&&wo(s,Qe.memoizedState.deps)?r.memoizedState=Ln(t,u,i,s):(Oe.flags|=e,r.memoizedState=Ln(1|t,u,i,s))}function Jh(e,t){Ta(8390656,8,e,t)}function ko(e,t){Ma(2048,8,e,t)}function Jp(e){Oe.flags|=4;var t=Oe.updateQueue;if(t===null)t=Ra(),Oe.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function ed(e){var t=vt().memoizedState;return Jp({ref:t,nextImpl:e}),function(){if((Xe&2)!==0)throw Error(p(440));return t.impl.apply(void 0,arguments)}}function td(e,t){return Ma(4,2,e,t)}function id(e,t){return Ma(4,4,e,t)}function sd(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nd(e,t,i){i=i!=null?i.concat([e]):null,Ma(4,4,sd.bind(null,t,e),i)}function Oo(){}function rd(e,t){var i=vt();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&wo(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function ad(e,t){var i=vt();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&wo(t,s[1]))return s[0];if(s=e(),Js){Bt(!0);try{e()}finally{Bt(!1)}}return i.memoizedState=[s,t],s}function jo(e,t,i){return i===void 0||(Vi&1073741824)!==0&&(Ie&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=of(),Oe.lanes|=e,Cs|=e,i)}function ld(e,t,i,s){return Zt(i,t)?i:Dn.current!==null?(e=jo(e,i,s),Zt(e,t)||(bt=!0),e):(Vi&42)===0||(Vi&1073741824)!==0&&(Ie&261930)===0?(bt=!0,e.memoizedState=i):(e=of(),Oe.lanes|=e,Cs|=e,t)}function od(e,t,i,s,r){var u=K.p;K.p=u!==0&&8>u?u:8;var M=G.T,q={};G.T=q,zo(e,!1,t,i);try{var X=r(),ae=G.S;if(ae!==null&&ae(q,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var he=Xp(X,s);vr(e,t,he,si(e))}else vr(e,t,s,si(e))}catch(fe){vr(e,t,{then:function(){},status:"rejected",reason:fe},si())}finally{K.p=u,M!==null&&q.types!==null&&(M.types=q.types),G.T=M}}function eg(){}function No(e,t,i,s){if(e.tag!==5)throw Error(p(476));var r=cd(e).queue;od(e,r,t,B,i===null?eg:function(){return ud(e),i(s)})}function cd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:B},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xi,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ud(e){var t=cd(e);t.next===null&&(t=e.alternate.memoizedState),vr(e,t.next.queue,{},si())}function Ho(){return Dt(jr)}function hd(){return vt().memoizedState}function dd(){return vt().memoizedState}function tg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=si();e=ps(i);var s=gs(t,e,i);s!==null&&(Vt(s,t,i),fr(s,t,i)),t={cache:ho()},e.payload=t;return}t=t.return}}function ig(e,t,i){var s=si();i={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},La(e)?_d(t,i):(i=eo(e,t,i,s),i!==null&&(Vt(i,e,s),md(i,t,s)))}function fd(e,t,i){var s=si();vr(e,t,i,s)}function vr(e,t,i,s){var r={lane:s,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(La(e))_d(t,r);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var M=t.lastRenderedState,q=u(M,i);if(r.hasEagerState=!0,r.eagerState=q,Zt(q,M))return ha(e,t,r,0),tt===null&&ua(),!1}catch{}finally{}if(i=eo(e,t,r,s),i!==null)return Vt(i,e,s),md(i,t,s),!0}return!1}function zo(e,t,i,s){if(s={lane:2,revertLane:pc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},La(e)){if(t)throw Error(p(479))}else t=eo(e,i,s,2),t!==null&&Vt(t,e,2)}function La(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function _d(e,t){Tn=xa=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function md(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Se(e,i)}}var yr={readContext:Dt,use:Aa,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useLayoutEffect:ft,useInsertionEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useSyncExternalStore:ft,useId:ft,useHostTransitionStatus:ft,useFormState:ft,useActionState:ft,useOptimistic:ft,useMemoCache:ft,useCacheRefresh:ft};yr.useEffectEvent=ft;var pd={readContext:Dt,use:Aa,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:Dt,useEffect:Jh,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Ta(4194308,4,sd.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Ta(4194308,4,e,t)},useInsertionEffect:function(e,t){Ta(4,2,e,t)},useMemo:function(e,t){var i=zt();t=t===void 0?null:t;var s=e();if(Js){Bt(!0);try{e()}finally{Bt(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=zt();if(i!==void 0){var r=i(t);if(Js){Bt(!0);try{i(t)}finally{Bt(!1)}}}else r=t;return s.memoizedState=s.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},s.queue=e,e=e.dispatch=ig.bind(null,Oe,e),[s.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:function(e){e=Lo(e);var t=e.queue,i=fd.bind(null,Oe,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Oo,useDeferredValue:function(e,t){var i=zt();return jo(i,e,t)},useTransition:function(){var e=Lo(!1);return e=od.bind(null,Oe,e.queue,!0,!1),zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=Oe,r=zt();if(Ge){if(i===void 0)throw Error(p(407));i=i()}else{if(i=t(),tt===null)throw Error(p(349));(Ie&127)!==0||Hh(s,t,i)}r.memoizedState=i;var u={value:i,getSnapshot:t};return r.queue=u,Jh(Uh.bind(null,s,u,e),[e]),s.flags|=2048,Ln(9,{destroy:void 0},zh.bind(null,s,u,i,t),null),i},useId:function(){var e=zt(),t=tt.identifierPrefix;if(Ge){var i=Ti,s=Di;i=(s&~(1<<32-rt(s)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Ea++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Kp++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ho,useFormState:Xh,useActionState:Xh,useOptimistic:function(e){var t=zt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=zo.bind(null,Oe,!0,i),i.dispatch=t,[e,t]},useMemoCache:Do,useCacheRefresh:function(){return zt().memoizedState=tg.bind(null,Oe)},useEffectEvent:function(e){var t=zt(),i={impl:e};return t.memoizedState=i,function(){if((Xe&2)!==0)throw Error(p(440));return i.impl.apply(void 0,arguments)}}},Uo={readContext:Dt,use:Aa,useCallback:rd,useContext:Dt,useEffect:ko,useImperativeHandle:nd,useInsertionEffect:td,useLayoutEffect:id,useMemo:ad,useReducer:Da,useRef:Qh,useState:function(){return Da(Xi)},useDebugValue:Oo,useDeferredValue:function(e,t){var i=vt();return ld(i,Qe.memoizedState,e,t)},useTransition:function(){var e=Da(Xi)[0],t=vt().memoizedState;return[typeof e=="boolean"?e:gr(e),t]},useSyncExternalStore:Nh,useId:hd,useHostTransitionStatus:Ho,useFormState:Kh,useActionState:Kh,useOptimistic:function(e,t){var i=vt();return qh(i,Qe,e,t)},useMemoCache:Do,useCacheRefresh:dd};Uo.useEffectEvent=ed;var gd={readContext:Dt,use:Aa,useCallback:rd,useContext:Dt,useEffect:ko,useImperativeHandle:nd,useInsertionEffect:td,useLayoutEffect:id,useMemo:ad,useReducer:Mo,useRef:Qh,useState:function(){return Mo(Xi)},useDebugValue:Oo,useDeferredValue:function(e,t){var i=vt();return Qe===null?jo(i,e,t):ld(i,Qe.memoizedState,e,t)},useTransition:function(){var e=Mo(Xi)[0],t=vt().memoizedState;return[typeof e=="boolean"?e:gr(e),t]},useSyncExternalStore:Nh,useId:hd,useHostTransitionStatus:Ho,useFormState:Zh,useActionState:Zh,useOptimistic:function(e,t){var i=vt();return Qe!==null?qh(i,Qe,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Do,useCacheRefresh:dd};gd.useEffectEvent=ed;function Po(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:f({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Io={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=si(),r=ps(s);r.payload=t,i!=null&&(r.callback=i),t=gs(e,r,s),t!==null&&(Vt(t,e,s),fr(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=si(),r=ps(s);r.tag=1,r.payload=t,i!=null&&(r.callback=i),t=gs(e,r,s),t!==null&&(Vt(t,e,s),fr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=si(),s=ps(i);s.tag=2,t!=null&&(s.callback=t),t=gs(e,s,i),t!==null&&(Vt(t,e,i),fr(t,e,i))}};function vd(e,t,i,s,r,u,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,M):t.prototype&&t.prototype.isPureReactComponent?!rr(i,s)||!rr(r,u):!0}function yd(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&Io.enqueueReplaceState(t,t.state,null)}function en(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=f({},i));for(var r in e)i[r]===void 0&&(i[r]=e[r])}return i}function Sd(e){ca(e)}function bd(e){console.error(e)}function Cd(e){ca(e)}function Ba(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function wd(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function qo(e,t,i){return i=ps(i),i.tag=3,i.payload={element:null},i.callback=function(){Ba(e,t)},i}function xd(e){return e=ps(e),e.tag=3,e}function Ed(e,t,i,s){var r=i.type.getDerivedStateFromError;if(typeof r=="function"){var u=s.value;e.payload=function(){return r(u)},e.callback=function(){wd(t,i,s)}}var M=i.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(e.callback=function(){wd(t,i,s),typeof r!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var q=s.stack;this.componentDidCatch(s.value,{componentStack:q!==null?q:""})})}function sg(e,t,i,s,r){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&wn(t,i,r,!0),i=Jt.current,i!==null){switch(i.tag){case 31:case 13:return fi===null?Ga():i.alternate===null&&_t===0&&(_t=3),i.flags&=-257,i.flags|=65536,i.lanes=r,s===ya?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),fc(e,s,r)),!1;case 22:return i.flags|=65536,s===ya?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),fc(e,s,r)),!1}throw Error(p(435,i.tag))}return fc(e,s,r),Ga(),!1}if(Ge)return t=Jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,s!==ao&&(e=Error(p(422),{cause:s}),or(ci(e,i)))):(s!==ao&&(t=Error(p(423),{cause:s}),or(ci(t,i))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,s=ci(s,i),r=qo(e.stateNode,s,r),vo(e,r),_t!==4&&(_t=2)),!1;var u=Error(p(520),{cause:s});if(u=ci(u,i),Ar===null?Ar=[u]:Ar.push(u),_t!==4&&(_t=2),t===null)return!0;s=ci(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=r&-r,i.lanes|=e,e=qo(i.stateNode,s,e),vo(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(ws===null||!ws.has(u))))return i.flags|=65536,r&=-r,i.lanes|=r,r=xd(r),Ed(r,e,i,s),vo(i,r),!1}i=i.return}while(i!==null);return!1}var Fo=Error(p(461)),bt=!1;function Tt(e,t,i,s){t.child=e===null?Th(t,null,i,s):Qs(t,e.child,i,s)}function Rd(e,t,i,s,r){i=i.render;var u=t.ref;if("ref"in s){var M={};for(var q in s)q!=="ref"&&(M[q]=s[q])}else M=s;return Xs(t),s=xo(e,t,i,M,u,r),q=Eo(),e!==null&&!bt?(Ro(e,t,r),Ki(e,t,r)):(Ge&&q&&no(t),t.flags|=1,Tt(e,t,s,r),t.child)}function Ad(e,t,i,s,r){if(e===null){var u=i.type;return typeof u=="function"&&!to(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,Dd(e,t,u,s,r)):(e=fa(i.type,null,s,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Zo(e,r)){var M=u.memoizedProps;if(i=i.compare,i=i!==null?i:rr,i(M,s)&&e.ref===t.ref)return Ki(e,t,r)}return t.flags|=1,e=Fi(u,s),e.ref=t.ref,e.return=t,t.child=e}function Dd(e,t,i,s,r){if(e!==null){var u=e.memoizedProps;if(rr(u,s)&&e.ref===t.ref)if(bt=!1,t.pendingProps=s=u,Zo(e,r))(e.flags&131072)!==0&&(bt=!0);else return t.lanes=e.lanes,Ki(e,t,r)}return Go(e,t,i,s,r)}function Td(e,t,i,s){var r=s.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(s=t.child=e.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;s=r&~u}else s=0,t.child=null;return Md(e,t,u,i,s)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ga(t,u!==null?u.cachePool:null),u!==null?Bh(t,u):So(),kh(t);else return s=t.lanes=536870912,Md(e,t,u!==null?u.baseLanes|i:i,i,s)}else u!==null?(ga(t,u.cachePool),Bh(t,u),ys(),t.memoizedState=null):(e!==null&&ga(t,null),So(),ys());return Tt(e,t,r,i),t.child}function Sr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Md(e,t,i,s,r){var u=_o();return u=u===null?null:{parent:yt._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&ga(t,null),So(),kh(t),e!==null&&wn(e,t,s,!0),t.childLanes=r,null}function ka(e,t){return t=ja({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ld(e,t,i){return Qs(t,e.child,null,i),e=ka(t,t.pendingProps),e.flags|=2,ei(t),t.memoizedState=null,e}function ng(e,t,i){var s=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ge){if(s.mode==="hidden")return e=ka(t,s),t.lanes=536870912,Sr(null,e);if(Co(t),(e=st)?(e=Gf(e,di),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:hs!==null?{id:Di,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},i=_h(e),i.return=t,t.child=i,At=t,st=null)):e=null,e===null)throw fs(t);return t.lanes=536870912,null}return ka(t,s)}var u=e.memoizedState;if(u!==null){var M=u.dehydrated;if(Co(t),r)if(t.flags&256)t.flags&=-257,t=Ld(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(p(558));else if(bt||wn(e,t,i,!1),r=(i&e.childLanes)!==0,bt||r){if(s=tt,s!==null&&(M=ot(s,i),M!==0&&M!==u.retryLane))throw u.retryLane=M,Gs(e,M),Vt(s,e,M),Fo;Ga(),t=Ld(e,t,i)}else e=u.treeContext,st=_i(M.nextSibling),At=t,Ge=!0,ds=null,di=!1,e!==null&&gh(t,e),t=ka(t,s),t.flags|=4096;return t}return e=Fi(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Oa(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(p(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Go(e,t,i,s,r){return Xs(t),i=xo(e,t,i,s,void 0,r),s=Eo(),e!==null&&!bt?(Ro(e,t,r),Ki(e,t,r)):(Ge&&s&&no(t),t.flags|=1,Tt(e,t,i,r),t.child)}function Bd(e,t,i,s,r,u){return Xs(t),t.updateQueue=null,i=jh(t,s,i,r),Oh(e),s=Eo(),e!==null&&!bt?(Ro(e,t,u),Ki(e,t,u)):(Ge&&s&&no(t),t.flags|=1,Tt(e,t,i,u),t.child)}function kd(e,t,i,s,r){if(Xs(t),t.stateNode===null){var u=yn,M=i.contextType;typeof M=="object"&&M!==null&&(u=Dt(M)),u=new i(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Io,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},po(t),M=i.contextType,u.context=typeof M=="object"&&M!==null?Dt(M):yn,u.state=t.memoizedState,M=i.getDerivedStateFromProps,typeof M=="function"&&(Po(t,i,M,s),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(M=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),M!==u.state&&Io.enqueueReplaceState(u,u.state,null),mr(t,s,u,r),_r(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var q=t.memoizedProps,X=en(i,q);u.props=X;var ae=u.context,he=i.contextType;M=yn,typeof he=="object"&&he!==null&&(M=Dt(he));var fe=i.getDerivedStateFromProps;he=typeof fe=="function"||typeof u.getSnapshotBeforeUpdate=="function",q=t.pendingProps!==q,he||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(q||ae!==M)&&yd(t,u,s,M),ms=!1;var oe=t.memoizedState;u.state=oe,mr(t,s,u,r),_r(),ae=t.memoizedState,q||oe!==ae||ms?(typeof fe=="function"&&(Po(t,i,fe,s),ae=t.memoizedState),(X=ms||vd(t,i,X,s,oe,ae,M))?(he||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=ae),u.props=s,u.state=ae,u.context=M,s=X):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,go(e,t),M=t.memoizedProps,he=en(i,M),u.props=he,fe=t.pendingProps,oe=u.context,ae=i.contextType,X=yn,typeof ae=="object"&&ae!==null&&(X=Dt(ae)),q=i.getDerivedStateFromProps,(ae=typeof q=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(M!==fe||oe!==X)&&yd(t,u,s,X),ms=!1,oe=t.memoizedState,u.state=oe,mr(t,s,u,r),_r();var ce=t.memoizedState;M!==fe||oe!==ce||ms||e!==null&&e.dependencies!==null&&ma(e.dependencies)?(typeof q=="function"&&(Po(t,i,q,s),ce=t.memoizedState),(he=ms||vd(t,i,he,s,oe,ce,X)||e!==null&&e.dependencies!==null&&ma(e.dependencies))?(ae||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,ce,X),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,ce,X)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||M===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ce),u.props=s,u.state=ce,u.context=X,s=he):(typeof u.componentDidUpdate!="function"||M===e.memoizedProps&&oe===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&oe===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,Oa(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=Qs(t,e.child,null,r),t.child=Qs(t,null,i,r)):Tt(e,t,i,r),t.memoizedState=u.state,e=t.child):e=Ki(e,t,r),e}function Od(e,t,i,s){return Ys(),t.flags|=256,Tt(e,t,i,s),t.child}var Wo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:wh()}}function Vo(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=ii),e}function jd(e,t,i){var s=t.pendingProps,r=!1,u=(t.flags&128)!==0,M;if((M=u)||(M=e!==null&&e.memoizedState===null?!1:(gt.current&2)!==0),M&&(r=!0,t.flags&=-129),M=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ge){if(r?vs(t):ys(),(e=st)?(e=Gf(e,di),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:hs!==null?{id:Di,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},i=_h(e),i.return=t,t.child=i,At=t,st=null)):e=null,e===null)throw fs(t);return Tc(e)?t.lanes=32:t.lanes=536870912,null}var q=s.children;return s=s.fallback,r?(ys(),r=t.mode,q=ja({mode:"hidden",children:q},r),s=Ws(s,r,i,null),q.return=t,s.return=t,q.sibling=s,t.child=q,s=t.child,s.memoizedState=Yo(i),s.childLanes=Vo(e,M,i),t.memoizedState=Wo,Sr(null,s)):(vs(t),Xo(t,q))}var X=e.memoizedState;if(X!==null&&(q=X.dehydrated,q!==null)){if(u)t.flags&256?(vs(t),t.flags&=-257,t=Ko(e,t,i)):t.memoizedState!==null?(ys(),t.child=e.child,t.flags|=128,t=null):(ys(),q=s.fallback,r=t.mode,s=ja({mode:"visible",children:s.children},r),q=Ws(q,r,i,null),q.flags|=2,s.return=t,q.return=t,s.sibling=q,t.child=s,Qs(t,e.child,null,i),s=t.child,s.memoizedState=Yo(i),s.childLanes=Vo(e,M,i),t.memoizedState=Wo,t=Sr(null,s));else if(vs(t),Tc(q)){if(M=q.nextSibling&&q.nextSibling.dataset,M)var ae=M.dgst;M=ae,s=Error(p(419)),s.stack="",s.digest=M,or({value:s,source:null,stack:null}),t=Ko(e,t,i)}else if(bt||wn(e,t,i,!1),M=(i&e.childLanes)!==0,bt||M){if(M=tt,M!==null&&(s=ot(M,i),s!==0&&s!==X.retryLane))throw X.retryLane=s,Gs(e,s),Vt(M,e,s),Fo;Dc(q)||Ga(),t=Ko(e,t,i)}else Dc(q)?(t.flags|=192,t.child=e.child,t=null):(e=X.treeContext,st=_i(q.nextSibling),At=t,Ge=!0,ds=null,di=!1,e!==null&&gh(t,e),t=Xo(t,s.children),t.flags|=4096);return t}return r?(ys(),q=s.fallback,r=t.mode,X=e.child,ae=X.sibling,s=Fi(X,{mode:"hidden",children:s.children}),s.subtreeFlags=X.subtreeFlags&65011712,ae!==null?q=Fi(ae,q):(q=Ws(q,r,i,null),q.flags|=2),q.return=t,s.return=t,s.sibling=q,t.child=s,Sr(null,s),s=t.child,q=e.child.memoizedState,q===null?q=Yo(i):(r=q.cachePool,r!==null?(X=yt._currentValue,r=r.parent!==X?{parent:X,pool:X}:r):r=wh(),q={baseLanes:q.baseLanes|i,cachePool:r}),s.memoizedState=q,s.childLanes=Vo(e,M,i),t.memoizedState=Wo,Sr(e.child,s)):(vs(t),i=e.child,e=i.sibling,i=Fi(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(M=t.deletions,M===null?(t.deletions=[e],t.flags|=16):M.push(e)),t.child=i,t.memoizedState=null,i)}function Xo(e,t){return t=ja({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ja(e,t){return e=Qt(22,e,null,t),e.lanes=0,e}function Ko(e,t,i){return Qs(t,e.child,null,i),e=Xo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nd(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),co(e.return,t,i)}function $o(e,t,i,s,r,u){var M=e.memoizedState;M===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:r,treeForkCount:u}:(M.isBackwards=t,M.rendering=null,M.renderingStartTime=0,M.last=s,M.tail=i,M.tailMode=r,M.treeForkCount=u)}function Hd(e,t,i){var s=t.pendingProps,r=s.revealOrder,u=s.tail;s=s.children;var M=gt.current,q=(M&2)!==0;if(q?(M=M&1|2,t.flags|=128):M&=1,ee(gt,M),Tt(e,t,s,i),s=Ge?lr:0,!q&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nd(e,i,t);else if(e.tag===19)Nd(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&wa(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),$o(t,!1,r,i,u,s);break;case"backwards":case"unstable_legacy-backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&wa(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}$o(t,!0,i,null,u,s);break;case"together":$o(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ki(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Cs|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(wn(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(p(153));if(t.child!==null){for(e=t.child,i=Fi(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Fi(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Zo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ma(e)))}function rg(e,t,i){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),_s(t,yt,e.memoizedState.cache),Ys();break;case 27:case 5:ne(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:_s(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Co(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(vs(t),t.flags|=128,null):(i&t.child.childLanes)!==0?jd(e,t,i):(vs(t),e=Ki(e,t,i),e!==null?e.sibling:null);vs(t);break;case 19:var r=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(wn(e,t,i,!1),s=(i&t.childLanes)!==0),r){if(s)return Hd(e,t,i);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ee(gt,gt.current),s)break;return null;case 22:return t.lanes=0,Td(e,t,i,t.pendingProps);case 24:_s(t,yt,e.memoizedState.cache)}return Ki(e,t,i)}function zd(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)bt=!0;else{if(!Zo(e,i)&&(t.flags&128)===0)return bt=!1,rg(e,t,i);bt=(e.flags&131072)!==0}else bt=!1,Ge&&(t.flags&1048576)!==0&&ph(t,lr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=$s(t.elementType),t.type=e,typeof e=="function")to(e)?(s=en(e,s),t.tag=1,t=kd(null,t,e,s,i)):(t.tag=0,t=Go(null,t,e,s,i));else{if(e!=null){var r=e.$$typeof;if(r===S){t.tag=11,t=Rd(null,t,e,s,i);break e}else if(r===D){t.tag=14,t=Ad(null,t,e,s,i);break e}}throw t=$(e)||e,Error(p(306,t,""))}}return t;case 0:return Go(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,r=en(s,t.pendingProps),kd(e,t,s,r,i);case 3:e:{if(Q(t,t.stateNode.containerInfo),e===null)throw Error(p(387));s=t.pendingProps;var u=t.memoizedState;r=u.element,go(e,t),mr(t,s,null,i);var M=t.memoizedState;if(s=M.cache,_s(t,yt,s),s!==u.cache&&uo(t,[yt],i,!0),_r(),s=M.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:M.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Od(e,t,s,i);break e}else if(s!==r){r=ci(Error(p(424)),t),or(r),t=Od(e,t,s,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(st=_i(e.firstChild),At=t,Ge=!0,ds=null,di=!0,i=Th(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ys(),s===r){t=Ki(e,t,i);break e}Tt(e,t,s,i)}t=t.child}return t;case 26:return Oa(e,t),e===null?(i=$f(t.type,null,t.pendingProps,null))?t.memoizedState=i:Ge||(i=t.type,e=t.pendingProps,s=Za(me.current).createElement(i),s[dt]=t,s[it]=e,Mt(s,i,e),ct(s),t.stateNode=s):t.memoizedState=$f(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return ne(t),e===null&&Ge&&(s=t.stateNode=Vf(t.type,t.pendingProps,me.current),At=t,di=!0,r=st,As(t.type)?(Mc=r,st=_i(s.firstChild)):st=r),Tt(e,t,t.pendingProps.children,i),Oa(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ge&&((r=s=st)&&(s=jg(s,t.type,t.pendingProps,di),s!==null?(t.stateNode=s,At=t,st=_i(s.firstChild),di=!1,r=!0):r=!1),r||fs(t)),ne(t),r=t.type,u=t.pendingProps,M=e!==null?e.memoizedProps:null,s=u.children,Ec(r,u)?s=null:M!==null&&Ec(r,M)&&(t.flags|=32),t.memoizedState!==null&&(r=xo(e,t,$p,null,null,i),jr._currentValue=r),Oa(e,t),Tt(e,t,s,i),t.child;case 6:return e===null&&Ge&&((e=i=st)&&(i=Ng(i,t.pendingProps,di),i!==null?(t.stateNode=i,At=t,st=null,e=!0):e=!1),e||fs(t)),null;case 13:return jd(e,t,i);case 4:return Q(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Qs(t,null,s,i):Tt(e,t,s,i),t.child;case 11:return Rd(e,t,t.type,t.pendingProps,i);case 7:return Tt(e,t,t.pendingProps,i),t.child;case 8:return Tt(e,t,t.pendingProps.children,i),t.child;case 12:return Tt(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,_s(t,t.type,s.value),Tt(e,t,s.children,i),t.child;case 9:return r=t.type._context,s=t.pendingProps.children,Xs(t),r=Dt(r),s=s(r),t.flags|=1,Tt(e,t,s,i),t.child;case 14:return Ad(e,t,t.type,t.pendingProps,i);case 15:return Dd(e,t,t.type,t.pendingProps,i);case 19:return Hd(e,t,i);case 31:return ng(e,t,i);case 22:return Td(e,t,i,t.pendingProps);case 24:return Xs(t),s=Dt(yt),e===null?(r=_o(),r===null&&(r=tt,u=ho(),r.pooledCache=u,u.refCount++,u!==null&&(r.pooledCacheLanes|=i),r=u),t.memoizedState={parent:s,cache:r},po(t),_s(t,yt,r)):((e.lanes&i)!==0&&(go(e,t),mr(t,null,null,i),_r()),r=e.memoizedState,u=t.memoizedState,r.parent!==s?(r={parent:s,cache:s},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),_s(t,yt,s)):(s=u.cache,_s(t,yt,s),s!==r.cache&&uo(t,[yt],i,!0))),Tt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(p(156,t.tag))}function $i(e){e.flags|=4}function Qo(e,t,i,s,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(df())e.flags|=8192;else throw Zs=ya,mo}else e.flags&=-16777217}function Ud(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!t_(t))if(df())e.flags|=8192;else throw Zs=ya,mo}function Na(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ue():536870912,e.lanes|=t,jn|=t)}function br(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var r=e.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags&65011712,s|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)i|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function ag(e,t,i){var s=t.pendingProps;switch(ro(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Yi(yt),ie(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Cn(t)?$i(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,lo())),nt(t),null;case 26:var r=t.type,u=t.memoizedState;return e===null?($i(t),u!==null?(nt(t),Ud(t,u)):(nt(t),Qo(t,r,null,s,i))):u?u!==e.memoizedState?($i(t),nt(t),Ud(t,u)):(nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&$i(t),nt(t),Qo(t,r,e,s,i)),null;case 27:if(Re(t),i=me.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&$i(t);else{if(!s){if(t.stateNode===null)throw Error(p(166));return nt(t),null}e=Y.current,Cn(t)?vh(t):(e=Vf(r,s,i),t.stateNode=e,$i(t))}return nt(t),null;case 5:if(Re(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&$i(t);else{if(!s){if(t.stateNode===null)throw Error(p(166));return nt(t),null}if(u=Y.current,Cn(t))vh(t);else{var M=Za(me.current);switch(u){case 1:u=M.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:u=M.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":u=M.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":u=M.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":u=M.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof s.is=="string"?M.createElement("select",{is:s.is}):M.createElement("select"),s.multiple?u.multiple=!0:s.size&&(u.size=s.size);break;default:u=typeof s.is=="string"?M.createElement(r,{is:s.is}):M.createElement(r)}}u[dt]=t,u[it]=s;e:for(M=t.child;M!==null;){if(M.tag===5||M.tag===6)u.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===t)break e;for(;M.sibling===null;){if(M.return===null||M.return===t)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}t.stateNode=u;e:switch(Mt(u,r,s),r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&$i(t)}}return nt(t),Qo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&$i(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(p(166));if(e=me.current,Cn(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,r=At,r!==null)switch(r.tag){case 27:case 5:s=r.memoizedProps}e[dt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Nf(e.nodeValue,i)),e||fs(t,!0)}else e=Za(e).createTextNode(s),e[dt]=t,t.stateNode=e}return nt(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(s=Cn(t),i!==null){if(e===null){if(!s)throw Error(p(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(557));e[dt]=t}else Ys(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),e=!1}else i=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(ei(t),t):(ei(t),null);if((t.flags&128)!==0)throw Error(p(558))}return nt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Cn(t),s!==null&&s.dehydrated!==null){if(e===null){if(!r)throw Error(p(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(p(317));r[dt]=t}else Ys(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),r=!1}else r=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(ei(t),t):(ei(t),null)}return ei(t),(t.flags&128)!==0?(t.lanes=i,t):(i=s!==null,e=e!==null&&e.memoizedState!==null,i&&(s=t.child,r=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(r=s.alternate.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Na(t,t.updateQueue),nt(t),null);case 4:return ie(),e===null&&Sc(t.stateNode.containerInfo),nt(t),null;case 10:return Yi(t.type),nt(t),null;case 19:if(V(gt),s=t.memoizedState,s===null)return nt(t),null;if(r=(t.flags&128)!==0,u=s.rendering,u===null)if(r)br(s,!1);else{if(_t!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=wa(e),u!==null){for(t.flags|=128,br(s,!1),e=u.updateQueue,t.updateQueue=e,Na(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)fh(i,e),i=i.sibling;return ee(gt,gt.current&1|2),Ge&&Gi(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&Ae()>Ia&&(t.flags|=128,r=!0,br(s,!1),t.lanes=4194304)}else{if(!r)if(e=wa(u),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Na(t,e),br(s,!0),s.tail===null&&s.tailMode==="hidden"&&!u.alternate&&!Ge)return nt(t),null}else 2*Ae()-s.renderingStartTime>Ia&&i!==536870912&&(t.flags|=128,r=!0,br(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(e=s.last,e!==null?e.sibling=u:t.child=u,s.last=u)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ae(),e.sibling=null,i=gt.current,ee(gt,r?i&1|2:i&1),Ge&&Gi(t,s.treeForkCount),e):(nt(t),null);case 22:case 23:return ei(t),bo(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),i=t.updateQueue,i!==null&&Na(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&V(Ks),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Yi(yt),nt(t),null;case 25:return null;case 30:return null}throw Error(p(156,t.tag))}function lg(e,t){switch(ro(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yi(yt),ie(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Re(t),null;case 31:if(t.memoizedState!==null){if(ei(t),t.alternate===null)throw Error(p(340));Ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ei(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(p(340));Ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return V(gt),null;case 4:return ie(),null;case 10:return Yi(t.type),null;case 22:case 23:return ei(t),bo(),e!==null&&V(Ks),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Yi(yt),null;case 25:return null;default:return null}}function Pd(e,t){switch(ro(t),t.tag){case 3:Yi(yt),ie();break;case 26:case 27:case 5:Re(t);break;case 4:ie();break;case 31:t.memoizedState!==null&&ei(t);break;case 13:ei(t);break;case 19:V(gt);break;case 10:Yi(t.type);break;case 22:case 23:ei(t),bo(),e!==null&&V(Ks);break;case 24:Yi(yt)}}function Cr(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&e)===e){s=void 0;var u=i.create,M=i.inst;s=u(),M.destroy=s}i=i.next}while(i!==r)}}catch(q){Ze(t,t.return,q)}}function Ss(e,t,i){try{var s=t.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var u=r.next;s=u;do{if((s.tag&e)===e){var M=s.inst,q=M.destroy;if(q!==void 0){M.destroy=void 0,r=t;var X=i,ae=q;try{ae()}catch(he){Ze(r,X,he)}}}s=s.next}while(s!==u)}}catch(he){Ze(t,t.return,he)}}function Id(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Lh(t,i)}catch(s){Ze(e,e.return,s)}}}function qd(e,t,i){i.props=en(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){Ze(e,t,s)}}function wr(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(r){Ze(e,t,r)}}function Mi(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(r){Ze(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(r){Ze(e,t,r)}else i.current=null}function Fd(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(r){Ze(e,e.return,r)}}function Jo(e,t,i){try{var s=e.stateNode;Tg(s,e.type,i,t),s[it]=t}catch(r){Ze(e,e.return,r)}}function Gd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&As(e.type)||e.tag===4}function ec(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&As(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ii));else if(s!==4&&(s===27&&As(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(tc(e,t,i),e=e.sibling;e!==null;)tc(e,t,i),e=e.sibling}function Ha(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&As(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Ha(e,t,i),e=e.sibling;e!==null;)Ha(e,t,i),e=e.sibling}function Wd(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Mt(t,s,i),t[dt]=e,t[it]=i}catch(u){Ze(e,e.return,u)}}var Zi=!1,Ct=!1,ic=!1,Yd=typeof WeakSet=="function"?WeakSet:Set,Et=null;function og(e,t){if(e=e.containerInfo,wc=nl,e=nh(e),Xl(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var r=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var M=0,q=-1,X=-1,ae=0,he=0,fe=e,oe=null;t:for(;;){for(var ce;fe!==i||r!==0&&fe.nodeType!==3||(q=M+r),fe!==u||s!==0&&fe.nodeType!==3||(X=M+s),fe.nodeType===3&&(M+=fe.nodeValue.length),(ce=fe.firstChild)!==null;)oe=fe,fe=ce;for(;;){if(fe===e)break t;if(oe===i&&++ae===r&&(q=M),oe===u&&++he===s&&(X=M),(ce=fe.nextSibling)!==null)break;fe=oe,oe=fe.parentNode}fe=ce}i=q===-1||X===-1?null:{start:q,end:X}}else i=null}i=i||{start:0,end:0}}else i=null;for(xc={focusedElem:e,selectionRange:i},nl=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){switch(t=Et,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)r=e[i],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,r=u.memoizedProps,u=u.memoizedState,s=i.stateNode;try{var xe=en(i.type,r);e=s.getSnapshotBeforeUpdate(xe,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(Me){Ze(i,i.return,Me)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Ac(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ac(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(p(163))}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}}function Vd(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Ji(e,i),s&4&&Cr(5,i);break;case 1:if(Ji(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(M){Ze(i,i.return,M)}else{var r=en(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(M){Ze(i,i.return,M)}}s&64&&Id(i),s&512&&wr(i,i.return);break;case 3:if(Ji(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Lh(e,t)}catch(M){Ze(i,i.return,M)}}break;case 27:t===null&&s&4&&Wd(i);case 26:case 5:Ji(e,i),t===null&&s&4&&Fd(i),s&512&&wr(i,i.return);break;case 12:Ji(e,i);break;case 31:Ji(e,i),s&4&&$d(e,i);break;case 13:Ji(e,i),s&4&&Zd(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=gg.bind(null,i),Hg(e,i))));break;case 22:if(s=i.memoizedState!==null||Zi,!s){t=t!==null&&t.memoizedState!==null||Ct,r=Zi;var u=Ct;Zi=s,(Ct=t)&&!u?es(e,i,(i.subtreeFlags&8772)!==0):Ji(e,i),Zi=r,Ct=u}break;case 30:break;default:Ji(e,i)}}function Xd(e){var t=e.alternate;t!==null&&(e.alternate=null,Xd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ps(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var at=null,Ft=!1;function Qi(e,t,i){for(i=i.child;i!==null;)Kd(e,t,i),i=i.sibling}function Kd(e,t,i){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(It,i)}catch{}switch(i.tag){case 26:Ct||Mi(i,t),Qi(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ct||Mi(i,t);var s=at,r=Ft;As(i.type)&&(at=i.stateNode,Ft=!1),Qi(e,t,i),Br(i.stateNode),at=s,Ft=r;break;case 5:Ct||Mi(i,t);case 6:if(s=at,r=Ft,at=null,Qi(e,t,i),at=s,Ft=r,at!==null)if(Ft)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(i.stateNode)}catch(u){Ze(i,t,u)}else try{at.removeChild(i.stateNode)}catch(u){Ze(i,t,u)}break;case 18:at!==null&&(Ft?(e=at,qf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Fn(e)):qf(at,i.stateNode));break;case 4:s=at,r=Ft,at=i.stateNode.containerInfo,Ft=!0,Qi(e,t,i),at=s,Ft=r;break;case 0:case 11:case 14:case 15:Ss(2,i,t),Ct||Ss(4,i,t),Qi(e,t,i);break;case 1:Ct||(Mi(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&qd(i,t,s)),Qi(e,t,i);break;case 21:Qi(e,t,i);break;case 22:Ct=(s=Ct)||i.memoizedState!==null,Qi(e,t,i),Ct=s;break;default:Qi(e,t,i)}}function $d(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Fn(e)}catch(i){Ze(t,t.return,i)}}}function Zd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fn(e)}catch(i){Ze(t,t.return,i)}}function cg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yd),t;default:throw Error(p(435,e.tag))}}function za(e,t){var i=cg(e);t.forEach(function(s){if(!i.has(s)){i.add(s);var r=vg.bind(null,e,s);s.then(r,r)}})}function Gt(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var r=i[s],u=e,M=t,q=M;e:for(;q!==null;){switch(q.tag){case 27:if(As(q.type)){at=q.stateNode,Ft=!1;break e}break;case 5:at=q.stateNode,Ft=!1;break e;case 3:case 4:at=q.stateNode.containerInfo,Ft=!0;break e}q=q.return}if(at===null)throw Error(p(160));Kd(u,M,r),at=null,Ft=!1,u=r.alternate,u!==null&&(u.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Qd(t,e),t=t.sibling}var wi=null;function Qd(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Gt(t,e),Wt(e),s&4&&(Ss(3,e,e.return),Cr(3,e),Ss(5,e,e.return));break;case 1:Gt(t,e),Wt(e),s&512&&(Ct||i===null||Mi(i,i.return)),s&64&&Zi&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var r=wi;if(Gt(t,e),Wt(e),s&512&&(Ct||i===null||Mi(i,i.return)),s&4){var u=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,r=r.ownerDocument||r;t:switch(s){case"title":u=r.getElementsByTagName("title")[0],(!u||u[zi]||u[dt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=r.createElement(s),r.head.insertBefore(u,r.querySelector("head > title"))),Mt(u,s,i),u[dt]=e,ct(u),s=u;break e;case"link":var M=Jf("link","href",r).get(s+(i.href||""));if(M){for(var q=0;q<M.length;q++)if(u=M[q],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){M.splice(q,1);break t}}u=r.createElement(s),Mt(u,s,i),r.head.appendChild(u);break;case"meta":if(M=Jf("meta","content",r).get(s+(i.content||""))){for(q=0;q<M.length;q++)if(u=M[q],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){M.splice(q,1);break t}}u=r.createElement(s),Mt(u,s,i),r.head.appendChild(u);break;default:throw Error(p(468,s))}u[dt]=e,ct(u),s=u}e.stateNode=s}else e_(r,e.type,e.stateNode);else e.stateNode=Qf(r,s,e.memoizedProps);else u!==s?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,s===null?e_(r,e.type,e.stateNode):Qf(r,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Jo(e,e.memoizedProps,i.memoizedProps)}break;case 27:Gt(t,e),Wt(e),s&512&&(Ct||i===null||Mi(i,i.return)),i!==null&&s&4&&Jo(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Gt(t,e),Wt(e),s&512&&(Ct||i===null||Mi(i,i.return)),e.flags&32){r=e.stateNode;try{dn(r,"")}catch(xe){Ze(e,e.return,xe)}}s&4&&e.stateNode!=null&&(r=e.memoizedProps,Jo(e,r,i!==null?i.memoizedProps:r)),s&1024&&(ic=!0);break;case 6:if(Gt(t,e),Wt(e),s&4){if(e.stateNode===null)throw Error(p(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(xe){Ze(e,e.return,xe)}}break;case 3:if(el=null,r=wi,wi=Qa(t.containerInfo),Gt(t,e),wi=r,Wt(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Fn(t.containerInfo)}catch(xe){Ze(e,e.return,xe)}ic&&(ic=!1,Jd(e));break;case 4:s=wi,wi=Qa(e.stateNode.containerInfo),Gt(t,e),Wt(e),wi=s;break;case 12:Gt(t,e),Wt(e);break;case 31:Gt(t,e),Wt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,za(e,s)));break;case 13:Gt(t,e),Wt(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Pa=Ae()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,za(e,s)));break;case 22:r=e.memoizedState!==null;var X=i!==null&&i.memoizedState!==null,ae=Zi,he=Ct;if(Zi=ae||r,Ct=he||X,Gt(t,e),Ct=he,Zi=ae,Wt(e),s&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(i===null||X||Zi||Ct||tn(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){X=i=t;try{if(u=X.stateNode,r)M=u.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{q=X.stateNode;var fe=X.memoizedProps.style,oe=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;q.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(xe){Ze(X,X.return,xe)}}}else if(t.tag===6){if(i===null){X=t;try{X.stateNode.nodeValue=r?"":X.memoizedProps}catch(xe){Ze(X,X.return,xe)}}}else if(t.tag===18){if(i===null){X=t;try{var ce=X.stateNode;r?Ff(ce,!0):Ff(X.stateNode,!1)}catch(xe){Ze(X,X.return,xe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,za(e,i))));break;case 19:Gt(t,e),Wt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,za(e,s)));break;case 30:break;case 21:break;default:Gt(t,e),Wt(e)}}function Wt(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(Gd(s)){i=s;break}s=s.return}if(i==null)throw Error(p(160));switch(i.tag){case 27:var r=i.stateNode,u=ec(e);Ha(e,u,r);break;case 5:var M=i.stateNode;i.flags&32&&(dn(M,""),i.flags&=-33);var q=ec(e);Ha(e,q,M);break;case 3:case 4:var X=i.stateNode.containerInfo,ae=ec(e);tc(e,ae,X);break;default:throw Error(p(161))}}catch(he){Ze(e,e.return,he)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ji(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Vd(e,t.alternate,t),t=t.sibling}function tn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ss(4,t,t.return),tn(t);break;case 1:Mi(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&qd(t,t.return,i),tn(t);break;case 27:Br(t.stateNode);case 26:case 5:Mi(t,t.return),tn(t);break;case 22:t.memoizedState===null&&tn(t);break;case 30:tn(t);break;default:tn(t)}e=e.sibling}}function es(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,r=e,u=t,M=u.flags;switch(u.tag){case 0:case 11:case 15:es(r,u,i),Cr(4,u);break;case 1:if(es(r,u,i),s=u,r=s.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(ae){Ze(s,s.return,ae)}if(s=u,r=s.updateQueue,r!==null){var q=s.stateNode;try{var X=r.shared.hiddenCallbacks;if(X!==null)for(r.shared.hiddenCallbacks=null,r=0;r<X.length;r++)Mh(X[r],q)}catch(ae){Ze(s,s.return,ae)}}i&&M&64&&Id(u),wr(u,u.return);break;case 27:Wd(u);case 26:case 5:es(r,u,i),i&&s===null&&M&4&&Fd(u),wr(u,u.return);break;case 12:es(r,u,i);break;case 31:es(r,u,i),i&&M&4&&$d(r,u);break;case 13:es(r,u,i),i&&M&4&&Zd(r,u);break;case 22:u.memoizedState===null&&es(r,u,i),wr(u,u.return);break;case 30:break;default:es(r,u,i)}t=t.sibling}}function sc(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&cr(i))}function nc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cr(e))}function xi(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ef(e,t,i,s),t=t.sibling}function ef(e,t,i,s){var r=t.flags;switch(t.tag){case 0:case 11:case 15:xi(e,t,i,s),r&2048&&Cr(9,t);break;case 1:xi(e,t,i,s);break;case 3:xi(e,t,i,s),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&cr(e)));break;case 12:if(r&2048){xi(e,t,i,s),e=t.stateNode;try{var u=t.memoizedProps,M=u.id,q=u.onPostCommit;typeof q=="function"&&q(M,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(X){Ze(t,t.return,X)}}else xi(e,t,i,s);break;case 31:xi(e,t,i,s);break;case 13:xi(e,t,i,s);break;case 23:break;case 22:u=t.stateNode,M=t.alternate,t.memoizedState!==null?u._visibility&2?xi(e,t,i,s):xr(e,t):u._visibility&2?xi(e,t,i,s):(u._visibility|=2,Bn(e,t,i,s,(t.subtreeFlags&10256)!==0||!1)),r&2048&&sc(M,t);break;case 24:xi(e,t,i,s),r&2048&&nc(t.alternate,t);break;default:xi(e,t,i,s)}}function Bn(e,t,i,s,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,M=t,q=i,X=s,ae=M.flags;switch(M.tag){case 0:case 11:case 15:Bn(u,M,q,X,r),Cr(8,M);break;case 23:break;case 22:var he=M.stateNode;M.memoizedState!==null?he._visibility&2?Bn(u,M,q,X,r):xr(u,M):(he._visibility|=2,Bn(u,M,q,X,r)),r&&ae&2048&&sc(M.alternate,M);break;case 24:Bn(u,M,q,X,r),r&&ae&2048&&nc(M.alternate,M);break;default:Bn(u,M,q,X,r)}t=t.sibling}}function xr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,r=s.flags;switch(s.tag){case 22:xr(i,s),r&2048&&sc(s.alternate,s);break;case 24:xr(i,s),r&2048&&nc(s.alternate,s);break;default:xr(i,s)}t=t.sibling}}var Er=8192;function kn(e,t,i){if(e.subtreeFlags&Er)for(e=e.child;e!==null;)tf(e,t,i),e=e.sibling}function tf(e,t,i){switch(e.tag){case 26:kn(e,t,i),e.flags&Er&&e.memoizedState!==null&&Kg(i,wi,e.memoizedState,e.memoizedProps);break;case 5:kn(e,t,i);break;case 3:case 4:var s=wi;wi=Qa(e.stateNode.containerInfo),kn(e,t,i),wi=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Er,Er=16777216,kn(e,t,i),Er=s):kn(e,t,i));break;default:kn(e,t,i)}}function sf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Rr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];Et=s,rf(s,e)}sf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nf(e),e=e.sibling}function nf(e){switch(e.tag){case 0:case 11:case 15:Rr(e),e.flags&2048&&Ss(9,e,e.return);break;case 3:Rr(e);break;case 12:Rr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ua(e)):Rr(e);break;default:Rr(e)}}function Ua(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];Et=s,rf(s,e)}sf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ss(8,t,t.return),Ua(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Ua(t));break;default:Ua(t)}e=e.sibling}}function rf(e,t){for(;Et!==null;){var i=Et;switch(i.tag){case 0:case 11:case 15:Ss(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:cr(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Et=s;else e:for(i=e;Et!==null;){s=Et;var r=s.sibling,u=s.return;if(Xd(s),s===i){Et=null;break e}if(r!==null){r.return=u,Et=r;break e}Et=u}}}var ug={getCacheForType:function(e){var t=Dt(yt),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return Dt(yt).controller.signal}},hg=typeof WeakMap=="function"?WeakMap:Map,Xe=0,tt=null,ze=null,Ie=0,$e=0,ti=null,bs=!1,On=!1,rc=!1,ts=0,_t=0,Cs=0,sn=0,ac=0,ii=0,jn=0,Ar=null,Yt=null,lc=!1,Pa=0,af=0,Ia=1/0,qa=null,ws=null,xt=0,xs=null,Nn=null,is=0,oc=0,cc=null,lf=null,Dr=0,uc=null;function si(){return(Xe&2)!==0&&Ie!==0?Ie&-Ie:G.T!==null?pc():ln()}function of(){if(ii===0)if((Ie&536870912)===0||Ge){var e=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),ii=e}else ii=536870912;return e=Jt.current,e!==null&&(e.flags|=32),ii}function Vt(e,t,i){(e===tt&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(Hn(e,0),Es(e,Ie,ii,!1)),we(e,i),((Xe&2)===0||e!==tt)&&(e===tt&&((Xe&2)===0&&(sn|=i),_t===4&&Es(e,Ie,ii,!1)),Li(e))}function cf(e,t,i){if((Xe&6)!==0)throw Error(p(327));var s=!i&&(t&127)===0&&(t&e.expiredLanes)===0||pe(e,t),r=s?_g(e,t):dc(e,t,!0),u=s;do{if(r===0){On&&!s&&Es(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!dg(i)){r=dc(e,t,!1),u=!1;continue}if(r===2){if(u=t,e.errorRecoveryDisabledLanes&u)var M=0;else M=e.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){t=M;e:{var q=e;r=Ar;var X=q.current.memoizedState.isDehydrated;if(X&&(Hn(q,M).flags|=256),M=dc(q,M,!1),M!==2){if(rc&&!X){q.errorRecoveryDisabledLanes|=u,sn|=u,r=4;break e}u=Yt,Yt=r,u!==null&&(Yt===null?Yt=u:Yt.push.apply(Yt,u))}r=M}if(u=!1,r!==2)continue}}if(r===1){Hn(e,0),Es(e,t,0,!0);break}e:{switch(s=e,u=r,u){case 0:case 1:throw Error(p(345));case 4:if((t&4194048)!==t)break;case 6:Es(s,t,ii,!bs);break e;case 2:Yt=null;break;case 3:case 5:break;default:throw Error(p(329))}if((t&62914560)===t&&(r=Pa+300-Ae(),10<r)){if(Es(s,t,ii,!bs),yi(s,0,!0)!==0)break e;is=t,s.timeoutHandle=Pf(uf.bind(null,s,i,Yt,qa,lc,t,ii,sn,jn,bs,u,"Throttled",-0,0),r);break e}uf(s,i,Yt,qa,lc,t,ii,sn,jn,bs,u,null,-0,0)}}break}while(!0);Li(e)}function uf(e,t,i,s,r,u,M,q,X,ae,he,fe,oe,ce){if(e.timeoutHandle=-1,fe=t.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ii},tf(t,u,fe);var xe=(u&62914560)===u?Pa-Ae():(u&4194048)===u?af-Ae():0;if(xe=$g(fe,xe),xe!==null){is=u,e.cancelPendingCommit=xe(vf.bind(null,e,t,u,i,s,r,M,q,X,he,fe,null,oe,ce)),Es(e,u,M,!ae);return}}vf(e,t,u,i,s,r,M,q,X)}function dg(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var r=i[s],u=r.getSnapshot;r=r.value;try{if(!Zt(u(),r))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Es(e,t,i,s){t&=~ac,t&=~sn,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var r=t;0<r;){var u=31-rt(r),M=1<<u;s[u]=-1,r&=~M}i!==0&&be(e,i,t)}function Fa(){return(Xe&6)===0?(Tr(0),!1):!0}function hc(){if(ze!==null){if($e===0)var e=ze.return;else e=ze,Wi=Vs=null,Ao(e),An=null,hr=0,e=ze;for(;e!==null;)Pd(e.alternate,e),e=e.return;ze=null}}function Hn(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Bg(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),is=0,hc(),tt=e,ze=i=Fi(e.current,null),Ie=t,$e=0,ti=null,bs=!1,On=pe(e,t),rc=!1,jn=ii=ac=sn=Cs=_t=0,Yt=Ar=null,lc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var r=31-rt(s),u=1<<r;t|=e[r],s&=~u}return ts=t,ua(),i}function hf(e,t){Oe=null,G.H=yr,t===Rn||t===va?(t=Rh(),$e=3):t===mo?(t=Rh(),$e=4):$e=t===Fo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ti=t,ze===null&&(_t=1,Ba(e,ci(t,e.current)))}function df(){var e=Jt.current;return e===null?!0:(Ie&4194048)===Ie?fi===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?e===fi:!1}function ff(){var e=G.H;return G.H=yr,e===null?yr:e}function _f(){var e=G.A;return G.A=ug,e}function Ga(){_t=4,bs||(Ie&4194048)!==Ie&&Jt.current!==null||(On=!0),(Cs&134217727)===0&&(sn&134217727)===0||tt===null||Es(tt,Ie,ii,!1)}function dc(e,t,i){var s=Xe;Xe|=2;var r=ff(),u=_f();(tt!==e||Ie!==t)&&(qa=null,Hn(e,t)),t=!1;var M=_t;e:do try{if($e!==0&&ze!==null){var q=ze,X=ti;switch($e){case 8:hc(),M=6;break e;case 3:case 2:case 9:case 6:Jt.current===null&&(t=!0);var ae=$e;if($e=0,ti=null,zn(e,q,X,ae),i&&On){M=0;break e}break;default:ae=$e,$e=0,ti=null,zn(e,q,X,ae)}}fg(),M=_t;break}catch(he){hf(e,he)}while(!0);return t&&e.shellSuspendCounter++,Wi=Vs=null,Xe=s,G.H=r,G.A=u,ze===null&&(tt=null,Ie=0,ua()),M}function fg(){for(;ze!==null;)mf(ze)}function _g(e,t){var i=Xe;Xe|=2;var s=ff(),r=_f();tt!==e||Ie!==t?(qa=null,Ia=Ae()+500,Hn(e,t)):On=pe(e,t);e:do try{if($e!==0&&ze!==null){t=ze;var u=ti;t:switch($e){case 1:$e=0,ti=null,zn(e,t,u,1);break;case 2:case 9:if(xh(u)){$e=0,ti=null,pf(t);break}t=function(){$e!==2&&$e!==9||tt!==e||($e=7),Li(e)},u.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:xh(u)?($e=0,ti=null,pf(t)):($e=0,ti=null,zn(e,t,u,7));break;case 5:var M=null;switch(ze.tag){case 26:M=ze.memoizedState;case 5:case 27:var q=ze;if(M?t_(M):q.stateNode.complete){$e=0,ti=null;var X=q.sibling;if(X!==null)ze=X;else{var ae=q.return;ae!==null?(ze=ae,Wa(ae)):ze=null}break t}}$e=0,ti=null,zn(e,t,u,5);break;case 6:$e=0,ti=null,zn(e,t,u,6);break;case 8:hc(),_t=6;break e;default:throw Error(p(462))}}mg();break}catch(he){hf(e,he)}while(!0);return Wi=Vs=null,G.H=s,G.A=r,Xe=i,ze!==null?0:(tt=null,Ie=0,ua(),_t)}function mg(){for(;ze!==null&&!jt();)mf(ze)}function mf(e){var t=zd(e.alternate,e,ts);e.memoizedProps=e.pendingProps,t===null?Wa(e):ze=t}function pf(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Bd(i,t,t.pendingProps,t.type,void 0,Ie);break;case 11:t=Bd(i,t,t.pendingProps,t.type.render,t.ref,Ie);break;case 5:Ao(t);default:Pd(i,t),t=ze=fh(t,ts),t=zd(i,t,ts)}e.memoizedProps=e.pendingProps,t===null?Wa(e):ze=t}function zn(e,t,i,s){Wi=Vs=null,Ao(t),An=null,hr=0;var r=t.return;try{if(sg(e,r,t,i,Ie)){_t=1,Ba(e,ci(i,e.current)),ze=null;return}}catch(u){if(r!==null)throw ze=r,u;_t=1,Ba(e,ci(i,e.current)),ze=null;return}t.flags&32768?(Ge||s===1?e=!0:On||(Ie&536870912)!==0?e=!1:(bs=e=!0,(s===2||s===9||s===3||s===6)&&(s=Jt.current,s!==null&&s.tag===13&&(s.flags|=16384))),gf(t,e)):Wa(t)}function Wa(e){var t=e;do{if((t.flags&32768)!==0){gf(t,bs);return}e=t.return;var i=ag(t.alternate,t,ts);if(i!==null){ze=i;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);_t===0&&(_t=5)}function gf(e,t){do{var i=lg(e.alternate,e);if(i!==null){i.flags&=32767,ze=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ze=e;return}ze=e=i}while(e!==null);_t=6,ze=null}function vf(e,t,i,s,r,u,M,q,X){e.cancelPendingCommit=null;do Ya();while(xt!==0);if((Xe&6)!==0)throw Error(p(327));if(t!==null){if(t===e.current)throw Error(p(177));if(u=t.lanes|t.childLanes,u|=Jl,ye(e,i,u,M,q,X),e===tt&&(ze=tt=null,Ie=0),Nn=t,xs=e,is=i,oc=u,cc=r,lf=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yg(ht,function(){return wf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=G.T,G.T=null,r=K.p,K.p=2,M=Xe,Xe|=4;try{og(e,t,i)}finally{Xe=M,K.p=r,G.T=s}}xt=1,yf(),Sf(),bf()}}function yf(){if(xt===1){xt=0;var e=xs,t=Nn,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=G.T,G.T=null;var s=K.p;K.p=2;var r=Xe;Xe|=4;try{Qd(t,e);var u=xc,M=nh(e.containerInfo),q=u.focusedElem,X=u.selectionRange;if(M!==q&&q&&q.ownerDocument&&sh(q.ownerDocument.documentElement,q)){if(X!==null&&Xl(q)){var ae=X.start,he=X.end;if(he===void 0&&(he=ae),"selectionStart"in q)q.selectionStart=ae,q.selectionEnd=Math.min(he,q.value.length);else{var fe=q.ownerDocument||document,oe=fe&&fe.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),xe=q.textContent.length,Me=Math.min(X.start,xe),et=X.end===void 0?Me:Math.min(X.end,xe);!ce.extend&&Me>et&&(M=et,et=Me,Me=M);var J=ih(q,Me),Z=ih(q,et);if(J&&Z&&(ce.rangeCount!==1||ce.anchorNode!==J.node||ce.anchorOffset!==J.offset||ce.focusNode!==Z.node||ce.focusOffset!==Z.offset)){var re=fe.createRange();re.setStart(J.node,J.offset),ce.removeAllRanges(),Me>et?(ce.addRange(re),ce.extend(Z.node,Z.offset)):(re.setEnd(Z.node,Z.offset),ce.addRange(re))}}}}for(fe=[],ce=q;ce=ce.parentNode;)ce.nodeType===1&&fe.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<fe.length;q++){var de=fe[q];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}nl=!!wc,xc=wc=null}finally{Xe=r,K.p=s,G.T=i}}e.current=t,xt=2}}function Sf(){if(xt===2){xt=0;var e=xs,t=Nn,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=G.T,G.T=null;var s=K.p;K.p=2;var r=Xe;Xe|=4;try{Vd(e,t.alternate,t)}finally{Xe=r,K.p=s,G.T=i}}xt=3}}function bf(){if(xt===4||xt===3){xt=0,lt();var e=xs,t=Nn,i=is,s=lf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?xt=5:(xt=0,Nn=xs=null,Cf(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(ws=null),Hs(i),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(It,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=G.T,r=K.p,K.p=2,G.T=null;try{for(var u=e.onRecoverableError,M=0;M<s.length;M++){var q=s[M];u(q.value,{componentStack:q.stack})}}finally{G.T=t,K.p=r}}(is&3)!==0&&Ya(),Li(e),r=e.pendingLanes,(i&261930)!==0&&(r&42)!==0?e===uc?Dr++:(Dr=0,uc=e):Dr=0,Tr(0)}}function Cf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,cr(t)))}function Ya(){return yf(),Sf(),bf(),wf()}function wf(){if(xt!==5)return!1;var e=xs,t=oc;oc=0;var i=Hs(is),s=G.T,r=K.p;try{K.p=32>i?32:i,G.T=null,i=cc,cc=null;var u=xs,M=is;if(xt=0,Nn=xs=null,is=0,(Xe&6)!==0)throw Error(p(331));var q=Xe;if(Xe|=4,nf(u.current),ef(u,u.current,M,i),Xe=q,Tr(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(It,u)}catch{}return!0}finally{K.p=r,G.T=s,Cf(e,t)}}function xf(e,t,i){t=ci(i,t),t=qo(e.stateNode,t,2),e=gs(e,t,2),e!==null&&(we(e,2),Li(e))}function Ze(e,t,i){if(e.tag===3)xf(e,e,i);else for(;t!==null;){if(t.tag===3){xf(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ws===null||!ws.has(s))){e=ci(i,e),i=xd(2),s=gs(t,i,2),s!==null&&(Ed(i,s,t,e),we(s,2),Li(s));break}}t=t.return}}function fc(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new hg;var r=new Set;s.set(t,r)}else r=s.get(t),r===void 0&&(r=new Set,s.set(t,r));r.has(i)||(rc=!0,r.add(i),e=pg.bind(null,e,t,i),t.then(e,e))}function pg(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,tt===e&&(Ie&i)===i&&(_t===4||_t===3&&(Ie&62914560)===Ie&&300>Ae()-Pa?(Xe&2)===0&&Hn(e,0):ac|=i,jn===Ie&&(jn=0)),Li(e)}function Ef(e,t){t===0&&(t=ue()),e=Gs(e,t),e!==null&&(we(e,t),Li(e))}function gg(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Ef(e,i)}function vg(e,t){var i=0;switch(e.tag){case 31:case 13:var s=e.stateNode,r=e.memoizedState;r!==null&&(i=r.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(p(314))}s!==null&&s.delete(t),Ef(e,i)}function yg(e,t){return Kt(e,t)}var Va=null,Un=null,_c=!1,Xa=!1,mc=!1,Rs=0;function Li(e){e!==Un&&e.next===null&&(Un===null?Va=Un=e:Un=Un.next=e),Xa=!0,_c||(_c=!0,bg())}function Tr(e,t){if(!mc&&Xa){mc=!0;do for(var i=!1,s=Va;s!==null;){if(e!==0){var r=s.pendingLanes;if(r===0)var u=0;else{var M=s.suspendedLanes,q=s.pingedLanes;u=(1<<31-rt(42|e)+1)-1,u&=r&~(M&~q),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,Tf(s,u))}else u=Ie,u=yi(s,s===tt?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||pe(s,u)||(i=!0,Tf(s,u));s=s.next}while(i);mc=!1}}function Sg(){Rf()}function Rf(){Xa=_c=!1;var e=0;Rs!==0&&Lg()&&(e=Rs);for(var t=Ae(),i=null,s=Va;s!==null;){var r=s.next,u=Af(s,t);u===0?(s.next=null,i===null?Va=r:i.next=r,r===null&&(Un=i)):(i=s,(e!==0||(u&3)!==0)&&(Xa=!0)),s=r}xt!==0&&xt!==5||Tr(e),Rs!==0&&(Rs=0)}function Af(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var M=31-rt(u),q=1<<M,X=r[M];X===-1?((q&i)===0||(q&s)!==0)&&(r[M]=le(q,t)):X<=t&&(e.expiredLanes|=q),u&=~q}if(t=tt,i=Ie,i=yi(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Lt(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||pe(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&Lt(s),Hs(i)){case 2:case 8:i=Ke;break;case 32:i=ht;break;case 268435456:i=wt;break;default:i=ht}return s=Df.bind(null,e),i=Kt(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&Lt(s),e.callbackPriority=2,e.callbackNode=null,2}function Df(e,t){if(xt!==0&&xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ya()&&e.callbackNode!==i)return null;var s=Ie;return s=yi(e,e===tt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(cf(e,s,t),Af(e,Ae()),e.callbackNode!=null&&e.callbackNode===i?Df.bind(null,e):null)}function Tf(e,t){if(Ya())return null;cf(e,t,!0)}function bg(){kg(function(){(Xe&6)!==0?Kt(mt,Sg):Rf()})}function pc(){if(Rs===0){var e=xn;e===0&&(e=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Rs=e}return Rs}function Mf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ia(""+e)}function Lf(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Cg(e,t,i,s,r){if(t==="submit"&&i&&i.stateNode===r){var u=Mf((r[it]||null).action),M=s.submitter;M&&(t=(t=M[it]||null)?Mf(t.formAction):M.getAttribute("formAction"),t!==null&&(u=t,M=null));var q=new aa("action","action",null,s,r);e.push({event:q,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Rs!==0){var X=M?Lf(r,M):new FormData(r);No(i,{pending:!0,data:X,method:r.method,action:u},null,X)}}else typeof u=="function"&&(q.preventDefault(),X=M?Lf(r,M):new FormData(r),No(i,{pending:!0,data:X,method:r.method,action:u},u,X))},currentTarget:r}]})}}for(var gc=0;gc<Ql.length;gc++){var vc=Ql[gc],wg=vc.toLowerCase(),xg=vc[0].toUpperCase()+vc.slice(1);Ci(wg,"on"+xg)}Ci(lh,"onAnimationEnd"),Ci(oh,"onAnimationIteration"),Ci(ch,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Pp,"onTransitionRun"),Ci(Ip,"onTransitionStart"),Ci(qp,"onTransitionCancel"),Ci(uh,"onTransitionEnd"),cs("onMouseEnter",["mouseout","mouseover"]),cs("onMouseLeave",["mouseout","mouseover"]),cs("onPointerEnter",["pointerout","pointerover"]),cs("onPointerLeave",["pointerout","pointerover"]),bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bi("onBeforeInput",["compositionend","keypress","textInput","paste"]),bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mr));function Bf(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],r=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var M=s.length-1;0<=M;M--){var q=s[M],X=q.instance,ae=q.currentTarget;if(q=q.listener,X!==u&&r.isPropagationStopped())break e;u=q,r.currentTarget=ae;try{u(r)}catch(he){ca(he)}r.currentTarget=null,u=X}else for(M=0;M<s.length;M++){if(q=s[M],X=q.instance,ae=q.currentTarget,q=q.listener,X!==u&&r.isPropagationStopped())break e;u=q,r.currentTarget=ae;try{u(r)}catch(he){ca(he)}r.currentTarget=null,u=X}}}}function Ue(e,t){var i=t[zs];i===void 0&&(i=t[zs]=new Set);var s=e+"__bubble";i.has(s)||(kf(t,e,2,!1),i.add(s))}function yc(e,t,i){var s=0;t&&(s|=4),kf(i,e,s,t)}var Ka="_reactListening"+Math.random().toString(36).slice(2);function Sc(e){if(!e[Ka]){e[Ka]=!0,Zn.forEach(function(i){i!=="selectionchange"&&(Eg.has(i)||yc(i,!1,e),yc(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ka]||(t[Ka]=!0,yc("selectionchange",!1,t))}}function kf(e,t,i,s){switch(o_(t)){case 2:var r=Jg;break;case 8:r=ev;break;default:r=jc}i=r.bind(null,t,i,e),r=void 0,!Ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),s?r!==void 0?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):r!==void 0?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function bc(e,t,i,s,r){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var M=s.tag;if(M===3||M===4){var q=s.stateNode.containerInfo;if(q===r)break;if(M===4)for(M=s.return;M!==null;){var X=M.tag;if((X===3||X===4)&&M.stateNode.containerInfo===r)return;M=M.return}for(;q!==null;){if(M=ge(q),M===null)return;if(X=M.tag,X===5||X===6||X===26||X===27){s=u=M;continue e}q=q.parentNode}}s=s.return}Hu(function(){var ae=u,he=Hl(i),fe=[];e:{var oe=hh.get(e);if(oe!==void 0){var ce=aa,xe=e;switch(e){case"keypress":if(na(i)===0)break e;case"keydown":case"keyup":ce=vp;break;case"focusin":xe="focus",ce=Fl;break;case"focusout":xe="blur",ce=Fl;break;case"beforeblur":case"afterblur":ce=Fl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Pu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=bp;break;case lh:case oh:case ch:ce=cp;break;case uh:ce=wp;break;case"scroll":case"scrollend":ce=np;break;case"wheel":ce=Ep;break;case"copy":case"cut":case"paste":ce=hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=qu;break;case"toggle":case"beforetoggle":ce=Ap}var Me=(t&4)!==0,et=!Me&&(e==="scroll"||e==="scrollend"),J=Me?oe!==null?oe+"Capture":null:oe;Me=[];for(var Z=ae,re;Z!==null;){var de=Z;if(re=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||re===null||J===null||(de=Qn(Z,J),de!=null&&Me.push(Lr(Z,de,re))),et)break;Z=Z.return}0<Me.length&&(oe=new ce(oe,xe,null,i,he),fe.push({event:oe,listeners:Me}))}}if((t&7)===0){e:{if(oe=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",oe&&i!==Nl&&(xe=i.relatedTarget||i.fromElement)&&(ge(xe)||xe[Ai]))break e;if((ce||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(xe=i.relatedTarget||i.toElement,ce=ae,xe=xe?ge(xe):null,xe!==null&&(et=H(xe),Me=xe.tag,xe!==et||Me!==5&&Me!==27&&Me!==6)&&(xe=null)):(ce=null,xe=ae),ce!==xe)){if(Me=Pu,de="onMouseLeave",J="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Me=qu,de="onPointerLeave",J="onPointerEnter",Z="pointer"),et=ce==null?oe:Ui(ce),re=xe==null?oe:Ui(xe),oe=new Me(de,Z+"leave",ce,i,he),oe.target=et,oe.relatedTarget=re,de=null,ge(he)===ae&&(Me=new Me(J,Z+"enter",xe,i,he),Me.target=re,Me.relatedTarget=et,de=Me),et=de,ce&&xe)t:{for(Me=Rg,J=ce,Z=xe,re=0,de=J;de;de=Me(de))re++;de=0;for(var De=Z;De;De=Me(De))de++;for(;0<re-de;)J=Me(J),re--;for(;0<de-re;)Z=Me(Z),de--;for(;re--;){if(J===Z||Z!==null&&J===Z.alternate){Me=J;break t}J=Me(J),Z=Me(Z)}Me=null}else Me=null;ce!==null&&Of(fe,oe,ce,Me,!1),xe!==null&&et!==null&&Of(fe,et,xe,Me,!0)}}e:{if(oe=ae?Ui(ae):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Ye=$u;else if(Xu(oe))if(Zu)Ye=Hp;else{Ye=jp;var Ee=Op}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ae&&jl(ae.elementType)&&(Ye=$u):Ye=Np;if(Ye&&(Ye=Ye(e,ae))){Ku(fe,Ye,i,he);break e}Ee&&Ee(e,oe,ae),e==="focusout"&&ae&&oe.type==="number"&&ae.memoizedProps.value!=null&&Ol(oe,"number",oe.value)}switch(Ee=ae?Ui(ae):window,e){case"focusin":(Xu(Ee)||Ee.contentEditable==="true")&&(pn=Ee,Kl=ae,ar=null);break;case"focusout":ar=Kl=pn=null;break;case"mousedown":$l=!0;break;case"contextmenu":case"mouseup":case"dragend":$l=!1,rh(fe,i,he);break;case"selectionchange":if(Up)break;case"keydown":case"keyup":rh(fe,i,he)}var je;if(Wl)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else mn?Yu(e,i)&&(qe="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(qe="onCompositionStart");qe&&(Fu&&i.locale!=="ko"&&(mn||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&mn&&(je=zu()):(us=he,Pl="value"in us?us.value:us.textContent,mn=!0)),Ee=$a(ae,qe),0<Ee.length&&(qe=new Iu(qe,e,null,i,he),fe.push({event:qe,listeners:Ee}),je?qe.data=je:(je=Vu(i),je!==null&&(qe.data=je)))),(je=Tp?Mp(e,i):Lp(e,i))&&(qe=$a(ae,"onBeforeInput"),0<qe.length&&(Ee=new Iu("onBeforeInput","beforeinput",null,i,he),fe.push({event:Ee,listeners:qe}),Ee.data=je)),Cg(fe,e,ae,i,he)}Bf(fe,t)})}function Lr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function $a(e,t){for(var i=t+"Capture",s=[];e!==null;){var r=e,u=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||u===null||(r=Qn(e,i),r!=null&&s.unshift(Lr(e,r,u)),r=Qn(e,t),r!=null&&s.push(Lr(e,r,u))),e.tag===3)return s;e=e.return}return[]}function Rg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Of(e,t,i,s,r){for(var u=t._reactName,M=[];i!==null&&i!==s;){var q=i,X=q.alternate,ae=q.stateNode;if(q=q.tag,X!==null&&X===s)break;q!==5&&q!==26&&q!==27||ae===null||(X=ae,r?(ae=Qn(i,u),ae!=null&&M.unshift(Lr(i,ae,X))):r||(ae=Qn(i,u),ae!=null&&M.push(Lr(i,ae,X)))),i=i.return}M.length!==0&&e.push({event:t,listeners:M})}var Ag=/\r\n?/g,Dg=/\u0000|\uFFFD/g;function jf(e){return(typeof e=="string"?e:""+e).replace(Ag,`
`).replace(Dg,"")}function Nf(e,t){return t=jf(t),jf(e)===t}function Je(e,t,i,s,r,u){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||dn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&dn(e,""+s);break;case"className":ea(e,"class",s);break;case"tabIndex":ea(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":ea(e,i,s);break;case"style":ju(e,s,u);break;case"data":if(t!=="object"){ea(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=ia(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Je(e,t,"name",r.name,r,null),Je(e,t,"formEncType",r.formEncType,r,null),Je(e,t,"formMethod",r.formMethod,r,null),Je(e,t,"formTarget",r.formTarget,r,null)):(Je(e,t,"encType",r.encType,r,null),Je(e,t,"method",r.method,r,null),Je(e,t,"target",r.target,r,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=ia(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=Ii);break;case"onScroll":s!=null&&Ue("scroll",e);break;case"onScrollEnd":s!=null&&Ue("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(p(61));if(i=s.__html,i!=null){if(r.children!=null)throw Error(p(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=ia(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":Ue("beforetoggle",e),Ue("toggle",e),Jr(e,"popover",s);break;case"xlinkActuate":Pi(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Pi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Pi(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Pi(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Pi(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Pi(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Pi(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Jr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=ip.get(i)||i,Jr(e,i,s))}}function Cc(e,t,i,s,r,u){switch(i){case"style":ju(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(p(61));if(i=s.__html,i!=null){if(r.children!=null)throw Error(p(60));e.innerHTML=i}}break;case"children":typeof s=="string"?dn(e,s):(typeof s=="number"||typeof s=="bigint")&&dn(e,""+s);break;case"onScroll":s!=null&&Ue("scroll",e);break;case"onScrollEnd":s!=null&&Ue("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!un.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(r=i.endsWith("Capture"),t=i.slice(2,r?i.length-7:void 0),u=e[it]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,r),typeof s=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,r);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):Jr(e,i,s)}}}function Mt(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",e),Ue("load",e);var s=!1,r=!1,u;for(u in i)if(i.hasOwnProperty(u)){var M=i[u];if(M!=null)switch(u){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(p(137,t));default:Je(e,t,u,M,i,null)}}r&&Je(e,t,"srcSet",i.srcSet,i,null),s&&Je(e,t,"src",i.src,i,null);return;case"input":Ue("invalid",e);var q=u=M=r=null,X=null,ae=null;for(s in i)if(i.hasOwnProperty(s)){var he=i[s];if(he!=null)switch(s){case"name":r=he;break;case"type":M=he;break;case"checked":X=he;break;case"defaultChecked":ae=he;break;case"value":u=he;break;case"defaultValue":q=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(p(137,t));break;default:Je(e,t,s,he,i,null)}}Lu(e,u,q,X,ae,M,r,!1);return;case"select":Ue("invalid",e),s=M=u=null;for(r in i)if(i.hasOwnProperty(r)&&(q=i[r],q!=null))switch(r){case"value":u=q;break;case"defaultValue":M=q;break;case"multiple":s=q;default:Je(e,t,r,q,i,null)}t=u,i=M,e.multiple=!!s,t!=null?hn(e,!!s,t,!1):i!=null&&hn(e,!!s,i,!0);return;case"textarea":Ue("invalid",e),u=r=s=null;for(M in i)if(i.hasOwnProperty(M)&&(q=i[M],q!=null))switch(M){case"value":s=q;break;case"defaultValue":r=q;break;case"children":u=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(p(91));break;default:Je(e,t,M,q,i,null)}ku(e,s,r,u);return;case"option":for(X in i)if(i.hasOwnProperty(X)&&(s=i[X],s!=null))switch(X){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Je(e,t,X,s,i,null)}return;case"dialog":Ue("beforetoggle",e),Ue("toggle",e),Ue("cancel",e),Ue("close",e);break;case"iframe":case"object":Ue("load",e);break;case"video":case"audio":for(s=0;s<Mr.length;s++)Ue(Mr[s],e);break;case"image":Ue("error",e),Ue("load",e);break;case"details":Ue("toggle",e);break;case"embed":case"source":case"link":Ue("error",e),Ue("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in i)if(i.hasOwnProperty(ae)&&(s=i[ae],s!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(p(137,t));default:Je(e,t,ae,s,i,null)}return;default:if(jl(t)){for(he in i)i.hasOwnProperty(he)&&(s=i[he],s!==void 0&&Cc(e,t,he,s,i,void 0));return}}for(q in i)i.hasOwnProperty(q)&&(s=i[q],s!=null&&Je(e,t,q,s,i,null))}function Tg(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,u=null,M=null,q=null,X=null,ae=null,he=null;for(ce in i){var fe=i[ce];if(i.hasOwnProperty(ce)&&fe!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":X=fe;default:s.hasOwnProperty(ce)||Je(e,t,ce,null,s,fe)}}for(var oe in s){var ce=s[oe];if(fe=i[oe],s.hasOwnProperty(oe)&&(ce!=null||fe!=null))switch(oe){case"type":u=ce;break;case"name":r=ce;break;case"checked":ae=ce;break;case"defaultChecked":he=ce;break;case"value":M=ce;break;case"defaultValue":q=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(p(137,t));break;default:ce!==fe&&Je(e,t,oe,ce,s,fe)}}kl(e,M,q,X,ae,he,u,r);return;case"select":ce=M=q=oe=null;for(u in i)if(X=i[u],i.hasOwnProperty(u)&&X!=null)switch(u){case"value":break;case"multiple":ce=X;default:s.hasOwnProperty(u)||Je(e,t,u,null,s,X)}for(r in s)if(u=s[r],X=i[r],s.hasOwnProperty(r)&&(u!=null||X!=null))switch(r){case"value":oe=u;break;case"defaultValue":q=u;break;case"multiple":M=u;default:u!==X&&Je(e,t,r,u,s,X)}t=q,i=M,s=ce,oe!=null?hn(e,!!i,oe,!1):!!s!=!!i&&(t!=null?hn(e,!!i,t,!0):hn(e,!!i,i?[]:"",!1));return;case"textarea":ce=oe=null;for(q in i)if(r=i[q],i.hasOwnProperty(q)&&r!=null&&!s.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Je(e,t,q,null,s,r)}for(M in s)if(r=s[M],u=i[M],s.hasOwnProperty(M)&&(r!=null||u!=null))switch(M){case"value":oe=r;break;case"defaultValue":ce=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(p(91));break;default:r!==u&&Je(e,t,M,r,s,u)}Bu(e,oe,ce);return;case"option":for(var xe in i)if(oe=i[xe],i.hasOwnProperty(xe)&&oe!=null&&!s.hasOwnProperty(xe))switch(xe){case"selected":e.selected=!1;break;default:Je(e,t,xe,null,s,oe)}for(X in s)if(oe=s[X],ce=i[X],s.hasOwnProperty(X)&&oe!==ce&&(oe!=null||ce!=null))switch(X){case"selected":e.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Je(e,t,X,oe,s,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in i)oe=i[Me],i.hasOwnProperty(Me)&&oe!=null&&!s.hasOwnProperty(Me)&&Je(e,t,Me,null,s,oe);for(ae in s)if(oe=s[ae],ce=i[ae],s.hasOwnProperty(ae)&&oe!==ce&&(oe!=null||ce!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(p(137,t));break;default:Je(e,t,ae,oe,s,ce)}return;default:if(jl(t)){for(var et in i)oe=i[et],i.hasOwnProperty(et)&&oe!==void 0&&!s.hasOwnProperty(et)&&Cc(e,t,et,void 0,s,oe);for(he in s)oe=s[he],ce=i[he],!s.hasOwnProperty(he)||oe===ce||oe===void 0&&ce===void 0||Cc(e,t,he,oe,s,ce);return}}for(var J in i)oe=i[J],i.hasOwnProperty(J)&&oe!=null&&!s.hasOwnProperty(J)&&Je(e,t,J,null,s,oe);for(fe in s)oe=s[fe],ce=i[fe],!s.hasOwnProperty(fe)||oe===ce||oe==null&&ce==null||Je(e,t,fe,oe,s,ce)}function Hf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Mg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),s=0;s<i.length;s++){var r=i[s],u=r.transferSize,M=r.initiatorType,q=r.duration;if(u&&q&&Hf(M)){for(M=0,q=r.responseEnd,s+=1;s<i.length;s++){var X=i[s],ae=X.startTime;if(ae>q)break;var he=X.transferSize,fe=X.initiatorType;he&&Hf(fe)&&(X=X.responseEnd,M+=he*(X<q?1:(q-ae)/(X-ae)))}if(--s,t+=8*(u+M)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wc=null,xc=null;function Za(e){return e.nodeType===9?e:e.ownerDocument}function zf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Uf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ec(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rc=null;function Lg(){var e=window.event;return e&&e.type==="popstate"?e===Rc?!1:(Rc=e,!0):(Rc=null,!1)}var Pf=typeof setTimeout=="function"?setTimeout:void 0,Bg=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,kg=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(e){return If.resolve(null).then(e).catch(Og)}:Pf;function Og(e){setTimeout(function(){throw e})}function As(e){return e==="head"}function qf(e,t){var i=t,s=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"||i==="/&"){if(s===0){e.removeChild(r),Fn(t);return}s--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")s++;else if(i==="html")Br(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Br(i);for(var u=i.firstChild;u;){var M=u.nextSibling,q=u.nodeName;u[zi]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=M}}else i==="body"&&Br(e.ownerDocument.body);i=r}while(i);Fn(t)}function Ff(e,t){var i=e;e=0;do{var s=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),s&&s.nodeType===8)if(i=s.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=s}while(i)}function Ac(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ac(i),Ps(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function jg(e,t,i,s){for(;e.nodeType===1;){var r=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[zi])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=_i(e.nextSibling),e===null)break}return null}function Ng(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=_i(e.nextSibling),e===null))return null;return e}function Gf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=_i(e.nextSibling),e===null))return null;return e}function Dc(e){return e.data==="$?"||e.data==="$~"}function Tc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Hg(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function _i(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Mc=null;function Wf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return _i(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Yf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Vf(e,t,i){switch(t=Za(i),e){case"html":if(e=t.documentElement,!e)throw Error(p(452));return e;case"head":if(e=t.head,!e)throw Error(p(453));return e;case"body":if(e=t.body,!e)throw Error(p(454));return e;default:throw Error(p(451))}}function Br(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ps(e)}var mi=new Map,Xf=new Set;function Qa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ss=K.d;K.d={f:zg,r:Ug,D:Pg,C:Ig,L:qg,m:Fg,X:Wg,S:Gg,M:Yg};function zg(){var e=ss.f(),t=Fa();return e||t}function Ug(e){var t=Pe(e);t!==null&&t.tag===5&&t.type==="form"?ud(t):ss.r(e)}var Pn=typeof document>"u"?null:document;function Kf(e,t,i){var s=Pn;if(s&&typeof t=="string"&&t){var r=li(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof i=="string"&&(r+='[crossorigin="'+i+'"]'),Xf.has(r)||(Xf.add(r),e={rel:e,crossOrigin:i,href:t},s.querySelector(r)===null&&(t=s.createElement("link"),Mt(t,"link",e),ct(t),s.head.appendChild(t)))}}function Pg(e){ss.D(e),Kf("dns-prefetch",e,null)}function Ig(e,t){ss.C(e,t),Kf("preconnect",e,t)}function qg(e,t,i){ss.L(e,t,i);var s=Pn;if(s&&e&&t){var r='link[rel="preload"][as="'+li(t)+'"]';t==="image"&&i&&i.imageSrcSet?(r+='[imagesrcset="'+li(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(r+='[imagesizes="'+li(i.imageSizes)+'"]')):r+='[href="'+li(e)+'"]';var u=r;switch(t){case"style":u=In(e);break;case"script":u=qn(e)}mi.has(u)||(e=f({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),mi.set(u,e),s.querySelector(r)!==null||t==="style"&&s.querySelector(kr(u))||t==="script"&&s.querySelector(Or(u))||(t=s.createElement("link"),Mt(t,"link",e),ct(t),s.head.appendChild(t)))}}function Fg(e,t){ss.m(e,t);var i=Pn;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+li(s)+'"][href="'+li(e)+'"]',u=r;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=qn(e)}if(!mi.has(u)&&(e=f({rel:"modulepreload",href:e},t),mi.set(u,e),i.querySelector(r)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Or(u)))return}s=i.createElement("link"),Mt(s,"link",e),ct(s),i.head.appendChild(s)}}}function Gg(e,t,i){ss.S(e,t,i);var s=Pn;if(s&&e){var r=Si(s).hoistableStyles,u=In(e);t=t||"default";var M=r.get(u);if(!M){var q={loading:0,preload:null};if(M=s.querySelector(kr(u)))q.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},i),(i=mi.get(u))&&Lc(e,i);var X=M=s.createElement("link");ct(X),Mt(X,"link",e),X._p=new Promise(function(ae,he){X.onload=ae,X.onerror=he}),X.addEventListener("load",function(){q.loading|=1}),X.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Ja(M,t,s)}M={type:"stylesheet",instance:M,count:1,state:q},r.set(u,M)}}}function Wg(e,t){ss.X(e,t);var i=Pn;if(i&&e){var s=Si(i).hoistableScripts,r=qn(e),u=s.get(r);u||(u=i.querySelector(Or(r)),u||(e=f({src:e,async:!0},t),(t=mi.get(r))&&Bc(e,t),u=i.createElement("script"),ct(u),Mt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(r,u))}}function Yg(e,t){ss.M(e,t);var i=Pn;if(i&&e){var s=Si(i).hoistableScripts,r=qn(e),u=s.get(r);u||(u=i.querySelector(Or(r)),u||(e=f({src:e,async:!0,type:"module"},t),(t=mi.get(r))&&Bc(e,t),u=i.createElement("script"),ct(u),Mt(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(r,u))}}function $f(e,t,i,s){var r=(r=me.current)?Qa(r):null;if(!r)throw Error(p(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=In(i.href),i=Si(r).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=In(i.href);var u=Si(r).hoistableStyles,M=u.get(e);if(M||(r=r.ownerDocument||r,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,M),(u=r.querySelector(kr(e)))&&!u._p&&(M.instance=u,M.state.loading=5),mi.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},mi.set(e,i),u||Vg(r,e,i,M.state))),t&&s===null)throw Error(p(528,""));return M}if(t&&s!==null)throw Error(p(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qn(i),i=Si(r).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(p(444,e))}}function In(e){return'href="'+li(e)+'"'}function kr(e){return'link[rel="stylesheet"]['+e+"]"}function Zf(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Vg(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Mt(t,"link",i),ct(t),e.head.appendChild(t))}function qn(e){return'[src="'+li(e)+'"]'}function Or(e){return"script[async]"+e}function Qf(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+li(i.href)+'"]');if(s)return t.instance=s,ct(s),s;var r=f({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),ct(s),Mt(s,"style",r),Ja(s,i.precedence,e),t.instance=s;case"stylesheet":r=In(i.href);var u=e.querySelector(kr(r));if(u)return t.state.loading|=4,t.instance=u,ct(u),u;s=Zf(i),(r=mi.get(r))&&Lc(s,r),u=(e.ownerDocument||e).createElement("link"),ct(u);var M=u;return M._p=new Promise(function(q,X){M.onload=q,M.onerror=X}),Mt(u,"link",s),t.state.loading|=4,Ja(u,i.precedence,e),t.instance=u;case"script":return u=qn(i.src),(r=e.querySelector(Or(u)))?(t.instance=r,ct(r),r):(s=i,(r=mi.get(u))&&(s=f({},i),Bc(s,r)),e=e.ownerDocument||e,r=e.createElement("script"),ct(r),Mt(r,"link",s),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(p(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Ja(s,i.precedence,e));return t.instance}function Ja(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=s.length?s[s.length-1]:null,u=r,M=0;M<s.length;M++){var q=s[M];if(q.dataset.precedence===t)u=q;else if(u!==r)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Lc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Bc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var el=null;function Jf(e,t,i){if(el===null){var s=new Map,r=el=new Map;r.set(i,s)}else r=el,s=r.get(i),s||(s=new Map,r.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),r=0;r<i.length;r++){var u=i[r];if(!(u[zi]||u[dt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var M=u.getAttribute(t)||"";M=e+M;var q=s.get(M);q?q.push(u):s.set(M,[u])}}return s}function e_(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Xg(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function t_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Kg(e,t,i,s){if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var r=In(s.href),u=t.querySelector(kr(r));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=tl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,ct(u);return}u=t.ownerDocument||t,s=Zf(s),(r=mi.get(r))&&Lc(s,r),u=u.createElement("link"),ct(u);var M=u;M._p=new Promise(function(q,X){M.onload=q,M.onerror=X}),Mt(u,"link",s),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=tl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var kc=0;function $g(e,t){return e.stylesheets&&e.count===0&&sl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var s=setTimeout(function(){if(e.stylesheets&&sl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&kc===0&&(kc=62500*Mg());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>kc?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(r)}}:null}function tl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var il=null;function sl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,il=new Map,t.forEach(Zg,e),il=null,tl.call(e))}function Zg(e,t){if(!(t.state.loading&4)){var i=il.get(e);if(i)var s=i.get(null);else{i=new Map,il.set(e,i);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<r.length;u++){var M=r[u];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(i.set(M.dataset.precedence,M),s=M)}s&&i.set(null,s)}r=t.instance,M=r.getAttribute("data-precedence"),u=i.get(M)||s,u===s&&i.set(null,r),i.set(M,r),this.count++,s=tl.bind(this),r.addEventListener("load",s),r.addEventListener("error",s),u?u.parentNode.insertBefore(r,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var jr={$$typeof:h,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Qg(e,t,i,s,r,u,M,q,X){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=s,this.onUncaughtError=r,this.onCaughtError=u,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function i_(e,t,i,s,r,u,M,q,X,ae,he,fe){return e=new Qg(e,t,i,M,X,ae,he,fe,q),t=1,u===!0&&(t|=24),u=Qt(3,null,null,t),e.current=u,u.stateNode=e,t=ho(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:i,cache:t},po(u),e}function s_(e){return e?(e=yn,e):yn}function n_(e,t,i,s,r,u){r=s_(r),s.context===null?s.context=r:s.pendingContext=r,s=ps(t),s.payload={element:i},u=u===void 0?null:u,u!==null&&(s.callback=u),i=gs(e,s,t),i!==null&&(Vt(i,e,t),fr(i,e,t))}function r_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Oc(e,t){r_(e,t),(e=e.alternate)&&r_(e,t)}function a_(e){if(e.tag===13||e.tag===31){var t=Gs(e,67108864);t!==null&&Vt(t,e,67108864),Oc(e,67108864)}}function l_(e){if(e.tag===13||e.tag===31){var t=si();t=Rt(t);var i=Gs(e,t);i!==null&&Vt(i,e,t),Oc(e,t)}}var nl=!0;function Jg(e,t,i,s){var r=G.T;G.T=null;var u=K.p;try{K.p=2,jc(e,t,i,s)}finally{K.p=u,G.T=r}}function ev(e,t,i,s){var r=G.T;G.T=null;var u=K.p;try{K.p=8,jc(e,t,i,s)}finally{K.p=u,G.T=r}}function jc(e,t,i,s){if(nl){var r=Nc(s);if(r===null)bc(e,t,s,rl,i),c_(e,s);else if(iv(r,e,t,i,s))s.stopPropagation();else if(c_(e,s),t&4&&-1<tv.indexOf(e)){for(;r!==null;){var u=Pe(r);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var M=Ht(u.pendingLanes);if(M!==0){var q=u;for(q.pendingLanes|=2,q.entangledLanes|=2;M;){var X=1<<31-rt(M);q.entanglements[1]|=X,M&=~X}Li(u),(Xe&6)===0&&(Ia=Ae()+500,Tr(0))}}break;case 31:case 13:q=Gs(u,2),q!==null&&Vt(q,u,2),Fa(),Oc(u,2)}if(u=Nc(s),u===null&&bc(e,t,s,rl,i),u===r)break;r=u}r!==null&&s.stopPropagation()}else bc(e,t,s,null,i)}}function Nc(e){return e=Hl(e),Hc(e)}var rl=null;function Hc(e){if(rl=null,e=ge(e),e!==null){var t=H(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=k(t),e!==null)return e;e=null}else if(i===31){if(e=l(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return rl=e,null}function o_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case mt:return 2;case Ke:return 8;case ht:case Pt:return 32;case wt:return 268435456;default:return 32}default:return 32}}var zc=!1,Ds=null,Ts=null,Ms=null,Nr=new Map,Hr=new Map,Ls=[],tv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c_(e,t){switch(e){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":Nr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(t.pointerId)}}function zr(e,t,i,s,r,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:u,targetContainers:[r]},t!==null&&(t=Pe(t),t!==null&&a_(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function iv(e,t,i,s,r){switch(t){case"focusin":return Ds=zr(Ds,e,t,i,s,r),!0;case"dragenter":return Ts=zr(Ts,e,t,i,s,r),!0;case"mouseover":return Ms=zr(Ms,e,t,i,s,r),!0;case"pointerover":var u=r.pointerId;return Nr.set(u,zr(Nr.get(u)||null,e,t,i,s,r)),!0;case"gotpointercapture":return u=r.pointerId,Hr.set(u,zr(Hr.get(u)||null,e,t,i,s,r)),!0}return!1}function u_(e){var t=ge(e.target);if(t!==null){var i=H(t);if(i!==null){if(t=i.tag,t===13){if(t=k(i),t!==null){e.blockedOn=t,on(e.priority,function(){l_(i)});return}}else if(t===31){if(t=l(i),t!==null){e.blockedOn=t,on(e.priority,function(){l_(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function al(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Nc(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Nl=s,i.target.dispatchEvent(s),Nl=null}else return t=Pe(i),t!==null&&a_(t),e.blockedOn=i,!1;t.shift()}return!0}function h_(e,t,i){al(e)&&i.delete(t)}function sv(){zc=!1,Ds!==null&&al(Ds)&&(Ds=null),Ts!==null&&al(Ts)&&(Ts=null),Ms!==null&&al(Ms)&&(Ms=null),Nr.forEach(h_),Hr.forEach(h_)}function ll(e,t){e.blockedOn===t&&(e.blockedOn=null,zc||(zc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,sv)))}var ol=null;function d_(e){ol!==e&&(ol=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ol===e&&(ol=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],r=e[t+2];if(typeof s!="function"){if(Hc(s||i)===null)continue;break}var u=Pe(i);u!==null&&(e.splice(t,3),t-=3,No(u,{pending:!0,data:r,method:i.method,action:s},s,r))}}))}function Fn(e){function t(X){return ll(X,e)}Ds!==null&&ll(Ds,e),Ts!==null&&ll(Ts,e),Ms!==null&&ll(Ms,e),Nr.forEach(t),Hr.forEach(t);for(var i=0;i<Ls.length;i++){var s=Ls[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ls.length&&(i=Ls[0],i.blockedOn===null);)u_(i),i.blockedOn===null&&Ls.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var r=i[s],u=i[s+1],M=r[it]||null;if(typeof u=="function")M||d_(i);else if(M){var q=null;if(u&&u.hasAttribute("formAction")){if(r=u,M=u[it]||null)q=M.formAction;else if(Hc(r)!==null)continue}else q=M.action;typeof q=="function"?i[s+1]=q:(i.splice(s,3),s-=3),d_(i)}}}function f_(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(M){return r=M})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),s||setTimeout(i,20)}function i(){if(!s&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Uc(e){this._internalRoot=e}cl.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(p(409));var i=t.current,s=si();n_(i,s,e,t,null,null)},cl.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;n_(e.current,2,null,e,null,null),Fa(),t[Ai]=null}};function cl(e){this._internalRoot=e}cl.prototype.unstable_scheduleHydration=function(e){if(e){var t=ln();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Ls.length&&t!==0&&t<Ls[i].priority;i++);Ls.splice(i,0,e),i===0&&u_(e)}};var __=m.version;if(__!=="19.2.1")throw Error(p(527,__,"19.2.1"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=_(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var nv={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{It=ul.inject(nv),pt=ul}catch{}}return Pr.createRoot=function(e,t){if(!T(e))throw Error(p(299));var i=!1,s="",r=Sd,u=bd,M=Cd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(M=t.onRecoverableError)),t=i_(e,1,!1,null,null,i,s,null,r,u,M,f_),e[Ai]=t.current,Sc(e),new Uc(t)},Pr.hydrateRoot=function(e,t,i){if(!T(e))throw Error(p(299));var s=!1,r="",u=Sd,M=bd,q=Cd,X=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(M=i.onCaughtError),i.onRecoverableError!==void 0&&(q=i.onRecoverableError),i.formState!==void 0&&(X=i.formState)),t=i_(e,1,!0,t,i??null,s,r,X,u,M,q,f_),t.context=s_(null),i=t.current,s=si(),s=Rt(s),r=ps(s),r.callback=null,gs(i,r,s),i=s,t.current.lanes=i,we(t,i),Li(t),e[Ai]=t.current,Sc(e),new cl(t)},Pr.version="19.2.1",Pr}var x_;function _v(){if(x_)return qc.exports;x_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(m){console.error(m)}}return n(),qc.exports=fv(),qc.exports}var mv=_v();const pv=hu(mv),gv={alert:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M10.3 4.9 3.3 17a1.5 1.5 0 0 0 1.3 2.3h14.8a1.5 1.5 0 0 0 1.3-2.3l-7-12.1a1.5 1.5 0 0 0-2.6 0z"}),C.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),C.jsx("circle",{cx:"12",cy:"17",r:"1"})]}),archive:C.jsxs(C.Fragment,{children:[C.jsx("rect",{x:"3",y:"4",width:"18",height:"7",rx:"1"}),C.jsx("path",{d:"M5 11v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8"}),C.jsx("line",{x1:"10",y1:"15",x2:"14",y2:"15"})]}),bell:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M18 8a6 6 0 1 0-12 0c0 7-3 8-3 8h18s-3-1-3-8"}),C.jsx("path",{d:"M13.7 21a2 2 0 0 1-3.4 0"})]}),bolt:C.jsx("polyline",{points:"13 2 3 14 11 14 11 22 21 10 13 10 13 2"}),branch:C.jsxs(C.Fragment,{children:[C.jsx("circle",{cx:"6",cy:"6",r:"3"}),C.jsx("circle",{cx:"6",cy:"18",r:"3"}),C.jsx("circle",{cx:"18",cy:"6",r:"3"}),C.jsx("path",{d:"M6 9v6"}),C.jsx("path",{d:"M9 6h6"})]}),check:C.jsx("polyline",{points:"5 13 9 17 19 7"}),chevronDown:C.jsx("polyline",{points:"6 9 12 15 18 9"}),chevronRight:C.jsx("polyline",{points:"9 6 15 12 9 18"}),close:C.jsxs(C.Fragment,{children:[C.jsx("line",{x1:"5",y1:"5",x2:"19",y2:"19"}),C.jsx("line",{x1:"19",y1:"5",x2:"5",y2:"19"})]}),cloud:C.jsx("path",{d:"M20 17.5a4.5 4.5 0 0 0-1.5-8.7A6 6 0 0 0 6 9.5a4 4 0 0 0 0 8h14z"}),commit:C.jsxs(C.Fragment,{children:[C.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),C.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),ellipsis:C.jsxs(C.Fragment,{children:[C.jsx("circle",{cx:"6",cy:"12",r:"1.5"}),C.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),C.jsx("circle",{cx:"18",cy:"12",r:"1.5"})]}),externalLink:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),C.jsx("polyline",{points:"15 3 21 3 21 9"}),C.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]}),fileAdd:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M14 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),C.jsx("polyline",{points:"14 3 14 9 20 9"}),C.jsx("line",{x1:"12",y1:"13",x2:"12",y2:"17"}),C.jsx("line",{x1:"10",y1:"15",x2:"14",y2:"15"})]}),fileEdit:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M14 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),C.jsx("polyline",{points:"14 3 14 9 20 9"}),C.jsx("path",{d:"M10 14l4-4 2 2-4 4H10z"})]}),fileRemove:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M14 3H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),C.jsx("polyline",{points:"14 3 14 9 20 9"}),C.jsx("line",{x1:"10",y1:"15",x2:"14",y2:"15"})]}),folder:C.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h4l2 2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),menu:C.jsxs(C.Fragment,{children:[C.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),C.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),C.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),merge:C.jsxs(C.Fragment,{children:[C.jsx("circle",{cx:"6",cy:"6",r:"3"}),C.jsx("circle",{cx:"6",cy:"18",r:"3"}),C.jsx("path",{d:"M6 9v6"}),C.jsx("path",{d:"M9 6h6a3 3 0 0 1 3 3v3"}),C.jsx("circle",{cx:"18",cy:"12",r:"3"})]}),minus:C.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),play:C.jsx("polygon",{points:"7 5 19 12 7 19 7 5",fill:"currentColor",stroke:"none"}),plus:C.jsxs(C.Fragment,{children:[C.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),C.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),pull:C.jsxs(C.Fragment,{children:[C.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),C.jsx("polyline",{points:"13 6 19 12 13 18"})]}),refresh:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M21 12a9 9 0 0 1-15.5 6.5"}),C.jsx("polyline",{points:"3 17 5.5 17 5.5 14.5"}),C.jsx("path",{d:"M3 12a9 9 0 0 1 15.5-6.5"}),C.jsx("polyline",{points:"21 7 18.5 7 18.5 9.5"})]}),settings:C.jsxs(C.Fragment,{children:[C.jsx("circle",{cx:"12",cy:"12",r:"3"}),C.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"5"}),C.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"}),C.jsx("line",{x1:"2",y1:"12",x2:"5",y2:"12"}),C.jsx("line",{x1:"19",y1:"12",x2:"22",y2:"12"}),C.jsx("line",{x1:"4.6",y1:"4.6",x2:"6.8",y2:"6.8"}),C.jsx("line",{x1:"17.2",y1:"17.2",x2:"19.4",y2:"19.4"}),C.jsx("line",{x1:"17.2",y1:"6.8",x2:"19.4",y2:"4.6"}),C.jsx("line",{x1:"4.6",y1:"19.4",x2:"6.8",y2:"17.2"})]}),sparkle:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M12 3l1.6 4.4L18 9l-4.4 1.6L12 15l-1.6-4.4L6 9l4.4-1.6L12 3z"}),C.jsx("path",{d:"M5 15l0.8 2.2L8 18l-2.2 0.8L5 21l-0.8-2.2L2 18l2.2-0.8L5 15z"})]}),split:C.jsxs(C.Fragment,{children:[C.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),C.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"})]}),terminal:C.jsxs(C.Fragment,{children:[C.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2"}),C.jsx("polyline",{points:"7 10 10 12 7 14"}),C.jsx("line",{x1:"12",y1:"14",x2:"17",y2:"14"})]}),tag:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M20.6 13.4 11 3.8A2 2 0 0 0 9.6 3H4a1 1 0 0 0-1 1v5.6a2 2 0 0 0 .6 1.4l9.6 9.6a2 2 0 0 0 2.8 0l4.4-4.4a2 2 0 0 0 0-2.8z"}),C.jsx("circle",{cx:"7.5",cy:"7.5",r:"1.5"})]}),trash:C.jsxs(C.Fragment,{children:[C.jsx("polyline",{points:"3 6 5 6 21 6"}),C.jsx("path",{d:"M8 6v12a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2V6"}),C.jsx("path",{d:"M10 11v6"}),C.jsx("path",{d:"M14 11v6"}),C.jsx("path",{d:"M9 6l1-3h4l1 3"})]}),undo:C.jsxs(C.Fragment,{children:[C.jsx("path",{d:"M9 7H5v4"}),C.jsx("path",{d:"M5 11l4-4"}),C.jsx("path",{d:"M5 11h9a5 5 0 0 1 0 10h-3"})]})};function Te({name:n,size:m=16,className:b,...p}){return C.jsx("svg",{viewBox:"0 0 24 24",width:m,height:m,className:b,fill:"none",stroke:"currentColor",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,...p,children:gv[n]})}function fu({items:n,position:m,onClose:b,onSelect:p}){const T=P.useRef(null),[H,k]=P.useState(m);return P.useLayoutEffect(()=>{const l=T.current;if(!l)return;const d=l.getBoundingClientRect(),_=8;let v=m.x,f=m.y;v+d.width>window.innerWidth-_&&(v=Math.max(_,window.innerWidth-d.width-_)),f+d.height>window.innerHeight-_&&(f=Math.max(_,window.innerHeight-d.height-_)),k({x:v,y:f})},[n.length,m.x,m.y]),P.useEffect(()=>{const l=_=>{T.current?.contains(_.target)||b()},d=_=>{_.key==="Escape"&&b()};return window.addEventListener("mousedown",l),window.addEventListener("contextmenu",l),window.addEventListener("keydown",d),()=>{window.removeEventListener("mousedown",l),window.removeEventListener("contextmenu",l),window.removeEventListener("keydown",d)}},[b]),C.jsx("div",{ref:T,className:"context-menu",role:"menu",style:{left:H.x,top:H.y},onContextMenu:l=>l.preventDefault(),children:n.map(l=>l.type==="separator"?C.jsx("div",{className:"context-menu-separator",role:"separator",children:C.jsx("span",{children:l.label})},l.id):l.type==="radio"?C.jsxs("button",{type:"button",className:`context-menu-item context-menu-item-radio ${l.selected?"is-selected":""}`,role:"menuitemradio","aria-checked":l.selected??!1,disabled:l.disabled,onClick:()=>{l.disabled||(p?.(l.id),b())},children:[C.jsx("span",{className:"context-menu-check",children:l.selected?C.jsx(Te,{name:"check",size:12,className:"context-menu-check-icon"}):null}),C.jsx("span",{children:l.label})]},l.id):C.jsxs("button",{type:"button",className:"context-menu-item",role:"menuitem",disabled:l.disabled,onClick:()=>{l.disabled||(p?.(l.id),b())},children:[l.icon?C.jsx(Te,{name:l.icon,size:14,className:"context-menu-icon"}):null,C.jsx("span",{children:l.label})]},l.id))})}const vv=new Set(["commits","commit","stashes","tags","remotes"]),Yc=n=>{const m={};n.forEach(T=>{m[T.id]=vv.has(T.id)?"bottom":"top"});const b=n.some(T=>m[T.id]==="top"),p=n.some(T=>m[T.id]==="bottom");return!b&&n[0]&&(m[n[0].id]="top"),!p&&n[n.length-1]&&(m[n[n.length-1].id]="bottom"),m},E_=n=>n[0]?.id??"branches";function yv(n){const[m,b]=P.useState(n),[p,T]=P.useState(()=>Yc(n)),[H,k]=P.useState("branches"),[l,d]=P.useState(()=>{const B=Yc(n);return n.find(F=>B[F.id]==="top")?.id??E_(n)}),[_,v]=P.useState(()=>{const B=Yc(n);return n.find(F=>B[F.id]==="bottom")?.id??E_(n)}),[f,w]=P.useState(null),[x,R]=P.useState(null),[E,a]=P.useState(null),[o,c]=P.useState(null),h=P.useRef(null),S=P.useRef(null),y=P.useRef(null),A=P.useRef(null),D=P.useMemo(()=>m.filter(B=>p[B.id]!=="bottom"),[m,p]),g=P.useMemo(()=>m.filter(B=>p[B.id]==="bottom"),[m,p]);P.useEffect(()=>{h.current=f},[f]),P.useEffect(()=>{S.current=x},[x]),P.useEffect(()=>{!m.some(B=>B.id===H)&&m[0]&&k(m[0].id)},[H,m]),P.useEffect(()=>{!D.some(B=>B.id===l)&&D[0]&&d(D[0].id)},[l,D]),P.useEffect(()=>{!g.some(B=>B.id===_)&&g[0]&&v(g[0].id)},[_,g]);const L=P.useCallback((B,F,W,j)=>{const V=p[B]??"top";j!=="single"&&V!==j||b(ee=>{const Y=ee.findIndex(ne=>ne.id===B),se=ee.findIndex(ne=>ne.id===F);if(Y===-1||se===-1)return ee;const me=[...ee],[N]=me.splice(Y,1),Q=se+(W?1:0),ie=Y<Q?Q-1:Q;return me.splice(ie,0,N),me})},[p]),O=P.useCallback((B,F)=>{const W=p[B]??"top";W===F||m.filter(V=>p[V.id]===W).length<=1||T(V=>({...V,[B]:F}))},[p,m]),z=(B,F)=>W=>{const{dataTransfer:j}=W;if(j){j.effectAllowed="move";try{j.setData("text/plain",`${B}|${F}`)}catch{}}w(F),R(B),h.current=F,S.current=B,y.current=null},U=(B,F)=>W=>{if(W.preventDefault(),W.dataTransfer&&(W.dataTransfer.dropEffect="move"),S.current&&S.current!==B){a(null),c(null);return}a(F),c(B);const j=h.current;if(!j||j===F)return;const{left:V,width:ee}=W.currentTarget.getBoundingClientRect(),Y=W.clientX>=V+ee/2?"after":"before";y.current?.id===F&&y.current?.side===Y&&y.current?.group===B||(y.current={id:F,side:Y,group:B},L(j,F,Y==="after",B))},I=(B,F)=>W=>{W.preventDefault();const j=W.dataTransfer.getData("text/plain"),[V,ee]=j.split("|"),Y=ee||f,se=ee?V:x;if(!Y||Y===F){a(null),c(null);return}if(se&&B!==se&&se!=="single"){a(null),c(null);return}const{left:me,width:N}=W.currentTarget.getBoundingClientRect(),Q=W.clientX>=me+N/2;L(Y,F,Q,B??se??"single"),a(null),c(null)},$=()=>{w(null),R(null),a(null),c(null),y.current=null},te=P.useCallback(B=>{const F=h.current;if(!F)return;const j=document.elementsFromPoint(B.clientX,B.clientY).map(ne=>ne.closest("button[data-git-tab-id]")).filter(ne=>ne!==null),V=j.at(0);let ee=j.find(ne=>ne.dataset.gitTabId!==F)??V;ee||(ee=Array.from(document.querySelectorAll("button[data-git-tab-id]")).find(Re=>{const ve=Re.getBoundingClientRect();return B.clientX>=ve.left&&B.clientX<=ve.right&&B.clientY>=ve.top&&B.clientY<=ve.bottom}));const Y=ee?.dataset.gitTabId,se=ee?.dataset.gitTabGroup;if(!ee||!Y||!se){a(null),c(null);return}const me=S.current??"single";if(me!=="single"&&se!==me){a(null),c(null);return}const{left:N,width:Q}=ee.getBoundingClientRect(),ie=B.clientX>=N+Q/2?"after":"before";if(Y===F){a(Y),c(se),y.current={id:Y,side:ie,group:se};return}if(y.current?.id===Y&&y.current?.side===ie&&y.current?.group===se){a(Y),c(se);return}y.current={id:Y,side:ie,group:se},a(Y),c(se),L(F,Y,ie==="after",se)},[L]),G=P.useCallback(()=>{if(A.current){const{element:B,pointerId:F}=A.current;try{B.releasePointerCapture(F)}catch{}A.current=null}h.current=null,S.current=null,y.current=null,$(),window.removeEventListener("pointermove",te),window.removeEventListener("pointerup",G),window.removeEventListener("pointercancel",G)},[te]),K=(B,F)=>W=>{if(!(W.button!==0||W.pointerType==="touch")){W.preventDefault();try{W.currentTarget.setPointerCapture(W.pointerId),A.current={element:W.currentTarget,pointerId:W.pointerId}}catch{A.current=null}w(F),R(B),h.current=F,S.current=B,a(F),c(B),y.current=null,window.addEventListener("pointermove",te),window.addEventListener("pointerup",G),window.addEventListener("pointercancel",G)}};return P.useEffect(()=>()=>{if(A.current){const{element:B,pointerId:F}=A.current;try{B.releasePointerCapture(F)}catch{}A.current=null}window.removeEventListener("pointermove",te),window.removeEventListener("pointerup",G),window.removeEventListener("pointercancel",G),h.current=null,S.current=null,y.current=null,w(null),R(null),a(null),c(null)},[G,te]),{tabs:m,tabGroups:p,topTabs:D,bottomTabs:g,activeTab:H,setActiveTab:k,activeTopTab:l,setActiveTopTab:d,activeBottomTab:_,setActiveBottomTab:v,draggedTabId:f,dragOverTabId:E,dragOverGroup:o,moveTabToGroup:O,handleDragStart:z,handleDragOver:U,handleDrop:I,handleDragEnd:$,handlePointerDown:K}}function Vc({tabs:n,activeTab:m,draggedTabId:b,dragOverTabId:p,dragOverGroup:T,groupId:H="single",onTabClick:k,onTabContextMenu:l,onDragStart:d,onDragOver:_,onDrop:v,onDragEnd:f,onPointerDown:w}){const R=!(typeof window<"u"&&typeof window.__TAURI__<"u");return C.jsx("div",{className:"git-tabs",role:"tablist",children:n.map(E=>C.jsxs("button",{"data-git-tab-id":E.id,"data-git-tab-group":H,type:"button",className:`git-tab ${m===E.id?"is-active":""} ${b===E.id?"is-dragging":""} ${p===E.id&&T===H?"is-drag-over":""}`,role:"tab","aria-selected":m===E.id,draggable:R,onClick:()=>k(E.id),onContextMenu:l?a=>{a.preventDefault(),a.stopPropagation(),l(E.id,a)}:void 0,onDragStart:R?d(E.id):void 0,onDragOver:R?_(E.id):void 0,onDrop:R?v(E.id):void 0,onDragEnd:R?f:void 0,onPointerDown:w(E.id),children:[C.jsx(Te,{name:E.icon,size:14}),C.jsx("span",{children:E.label})]},E.id))})}function ns(n,m,{checkForDefaultPrevented:b=!0}={}){return function(T){if(n?.(T),b===!1||!T.defaultPrevented)return m?.(T)}}function R_(n,m){if(typeof n=="function")return n(m);n!=null&&(n.current=m)}function lm(...n){return m=>{let b=!1;const p=n.map(T=>{const H=R_(T,m);return!b&&typeof H=="function"&&(b=!0),H});if(b)return()=>{for(let T=0;T<p.length;T++){const H=p[T];typeof H=="function"?H():R_(n[T],null)}}}}function an(...n){return P.useCallback(lm(...n),n)}function om(n,m=[]){let b=[];function p(H,k){const l=P.createContext(k),d=b.length;b=[...b,k];const _=f=>{const{scope:w,children:x,...R}=f,E=w?.[n]?.[d]||l,a=P.useMemo(()=>R,Object.values(R));return C.jsx(E.Provider,{value:a,children:x})};_.displayName=H+"Provider";function v(f,w){const x=w?.[n]?.[d]||l,R=P.useContext(x);if(R)return R;if(k!==void 0)return k;throw new Error(`\`${f}\` must be used within \`${H}\``)}return[_,v]}const T=()=>{const H=b.map(k=>P.createContext(k));return function(l){const d=l?.[n]||H;return P.useMemo(()=>({[`__scope${n}`]:{...l,[n]:d}}),[l,d])}};return T.scopeName=n,[p,Sv(T,...m)]}function Sv(...n){const m=n[0];if(n.length===1)return m;const b=()=>{const p=n.map(T=>({useScope:T(),scopeName:T.scopeName}));return function(H){const k=p.reduce((l,{useScope:d,scopeName:_})=>{const f=d(H)[`__scope${_}`];return{...l,...f}},{});return P.useMemo(()=>({[`__scope${m.scopeName}`]:k}),[k])}};return b.scopeName=m.scopeName,b}var _u=am();const bv=hu(_u);function Cv(n){const m=wv(n),b=P.forwardRef((p,T)=>{const{children:H,...k}=p,l=P.Children.toArray(H),d=l.find(Ev);if(d){const _=d.props.children,v=l.map(f=>f===d?P.Children.count(_)>1?P.Children.only(null):P.isValidElement(_)?_.props.children:null:f);return C.jsx(m,{...k,ref:T,children:P.isValidElement(_)?P.cloneElement(_,void 0,v):null})}return C.jsx(m,{...k,ref:T,children:H})});return b.displayName=`${n}.Slot`,b}function wv(n){const m=P.forwardRef((b,p)=>{const{children:T,...H}=b;if(P.isValidElement(T)){const k=Av(T),l=Rv(H,T.props);return T.type!==P.Fragment&&(l.ref=p?lm(p,k):k),P.cloneElement(T,l)}return P.Children.count(T)>1?P.Children.only(null):null});return m.displayName=`${n}.SlotClone`,m}var xv=Symbol("radix.slottable");function Ev(n){return P.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===xv}function Rv(n,m){const b={...m};for(const p in m){const T=n[p],H=m[p];/^on[A-Z]/.test(p)?T&&H?b[p]=(...l)=>{const d=H(...l);return T(...l),d}:T&&(b[p]=T):p==="style"?b[p]={...T,...H}:p==="className"&&(b[p]=[T,H].filter(Boolean).join(" "))}return{...n,...b}}function Av(n){let m=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,b=m&&"isReactWarning"in m&&m.isReactWarning;return b?n.ref:(m=Object.getOwnPropertyDescriptor(n,"ref")?.get,b=m&&"isReactWarning"in m&&m.isReactWarning,b?n.props.ref:n.props.ref||n.ref)}var Dv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ns=Dv.reduce((n,m)=>{const b=Cv(`Primitive.${m}`),p=P.forwardRef((T,H)=>{const{asChild:k,...l}=T,d=k?b:m;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(d,{...l,ref:H})});return p.displayName=`Primitive.${m}`,{...n,[m]:p}},{});function Tv(n,m){n&&_u.flushSync(()=>n.dispatchEvent(m))}function wl(n){const m=P.useRef(n);return P.useEffect(()=>{m.current=n}),P.useMemo(()=>(...b)=>m.current?.(...b),[])}function Mv(n,m=globalThis?.document){const b=wl(n);P.useEffect(()=>{const p=T=>{T.key==="Escape"&&b(T)};return m.addEventListener("keydown",p,{capture:!0}),()=>m.removeEventListener("keydown",p,{capture:!0})},[b,m])}var Lv="DismissableLayer",Jc="dismissableLayer.update",Bv="dismissableLayer.pointerDownOutside",kv="dismissableLayer.focusOutside",A_,cm=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),um=P.forwardRef((n,m)=>{const{disableOutsidePointerEvents:b=!1,onEscapeKeyDown:p,onPointerDownOutside:T,onFocusOutside:H,onInteractOutside:k,onDismiss:l,...d}=n,_=P.useContext(cm),[v,f]=P.useState(null),w=v?.ownerDocument??globalThis?.document,[,x]=P.useState({}),R=an(m,D=>f(D)),E=Array.from(_.layers),[a]=[..._.layersWithOutsidePointerEventsDisabled].slice(-1),o=E.indexOf(a),c=v?E.indexOf(v):-1,h=_.layersWithOutsidePointerEventsDisabled.size>0,S=c>=o,y=Nv(D=>{const g=D.target,L=[..._.branches].some(O=>O.contains(g));!S||L||(T?.(D),k?.(D),D.defaultPrevented||l?.())},w),A=Hv(D=>{const g=D.target;[..._.branches].some(O=>O.contains(g))||(H?.(D),k?.(D),D.defaultPrevented||l?.())},w);return Mv(D=>{c===_.layers.size-1&&(p?.(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},w),P.useEffect(()=>{if(v)return b&&(_.layersWithOutsidePointerEventsDisabled.size===0&&(A_=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),_.layersWithOutsidePointerEventsDisabled.add(v)),_.layers.add(v),D_(),()=>{b&&_.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=A_)}},[v,w,b,_]),P.useEffect(()=>()=>{v&&(_.layers.delete(v),_.layersWithOutsidePointerEventsDisabled.delete(v),D_())},[v,_]),P.useEffect(()=>{const D=()=>x({});return document.addEventListener(Jc,D),()=>document.removeEventListener(Jc,D)},[]),C.jsx(Ns.div,{...d,ref:R,style:{pointerEvents:h?S?"auto":"none":void 0,...n.style},onFocusCapture:ns(n.onFocusCapture,A.onFocusCapture),onBlurCapture:ns(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ns(n.onPointerDownCapture,y.onPointerDownCapture)})});um.displayName=Lv;var Ov="DismissableLayerBranch",jv=P.forwardRef((n,m)=>{const b=P.useContext(cm),p=P.useRef(null),T=an(m,p);return P.useEffect(()=>{const H=p.current;if(H)return b.branches.add(H),()=>{b.branches.delete(H)}},[b.branches]),C.jsx(Ns.div,{...n,ref:T})});jv.displayName=Ov;function Nv(n,m=globalThis?.document){const b=wl(n),p=P.useRef(!1),T=P.useRef(()=>{});return P.useEffect(()=>{const H=l=>{if(l.target&&!p.current){let d=function(){hm(Bv,b,_,{discrete:!0})};const _={originalEvent:l};l.pointerType==="touch"?(m.removeEventListener("click",T.current),T.current=d,m.addEventListener("click",T.current,{once:!0})):d()}else m.removeEventListener("click",T.current);p.current=!1},k=window.setTimeout(()=>{m.addEventListener("pointerdown",H)},0);return()=>{window.clearTimeout(k),m.removeEventListener("pointerdown",H),m.removeEventListener("click",T.current)}},[m,b]),{onPointerDownCapture:()=>p.current=!0}}function Hv(n,m=globalThis?.document){const b=wl(n),p=P.useRef(!1);return P.useEffect(()=>{const T=H=>{H.target&&!p.current&&hm(kv,b,{originalEvent:H},{discrete:!1})};return m.addEventListener("focusin",T),()=>m.removeEventListener("focusin",T)},[m,b]),{onFocusCapture:()=>p.current=!0,onBlurCapture:()=>p.current=!1}}function D_(){const n=new CustomEvent(Jc);document.dispatchEvent(n)}function hm(n,m,b,{discrete:p}){const T=b.originalEvent.target,H=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:b});m&&T.addEventListener(n,m,{once:!0}),p?Tv(T,H):T.dispatchEvent(H)}var ks=globalThis?.document?P.useLayoutEffect:()=>{},zv=rm[" useId ".trim().toString()]||(()=>{}),Uv=0;function Pv(n){const[m,b]=P.useState(zv());return ks(()=>{b(p=>p??String(Uv++))},[n]),m?`radix-${m}`:""}const Iv=["top","right","bottom","left"],Os=Math.min,ni=Math.max,vl=Math.round,hl=Math.floor,ki=n=>({x:n,y:n}),qv={left:"right",right:"left",bottom:"top",top:"bottom"},Fv={start:"end",end:"start"};function eu(n,m,b){return ni(n,Os(m,b))}function rs(n,m){return typeof n=="function"?n(m):n}function as(n){return n.split("-")[0]}function Kn(n){return n.split("-")[1]}function mu(n){return n==="x"?"y":"x"}function pu(n){return n==="y"?"height":"width"}const Gv=new Set(["top","bottom"]);function Bi(n){return Gv.has(as(n))?"y":"x"}function gu(n){return mu(Bi(n))}function Wv(n,m,b){b===void 0&&(b=!1);const p=Kn(n),T=gu(n),H=pu(T);let k=T==="x"?p===(b?"end":"start")?"right":"left":p==="start"?"bottom":"top";return m.reference[H]>m.floating[H]&&(k=yl(k)),[k,yl(k)]}function Yv(n){const m=yl(n);return[tu(n),m,tu(m)]}function tu(n){return n.replace(/start|end/g,m=>Fv[m])}const T_=["left","right"],M_=["right","left"],Vv=["top","bottom"],Xv=["bottom","top"];function Kv(n,m,b){switch(n){case"top":case"bottom":return b?m?M_:T_:m?T_:M_;case"left":case"right":return m?Vv:Xv;default:return[]}}function $v(n,m,b,p){const T=Kn(n);let H=Kv(as(n),b==="start",p);return T&&(H=H.map(k=>k+"-"+T),m&&(H=H.concat(H.map(tu)))),H}function yl(n){return n.replace(/left|right|bottom|top/g,m=>qv[m])}function Zv(n){return{top:0,right:0,bottom:0,left:0,...n}}function dm(n){return typeof n!="number"?Zv(n):{top:n,right:n,bottom:n,left:n}}function Sl(n){const{x:m,y:b,width:p,height:T}=n;return{width:p,height:T,top:b,left:m,right:m+p,bottom:b+T,x:m,y:b}}function L_(n,m,b){let{reference:p,floating:T}=n;const H=Bi(m),k=gu(m),l=pu(k),d=as(m),_=H==="y",v=p.x+p.width/2-T.width/2,f=p.y+p.height/2-T.height/2,w=p[l]/2-T[l]/2;let x;switch(d){case"top":x={x:v,y:p.y-T.height};break;case"bottom":x={x:v,y:p.y+p.height};break;case"right":x={x:p.x+p.width,y:f};break;case"left":x={x:p.x-T.width,y:f};break;default:x={x:p.x,y:p.y}}switch(Kn(m)){case"start":x[k]-=w*(b&&_?-1:1);break;case"end":x[k]+=w*(b&&_?-1:1);break}return x}const Qv=async(n,m,b)=>{const{placement:p="bottom",strategy:T="absolute",middleware:H=[],platform:k}=b,l=H.filter(Boolean),d=await(k.isRTL==null?void 0:k.isRTL(m));let _=await k.getElementRects({reference:n,floating:m,strategy:T}),{x:v,y:f}=L_(_,p,d),w=p,x={},R=0;for(let E=0;E<l.length;E++){const{name:a,fn:o}=l[E],{x:c,y:h,data:S,reset:y}=await o({x:v,y:f,initialPlacement:p,placement:w,strategy:T,middlewareData:x,rects:_,platform:k,elements:{reference:n,floating:m}});v=c??v,f=h??f,x={...x,[a]:{...x[a],...S}},y&&R<=50&&(R++,typeof y=="object"&&(y.placement&&(w=y.placement),y.rects&&(_=y.rects===!0?await k.getElementRects({reference:n,floating:m,strategy:T}):y.rects),{x:v,y:f}=L_(_,w,d)),E=-1)}return{x:v,y:f,placement:w,strategy:T,middlewareData:x}};async function Gr(n,m){var b;m===void 0&&(m={});const{x:p,y:T,platform:H,rects:k,elements:l,strategy:d}=n,{boundary:_="clippingAncestors",rootBoundary:v="viewport",elementContext:f="floating",altBoundary:w=!1,padding:x=0}=rs(m,n),R=dm(x),a=l[w?f==="floating"?"reference":"floating":f],o=Sl(await H.getClippingRect({element:(b=await(H.isElement==null?void 0:H.isElement(a)))==null||b?a:a.contextElement||await(H.getDocumentElement==null?void 0:H.getDocumentElement(l.floating)),boundary:_,rootBoundary:v,strategy:d})),c=f==="floating"?{x:p,y:T,width:k.floating.width,height:k.floating.height}:k.reference,h=await(H.getOffsetParent==null?void 0:H.getOffsetParent(l.floating)),S=await(H.isElement==null?void 0:H.isElement(h))?await(H.getScale==null?void 0:H.getScale(h))||{x:1,y:1}:{x:1,y:1},y=Sl(H.convertOffsetParentRelativeRectToViewportRelativeRect?await H.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:c,offsetParent:h,strategy:d}):c);return{top:(o.top-y.top+R.top)/S.y,bottom:(y.bottom-o.bottom+R.bottom)/S.y,left:(o.left-y.left+R.left)/S.x,right:(y.right-o.right+R.right)/S.x}}const Jv=n=>({name:"arrow",options:n,async fn(m){const{x:b,y:p,placement:T,rects:H,platform:k,elements:l,middlewareData:d}=m,{element:_,padding:v=0}=rs(n,m)||{};if(_==null)return{};const f=dm(v),w={x:b,y:p},x=gu(T),R=pu(x),E=await k.getDimensions(_),a=x==="y",o=a?"top":"left",c=a?"bottom":"right",h=a?"clientHeight":"clientWidth",S=H.reference[R]+H.reference[x]-w[x]-H.floating[R],y=w[x]-H.reference[x],A=await(k.getOffsetParent==null?void 0:k.getOffsetParent(_));let D=A?A[h]:0;(!D||!await(k.isElement==null?void 0:k.isElement(A)))&&(D=l.floating[h]||H.floating[R]);const g=S/2-y/2,L=D/2-E[R]/2-1,O=Os(f[o],L),z=Os(f[c],L),U=O,I=D-E[R]-z,$=D/2-E[R]/2+g,te=eu(U,$,I),G=!d.arrow&&Kn(T)!=null&&$!==te&&H.reference[R]/2-($<U?O:z)-E[R]/2<0,K=G?$<U?$-U:$-I:0;return{[x]:w[x]+K,data:{[x]:te,centerOffset:$-te-K,...G&&{alignmentOffset:K}},reset:G}}}),e0=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(m){var b,p;const{placement:T,middlewareData:H,rects:k,initialPlacement:l,platform:d,elements:_}=m,{mainAxis:v=!0,crossAxis:f=!0,fallbackPlacements:w,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:E=!0,...a}=rs(n,m);if((b=H.arrow)!=null&&b.alignmentOffset)return{};const o=as(T),c=Bi(l),h=as(l)===l,S=await(d.isRTL==null?void 0:d.isRTL(_.floating)),y=w||(h||!E?[yl(l)]:Yv(l)),A=R!=="none";!w&&A&&y.push(...$v(l,E,R,S));const D=[l,...y],g=await Gr(m,a),L=[];let O=((p=H.flip)==null?void 0:p.overflows)||[];if(v&&L.push(g[o]),f){const $=Wv(T,k,S);L.push(g[$[0]],g[$[1]])}if(O=[...O,{placement:T,overflows:L}],!L.every($=>$<=0)){var z,U;const $=(((z=H.flip)==null?void 0:z.index)||0)+1,te=D[$];if(te&&(!(f==="alignment"?c!==Bi(te):!1)||O.every(B=>Bi(B.placement)===c?B.overflows[0]>0:!0)))return{data:{index:$,overflows:O},reset:{placement:te}};let G=(U=O.filter(K=>K.overflows[0]<=0).sort((K,B)=>K.overflows[1]-B.overflows[1])[0])==null?void 0:U.placement;if(!G)switch(x){case"bestFit":{var I;const K=(I=O.filter(B=>{if(A){const F=Bi(B.placement);return F===c||F==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(F=>F>0).reduce((F,W)=>F+W,0)]).sort((B,F)=>B[1]-F[1])[0])==null?void 0:I[0];K&&(G=K);break}case"initialPlacement":G=l;break}if(T!==G)return{reset:{placement:G}}}return{}}}};function B_(n,m){return{top:n.top-m.height,right:n.right-m.width,bottom:n.bottom-m.height,left:n.left-m.width}}function k_(n){return Iv.some(m=>n[m]>=0)}const t0=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(m){const{rects:b}=m,{strategy:p="referenceHidden",...T}=rs(n,m);switch(p){case"referenceHidden":{const H=await Gr(m,{...T,elementContext:"reference"}),k=B_(H,b.reference);return{data:{referenceHiddenOffsets:k,referenceHidden:k_(k)}}}case"escaped":{const H=await Gr(m,{...T,altBoundary:!0}),k=B_(H,b.floating);return{data:{escapedOffsets:k,escaped:k_(k)}}}default:return{}}}}},fm=new Set(["left","top"]);async function i0(n,m){const{placement:b,platform:p,elements:T}=n,H=await(p.isRTL==null?void 0:p.isRTL(T.floating)),k=as(b),l=Kn(b),d=Bi(b)==="y",_=fm.has(k)?-1:1,v=H&&d?-1:1,f=rs(m,n);let{mainAxis:w,crossAxis:x,alignmentAxis:R}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof R=="number"&&(x=l==="end"?R*-1:R),d?{x:x*v,y:w*_}:{x:w*_,y:x*v}}const s0=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(m){var b,p;const{x:T,y:H,placement:k,middlewareData:l}=m,d=await i0(m,n);return k===((b=l.offset)==null?void 0:b.placement)&&(p=l.arrow)!=null&&p.alignmentOffset?{}:{x:T+d.x,y:H+d.y,data:{...d,placement:k}}}}},n0=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(m){const{x:b,y:p,placement:T}=m,{mainAxis:H=!0,crossAxis:k=!1,limiter:l={fn:a=>{let{x:o,y:c}=a;return{x:o,y:c}}},...d}=rs(n,m),_={x:b,y:p},v=await Gr(m,d),f=Bi(as(T)),w=mu(f);let x=_[w],R=_[f];if(H){const a=w==="y"?"top":"left",o=w==="y"?"bottom":"right",c=x+v[a],h=x-v[o];x=eu(c,x,h)}if(k){const a=f==="y"?"top":"left",o=f==="y"?"bottom":"right",c=R+v[a],h=R-v[o];R=eu(c,R,h)}const E=l.fn({...m,[w]:x,[f]:R});return{...E,data:{x:E.x-b,y:E.y-p,enabled:{[w]:H,[f]:k}}}}}},r0=function(n){return n===void 0&&(n={}),{options:n,fn(m){const{x:b,y:p,placement:T,rects:H,middlewareData:k}=m,{offset:l=0,mainAxis:d=!0,crossAxis:_=!0}=rs(n,m),v={x:b,y:p},f=Bi(T),w=mu(f);let x=v[w],R=v[f];const E=rs(l,m),a=typeof E=="number"?{mainAxis:E,crossAxis:0}:{mainAxis:0,crossAxis:0,...E};if(d){const h=w==="y"?"height":"width",S=H.reference[w]-H.floating[h]+a.mainAxis,y=H.reference[w]+H.reference[h]-a.mainAxis;x<S?x=S:x>y&&(x=y)}if(_){var o,c;const h=w==="y"?"width":"height",S=fm.has(as(T)),y=H.reference[f]-H.floating[h]+(S&&((o=k.offset)==null?void 0:o[f])||0)+(S?0:a.crossAxis),A=H.reference[f]+H.reference[h]+(S?0:((c=k.offset)==null?void 0:c[f])||0)-(S?a.crossAxis:0);R<y?R=y:R>A&&(R=A)}return{[w]:x,[f]:R}}}},a0=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(m){var b,p;const{placement:T,rects:H,platform:k,elements:l}=m,{apply:d=()=>{},..._}=rs(n,m),v=await Gr(m,_),f=as(T),w=Kn(T),x=Bi(T)==="y",{width:R,height:E}=H.floating;let a,o;f==="top"||f==="bottom"?(a=f,o=w===(await(k.isRTL==null?void 0:k.isRTL(l.floating))?"start":"end")?"left":"right"):(o=f,a=w==="end"?"top":"bottom");const c=E-v.top-v.bottom,h=R-v.left-v.right,S=Os(E-v[a],c),y=Os(R-v[o],h),A=!m.middlewareData.shift;let D=S,g=y;if((b=m.middlewareData.shift)!=null&&b.enabled.x&&(g=h),(p=m.middlewareData.shift)!=null&&p.enabled.y&&(D=c),A&&!w){const O=ni(v.left,0),z=ni(v.right,0),U=ni(v.top,0),I=ni(v.bottom,0);x?g=R-2*(O!==0||z!==0?O+z:ni(v.left,v.right)):D=E-2*(U!==0||I!==0?U+I:ni(v.top,v.bottom))}await d({...m,availableWidth:g,availableHeight:D});const L=await k.getDimensions(l.floating);return R!==L.width||E!==L.height?{reset:{rects:!0}}:{}}}};function xl(){return typeof window<"u"}function $n(n){return _m(n)?(n.nodeName||"").toLowerCase():"#document"}function ri(n){var m;return(n==null||(m=n.ownerDocument)==null?void 0:m.defaultView)||window}function ji(n){var m;return(m=(_m(n)?n.ownerDocument:n.document)||window.document)==null?void 0:m.documentElement}function _m(n){return xl()?n instanceof Node||n instanceof ri(n).Node:!1}function Ei(n){return xl()?n instanceof Element||n instanceof ri(n).Element:!1}function Oi(n){return xl()?n instanceof HTMLElement||n instanceof ri(n).HTMLElement:!1}function O_(n){return!xl()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ri(n).ShadowRoot}const l0=new Set(["inline","contents"]);function Kr(n){const{overflow:m,overflowX:b,overflowY:p,display:T}=Ri(n);return/auto|scroll|overlay|hidden|clip/.test(m+p+b)&&!l0.has(T)}const o0=new Set(["table","td","th"]);function c0(n){return o0.has($n(n))}const u0=[":popover-open",":modal"];function El(n){return u0.some(m=>{try{return n.matches(m)}catch{return!1}})}const h0=["transform","translate","scale","rotate","perspective"],d0=["transform","translate","scale","rotate","perspective","filter"],f0=["paint","layout","strict","content"];function vu(n){const m=yu(),b=Ei(n)?Ri(n):n;return h0.some(p=>b[p]?b[p]!=="none":!1)||(b.containerType?b.containerType!=="normal":!1)||!m&&(b.backdropFilter?b.backdropFilter!=="none":!1)||!m&&(b.filter?b.filter!=="none":!1)||d0.some(p=>(b.willChange||"").includes(p))||f0.some(p=>(b.contain||"").includes(p))}function _0(n){let m=js(n);for(;Oi(m)&&!Yn(m);){if(vu(m))return m;if(El(m))return null;m=js(m)}return null}function yu(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const m0=new Set(["html","body","#document"]);function Yn(n){return m0.has($n(n))}function Ri(n){return ri(n).getComputedStyle(n)}function Rl(n){return Ei(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function js(n){if($n(n)==="html")return n;const m=n.assignedSlot||n.parentNode||O_(n)&&n.host||ji(n);return O_(m)?m.host:m}function mm(n){const m=js(n);return Yn(m)?n.ownerDocument?n.ownerDocument.body:n.body:Oi(m)&&Kr(m)?m:mm(m)}function Wr(n,m,b){var p;m===void 0&&(m=[]),b===void 0&&(b=!0);const T=mm(n),H=T===((p=n.ownerDocument)==null?void 0:p.body),k=ri(T);if(H){const l=iu(k);return m.concat(k,k.visualViewport||[],Kr(T)?T:[],l&&b?Wr(l):[])}return m.concat(T,Wr(T,[],b))}function iu(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function pm(n){const m=Ri(n);let b=parseFloat(m.width)||0,p=parseFloat(m.height)||0;const T=Oi(n),H=T?n.offsetWidth:b,k=T?n.offsetHeight:p,l=vl(b)!==H||vl(p)!==k;return l&&(b=H,p=k),{width:b,height:p,$:l}}function Su(n){return Ei(n)?n:n.contextElement}function Gn(n){const m=Su(n);if(!Oi(m))return ki(1);const b=m.getBoundingClientRect(),{width:p,height:T,$:H}=pm(m);let k=(H?vl(b.width):b.width)/p,l=(H?vl(b.height):b.height)/T;return(!k||!Number.isFinite(k))&&(k=1),(!l||!Number.isFinite(l))&&(l=1),{x:k,y:l}}const p0=ki(0);function gm(n){const m=ri(n);return!yu()||!m.visualViewport?p0:{x:m.visualViewport.offsetLeft,y:m.visualViewport.offsetTop}}function g0(n,m,b){return m===void 0&&(m=!1),!b||m&&b!==ri(n)?!1:m}function rn(n,m,b,p){m===void 0&&(m=!1),b===void 0&&(b=!1);const T=n.getBoundingClientRect(),H=Su(n);let k=ki(1);m&&(p?Ei(p)&&(k=Gn(p)):k=Gn(n));const l=g0(H,b,p)?gm(H):ki(0);let d=(T.left+l.x)/k.x,_=(T.top+l.y)/k.y,v=T.width/k.x,f=T.height/k.y;if(H){const w=ri(H),x=p&&Ei(p)?ri(p):p;let R=w,E=iu(R);for(;E&&p&&x!==R;){const a=Gn(E),o=E.getBoundingClientRect(),c=Ri(E),h=o.left+(E.clientLeft+parseFloat(c.paddingLeft))*a.x,S=o.top+(E.clientTop+parseFloat(c.paddingTop))*a.y;d*=a.x,_*=a.y,v*=a.x,f*=a.y,d+=h,_+=S,R=ri(E),E=iu(R)}}return Sl({width:v,height:f,x:d,y:_})}function Al(n,m){const b=Rl(n).scrollLeft;return m?m.left+b:rn(ji(n)).left+b}function vm(n,m){const b=n.getBoundingClientRect(),p=b.left+m.scrollLeft-Al(n,b),T=b.top+m.scrollTop;return{x:p,y:T}}function v0(n){let{elements:m,rect:b,offsetParent:p,strategy:T}=n;const H=T==="fixed",k=ji(p),l=m?El(m.floating):!1;if(p===k||l&&H)return b;let d={scrollLeft:0,scrollTop:0},_=ki(1);const v=ki(0),f=Oi(p);if((f||!f&&!H)&&(($n(p)!=="body"||Kr(k))&&(d=Rl(p)),Oi(p))){const x=rn(p);_=Gn(p),v.x=x.x+p.clientLeft,v.y=x.y+p.clientTop}const w=k&&!f&&!H?vm(k,d):ki(0);return{width:b.width*_.x,height:b.height*_.y,x:b.x*_.x-d.scrollLeft*_.x+v.x+w.x,y:b.y*_.y-d.scrollTop*_.y+v.y+w.y}}function y0(n){return Array.from(n.getClientRects())}function S0(n){const m=ji(n),b=Rl(n),p=n.ownerDocument.body,T=ni(m.scrollWidth,m.clientWidth,p.scrollWidth,p.clientWidth),H=ni(m.scrollHeight,m.clientHeight,p.scrollHeight,p.clientHeight);let k=-b.scrollLeft+Al(n);const l=-b.scrollTop;return Ri(p).direction==="rtl"&&(k+=ni(m.clientWidth,p.clientWidth)-T),{width:T,height:H,x:k,y:l}}const j_=25;function b0(n,m){const b=ri(n),p=ji(n),T=b.visualViewport;let H=p.clientWidth,k=p.clientHeight,l=0,d=0;if(T){H=T.width,k=T.height;const v=yu();(!v||v&&m==="fixed")&&(l=T.offsetLeft,d=T.offsetTop)}const _=Al(p);if(_<=0){const v=p.ownerDocument,f=v.body,w=getComputedStyle(f),x=v.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,R=Math.abs(p.clientWidth-f.clientWidth-x);R<=j_&&(H-=R)}else _<=j_&&(H+=_);return{width:H,height:k,x:l,y:d}}const C0=new Set(["absolute","fixed"]);function w0(n,m){const b=rn(n,!0,m==="fixed"),p=b.top+n.clientTop,T=b.left+n.clientLeft,H=Oi(n)?Gn(n):ki(1),k=n.clientWidth*H.x,l=n.clientHeight*H.y,d=T*H.x,_=p*H.y;return{width:k,height:l,x:d,y:_}}function N_(n,m,b){let p;if(m==="viewport")p=b0(n,b);else if(m==="document")p=S0(ji(n));else if(Ei(m))p=w0(m,b);else{const T=gm(n);p={x:m.x-T.x,y:m.y-T.y,width:m.width,height:m.height}}return Sl(p)}function ym(n,m){const b=js(n);return b===m||!Ei(b)||Yn(b)?!1:Ri(b).position==="fixed"||ym(b,m)}function x0(n,m){const b=m.get(n);if(b)return b;let p=Wr(n,[],!1).filter(l=>Ei(l)&&$n(l)!=="body"),T=null;const H=Ri(n).position==="fixed";let k=H?js(n):n;for(;Ei(k)&&!Yn(k);){const l=Ri(k),d=vu(k);!d&&l.position==="fixed"&&(T=null),(H?!d&&!T:!d&&l.position==="static"&&!!T&&C0.has(T.position)||Kr(k)&&!d&&ym(n,k))?p=p.filter(v=>v!==k):T=l,k=js(k)}return m.set(n,p),p}function E0(n){let{element:m,boundary:b,rootBoundary:p,strategy:T}=n;const k=[...b==="clippingAncestors"?El(m)?[]:x0(m,this._c):[].concat(b),p],l=k[0],d=k.reduce((_,v)=>{const f=N_(m,v,T);return _.top=ni(f.top,_.top),_.right=Os(f.right,_.right),_.bottom=Os(f.bottom,_.bottom),_.left=ni(f.left,_.left),_},N_(m,l,T));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function R0(n){const{width:m,height:b}=pm(n);return{width:m,height:b}}function A0(n,m,b){const p=Oi(m),T=ji(m),H=b==="fixed",k=rn(n,!0,H,m);let l={scrollLeft:0,scrollTop:0};const d=ki(0);function _(){d.x=Al(T)}if(p||!p&&!H)if(($n(m)!=="body"||Kr(T))&&(l=Rl(m)),p){const x=rn(m,!0,H,m);d.x=x.x+m.clientLeft,d.y=x.y+m.clientTop}else T&&_();H&&!p&&T&&_();const v=T&&!p&&!H?vm(T,l):ki(0),f=k.left+l.scrollLeft-d.x-v.x,w=k.top+l.scrollTop-d.y-v.y;return{x:f,y:w,width:k.width,height:k.height}}function Xc(n){return Ri(n).position==="static"}function H_(n,m){if(!Oi(n)||Ri(n).position==="fixed")return null;if(m)return m(n);let b=n.offsetParent;return ji(n)===b&&(b=b.ownerDocument.body),b}function Sm(n,m){const b=ri(n);if(El(n))return b;if(!Oi(n)){let T=js(n);for(;T&&!Yn(T);){if(Ei(T)&&!Xc(T))return T;T=js(T)}return b}let p=H_(n,m);for(;p&&c0(p)&&Xc(p);)p=H_(p,m);return p&&Yn(p)&&Xc(p)&&!vu(p)?b:p||_0(n)||b}const D0=async function(n){const m=this.getOffsetParent||Sm,b=this.getDimensions,p=await b(n.floating);return{reference:A0(n.reference,await m(n.floating),n.strategy),floating:{x:0,y:0,width:p.width,height:p.height}}};function T0(n){return Ri(n).direction==="rtl"}const M0={convertOffsetParentRelativeRectToViewportRelativeRect:v0,getDocumentElement:ji,getClippingRect:E0,getOffsetParent:Sm,getElementRects:D0,getClientRects:y0,getDimensions:R0,getScale:Gn,isElement:Ei,isRTL:T0};function bm(n,m){return n.x===m.x&&n.y===m.y&&n.width===m.width&&n.height===m.height}function L0(n,m){let b=null,p;const T=ji(n);function H(){var l;clearTimeout(p),(l=b)==null||l.disconnect(),b=null}function k(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),H();const _=n.getBoundingClientRect(),{left:v,top:f,width:w,height:x}=_;if(l||m(),!w||!x)return;const R=hl(f),E=hl(T.clientWidth-(v+w)),a=hl(T.clientHeight-(f+x)),o=hl(v),h={rootMargin:-R+"px "+-E+"px "+-a+"px "+-o+"px",threshold:ni(0,Os(1,d))||1};let S=!0;function y(A){const D=A[0].intersectionRatio;if(D!==d){if(!S)return k();D?k(!1,D):p=setTimeout(()=>{k(!1,1e-7)},1e3)}D===1&&!bm(_,n.getBoundingClientRect())&&k(),S=!1}try{b=new IntersectionObserver(y,{...h,root:T.ownerDocument})}catch{b=new IntersectionObserver(y,h)}b.observe(n)}return k(!0),H}function B0(n,m,b,p){p===void 0&&(p={});const{ancestorScroll:T=!0,ancestorResize:H=!0,elementResize:k=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=p,_=Su(n),v=T||H?[..._?Wr(_):[],...Wr(m)]:[];v.forEach(o=>{T&&o.addEventListener("scroll",b,{passive:!0}),H&&o.addEventListener("resize",b)});const f=_&&l?L0(_,b):null;let w=-1,x=null;k&&(x=new ResizeObserver(o=>{let[c]=o;c&&c.target===_&&x&&(x.unobserve(m),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var h;(h=x)==null||h.observe(m)})),b()}),_&&!d&&x.observe(_),x.observe(m));let R,E=d?rn(n):null;d&&a();function a(){const o=rn(n);E&&!bm(E,o)&&b(),E=o,R=requestAnimationFrame(a)}return b(),()=>{var o;v.forEach(c=>{T&&c.removeEventListener("scroll",b),H&&c.removeEventListener("resize",b)}),f?.(),(o=x)==null||o.disconnect(),x=null,d&&cancelAnimationFrame(R)}}const k0=s0,O0=n0,j0=e0,N0=a0,H0=t0,z_=Jv,z0=r0,U0=(n,m,b)=>{const p=new Map,T={platform:M0,...b},H={...T.platform,_c:p};return Qv(n,m,{...T,platform:H})};var P0=typeof document<"u",I0=function(){},ml=P0?P.useLayoutEffect:I0;function bl(n,m){if(n===m)return!0;if(typeof n!=typeof m)return!1;if(typeof n=="function"&&n.toString()===m.toString())return!0;let b,p,T;if(n&&m&&typeof n=="object"){if(Array.isArray(n)){if(b=n.length,b!==m.length)return!1;for(p=b;p--!==0;)if(!bl(n[p],m[p]))return!1;return!0}if(T=Object.keys(n),b=T.length,b!==Object.keys(m).length)return!1;for(p=b;p--!==0;)if(!{}.hasOwnProperty.call(m,T[p]))return!1;for(p=b;p--!==0;){const H=T[p];if(!(H==="_owner"&&n.$$typeof)&&!bl(n[H],m[H]))return!1}return!0}return n!==n&&m!==m}function Cm(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function U_(n,m){const b=Cm(n);return Math.round(m*b)/b}function Kc(n){const m=P.useRef(n);return ml(()=>{m.current=n}),m}function q0(n){n===void 0&&(n={});const{placement:m="bottom",strategy:b="absolute",middleware:p=[],platform:T,elements:{reference:H,floating:k}={},transform:l=!0,whileElementsMounted:d,open:_}=n,[v,f]=P.useState({x:0,y:0,strategy:b,placement:m,middlewareData:{},isPositioned:!1}),[w,x]=P.useState(p);bl(w,p)||x(p);const[R,E]=P.useState(null),[a,o]=P.useState(null),c=P.useCallback(B=>{B!==A.current&&(A.current=B,E(B))},[]),h=P.useCallback(B=>{B!==D.current&&(D.current=B,o(B))},[]),S=H||R,y=k||a,A=P.useRef(null),D=P.useRef(null),g=P.useRef(v),L=d!=null,O=Kc(d),z=Kc(T),U=Kc(_),I=P.useCallback(()=>{if(!A.current||!D.current)return;const B={placement:m,strategy:b,middleware:w};z.current&&(B.platform=z.current),U0(A.current,D.current,B).then(F=>{const W={...F,isPositioned:U.current!==!1};$.current&&!bl(g.current,W)&&(g.current=W,_u.flushSync(()=>{f(W)}))})},[w,m,b,z,U]);ml(()=>{_===!1&&g.current.isPositioned&&(g.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[_]);const $=P.useRef(!1);ml(()=>($.current=!0,()=>{$.current=!1}),[]),ml(()=>{if(S&&(A.current=S),y&&(D.current=y),S&&y){if(O.current)return O.current(S,y,I);I()}},[S,y,I,O,L]);const te=P.useMemo(()=>({reference:A,floating:D,setReference:c,setFloating:h}),[c,h]),G=P.useMemo(()=>({reference:S,floating:y}),[S,y]),K=P.useMemo(()=>{const B={position:b,left:0,top:0};if(!G.floating)return B;const F=U_(G.floating,v.x),W=U_(G.floating,v.y);return l?{...B,transform:"translate("+F+"px, "+W+"px)",...Cm(G.floating)>=1.5&&{willChange:"transform"}}:{position:b,left:F,top:W}},[b,l,G.floating,v.x,v.y]);return P.useMemo(()=>({...v,update:I,refs:te,elements:G,floatingStyles:K}),[v,I,te,G,K])}const F0=n=>{function m(b){return{}.hasOwnProperty.call(b,"current")}return{name:"arrow",options:n,fn(b){const{element:p,padding:T}=typeof n=="function"?n(b):n;return p&&m(p)?p.current!=null?z_({element:p.current,padding:T}).fn(b):{}:p?z_({element:p,padding:T}).fn(b):{}}}},G0=(n,m)=>({...k0(n),options:[n,m]}),W0=(n,m)=>({...O0(n),options:[n,m]}),Y0=(n,m)=>({...z0(n),options:[n,m]}),V0=(n,m)=>({...j0(n),options:[n,m]}),X0=(n,m)=>({...N0(n),options:[n,m]}),K0=(n,m)=>({...H0(n),options:[n,m]}),$0=(n,m)=>({...F0(n),options:[n,m]});var Z0="Arrow",wm=P.forwardRef((n,m)=>{const{children:b,width:p=10,height:T=5,...H}=n;return C.jsx(Ns.svg,{...H,ref:m,width:p,height:T,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?b:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});wm.displayName=Z0;var Q0=wm;function J0(n){const[m,b]=P.useState(void 0);return ks(()=>{if(n){b({width:n.offsetWidth,height:n.offsetHeight});const p=new ResizeObserver(T=>{if(!Array.isArray(T)||!T.length)return;const H=T[0];let k,l;if("borderBoxSize"in H){const d=H.borderBoxSize,_=Array.isArray(d)?d[0]:d;k=_.inlineSize,l=_.blockSize}else k=n.offsetWidth,l=n.offsetHeight;b({width:k,height:l})});return p.observe(n,{box:"border-box"}),()=>p.unobserve(n)}else b(void 0)},[n]),m}var bu="Popper",[xm,Em]=om(bu),[ey,Rm]=xm(bu),Am=n=>{const{__scopePopper:m,children:b}=n,[p,T]=P.useState(null);return C.jsx(ey,{scope:m,anchor:p,onAnchorChange:T,children:b})};Am.displayName=bu;var Dm="PopperAnchor",Tm=P.forwardRef((n,m)=>{const{__scopePopper:b,virtualRef:p,...T}=n,H=Rm(Dm,b),k=P.useRef(null),l=an(m,k),d=P.useRef(null);return P.useEffect(()=>{const _=d.current;d.current=p?.current||k.current,_!==d.current&&H.onAnchorChange(d.current)}),p?null:C.jsx(Ns.div,{...T,ref:l})});Tm.displayName=Dm;var Cu="PopperContent",[ty,iy]=xm(Cu),Mm=P.forwardRef((n,m)=>{const{__scopePopper:b,side:p="bottom",sideOffset:T=0,align:H="center",alignOffset:k=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:_=[],collisionPadding:v=0,sticky:f="partial",hideWhenDetached:w=!1,updatePositionStrategy:x="optimized",onPlaced:R,...E}=n,a=Rm(Cu,b),[o,c]=P.useState(null),h=an(m,N=>c(N)),[S,y]=P.useState(null),A=J0(S),D=A?.width??0,g=A?.height??0,L=p+(H!=="center"?"-"+H:""),O=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},z=Array.isArray(_)?_:[_],U=z.length>0,I={padding:O,boundary:z.filter(ny),altBoundary:U},{refs:$,floatingStyles:te,placement:G,isPositioned:K,middlewareData:B}=q0({strategy:"fixed",placement:L,whileElementsMounted:(...N)=>B0(...N,{animationFrame:x==="always"}),elements:{reference:a.anchor},middleware:[G0({mainAxis:T+g,alignmentAxis:k}),d&&W0({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Y0():void 0,...I}),d&&V0({...I}),X0({...I,apply:({elements:N,rects:Q,availableWidth:ie,availableHeight:ne})=>{const{width:Re,height:ve}=Q.reference,Le=N.floating.style;Le.setProperty("--radix-popper-available-width",`${ie}px`),Le.setProperty("--radix-popper-available-height",`${ne}px`),Le.setProperty("--radix-popper-anchor-width",`${Re}px`),Le.setProperty("--radix-popper-anchor-height",`${ve}px`)}}),S&&$0({element:S,padding:l}),ry({arrowWidth:D,arrowHeight:g}),w&&K0({strategy:"referenceHidden",...I})]}),[F,W]=km(G),j=wl(R);ks(()=>{K&&j?.()},[K,j]);const V=B.arrow?.x,ee=B.arrow?.y,Y=B.arrow?.centerOffset!==0,[se,me]=P.useState();return ks(()=>{o&&me(window.getComputedStyle(o).zIndex)},[o]),C.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...te,transform:K?te.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[B.transformOrigin?.x,B.transformOrigin?.y].join(" "),...B.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:C.jsx(ty,{scope:b,placedSide:F,onArrowChange:y,arrowX:V,arrowY:ee,shouldHideArrow:Y,children:C.jsx(Ns.div,{"data-side":F,"data-align":W,...E,ref:h,style:{...E.style,animation:K?void 0:"none"}})})})});Mm.displayName=Cu;var Lm="PopperArrow",sy={top:"bottom",right:"left",bottom:"top",left:"right"},Bm=P.forwardRef(function(m,b){const{__scopePopper:p,...T}=m,H=iy(Lm,p),k=sy[H.placedSide];return C.jsx("span",{ref:H.onArrowChange,style:{position:"absolute",left:H.arrowX,top:H.arrowY,[k]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[H.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[H.placedSide],visibility:H.shouldHideArrow?"hidden":void 0},children:C.jsx(Q0,{...T,ref:b,style:{...T.style,display:"block"}})})});Bm.displayName=Lm;function ny(n){return n!==null}var ry=n=>({name:"transformOrigin",options:n,fn(m){const{placement:b,rects:p,middlewareData:T}=m,k=T.arrow?.centerOffset!==0,l=k?0:n.arrowWidth,d=k?0:n.arrowHeight,[_,v]=km(b),f={start:"0%",center:"50%",end:"100%"}[v],w=(T.arrow?.x??0)+l/2,x=(T.arrow?.y??0)+d/2;let R="",E="";return _==="bottom"?(R=k?f:`${w}px`,E=`${-d}px`):_==="top"?(R=k?f:`${w}px`,E=`${p.floating.height+d}px`):_==="right"?(R=`${-d}px`,E=k?f:`${x}px`):_==="left"&&(R=`${p.floating.width+d}px`,E=k?f:`${x}px`),{data:{x:R,y:E}}}});function km(n){const[m,b="center"]=n.split("-");return[m,b]}var ay=Am,ly=Tm,oy=Mm,cy=Bm,uy="Portal",Om=P.forwardRef((n,m)=>{const{container:b,...p}=n,[T,H]=P.useState(!1);ks(()=>H(!0),[]);const k=b||T&&globalThis?.document?.body;return k?bv.createPortal(C.jsx(Ns.div,{...p,ref:m}),k):null});Om.displayName=uy;function hy(n,m){return P.useReducer((b,p)=>m[b][p]??b,n)}var wu=n=>{const{present:m,children:b}=n,p=dy(m),T=typeof b=="function"?b({present:p.isPresent}):P.Children.only(b),H=an(p.ref,fy(T));return typeof b=="function"||p.isPresent?P.cloneElement(T,{ref:H}):null};wu.displayName="Presence";function dy(n){const[m,b]=P.useState(),p=P.useRef(null),T=P.useRef(n),H=P.useRef("none"),k=n?"mounted":"unmounted",[l,d]=hy(k,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const _=dl(p.current);H.current=l==="mounted"?_:"none"},[l]),ks(()=>{const _=p.current,v=T.current;if(v!==n){const w=H.current,x=dl(_);n?d("MOUNT"):x==="none"||_?.display==="none"?d("UNMOUNT"):d(v&&w!==x?"ANIMATION_OUT":"UNMOUNT"),T.current=n}},[n,d]),ks(()=>{if(m){let _;const v=m.ownerDocument.defaultView??window,f=x=>{const E=dl(p.current).includes(CSS.escape(x.animationName));if(x.target===m&&E&&(d("ANIMATION_END"),!T.current)){const a=m.style.animationFillMode;m.style.animationFillMode="forwards",_=v.setTimeout(()=>{m.style.animationFillMode==="forwards"&&(m.style.animationFillMode=a)})}},w=x=>{x.target===m&&(H.current=dl(p.current))};return m.addEventListener("animationstart",w),m.addEventListener("animationcancel",f),m.addEventListener("animationend",f),()=>{v.clearTimeout(_),m.removeEventListener("animationstart",w),m.removeEventListener("animationcancel",f),m.removeEventListener("animationend",f)}}else d("ANIMATION_END")},[m,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:P.useCallback(_=>{p.current=_?getComputedStyle(_):null,b(_)},[])}}function dl(n){return n?.animationName||"none"}function fy(n){let m=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,b=m&&"isReactWarning"in m&&m.isReactWarning;return b?n.ref:(m=Object.getOwnPropertyDescriptor(n,"ref")?.get,b=m&&"isReactWarning"in m&&m.isReactWarning,b?n.props.ref:n.props.ref||n.ref)}var _y=Symbol("radix.slottable");function my(n){const m=({children:b})=>C.jsx(C.Fragment,{children:b});return m.displayName=`${n}.Slottable`,m.__radixId=_y,m}var py=rm[" useInsertionEffect ".trim().toString()]||ks;function gy({prop:n,defaultProp:m,onChange:b=()=>{},caller:p}){const[T,H,k]=vy({defaultProp:m,onChange:b}),l=n!==void 0,d=l?n:T;{const v=P.useRef(n!==void 0);P.useEffect(()=>{const f=v.current;f!==l&&console.warn(`${p} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=l},[l,p])}const _=P.useCallback(v=>{if(l){const f=yy(v)?v(n):v;f!==n&&k.current?.(f)}else H(v)},[l,n,H,k]);return[d,_]}function vy({defaultProp:n,onChange:m}){const[b,p]=P.useState(n),T=P.useRef(b),H=P.useRef(m);return py(()=>{H.current=m},[m]),P.useEffect(()=>{T.current!==b&&(H.current?.(b),T.current=b)},[b,T]),[b,p,H]}function yy(n){return typeof n=="function"}var Sy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),by="VisuallyHidden",jm=P.forwardRef((n,m)=>C.jsx(Ns.span,{...n,ref:m,style:{...Sy,...n.style}}));jm.displayName=by;var Cy=jm,[Dl]=om("Tooltip",[Em]),Tl=Em(),Nm="TooltipProvider",wy=700,su="tooltip.open",[xy,xu]=Dl(Nm),Hm=n=>{const{__scopeTooltip:m,delayDuration:b=wy,skipDelayDuration:p=300,disableHoverableContent:T=!1,children:H}=n,k=P.useRef(!0),l=P.useRef(!1),d=P.useRef(0);return P.useEffect(()=>{const _=d.current;return()=>window.clearTimeout(_)},[]),C.jsx(xy,{scope:m,isOpenDelayedRef:k,delayDuration:b,onOpen:P.useCallback(()=>{window.clearTimeout(d.current),k.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>k.current=!0,p)},[p]),isPointerInTransitRef:l,onPointerInTransitChange:P.useCallback(_=>{l.current=_},[]),disableHoverableContent:T,children:H})};Hm.displayName=Nm;var Yr="Tooltip",[Ey,$r]=Dl(Yr),zm=n=>{const{__scopeTooltip:m,children:b,open:p,defaultOpen:T,onOpenChange:H,disableHoverableContent:k,delayDuration:l}=n,d=xu(Yr,n.__scopeTooltip),_=Tl(m),[v,f]=P.useState(null),w=Pv(),x=P.useRef(0),R=k??d.disableHoverableContent,E=l??d.delayDuration,a=P.useRef(!1),[o,c]=gy({prop:p,defaultProp:T??!1,onChange:D=>{D?(d.onOpen(),document.dispatchEvent(new CustomEvent(su))):d.onClose(),H?.(D)},caller:Yr}),h=P.useMemo(()=>o?a.current?"delayed-open":"instant-open":"closed",[o]),S=P.useCallback(()=>{window.clearTimeout(x.current),x.current=0,a.current=!1,c(!0)},[c]),y=P.useCallback(()=>{window.clearTimeout(x.current),x.current=0,c(!1)},[c]),A=P.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{a.current=!0,c(!0),x.current=0},E)},[E,c]);return P.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),C.jsx(ay,{..._,children:C.jsx(Ey,{scope:m,contentId:w,open:o,stateAttribute:h,trigger:v,onTriggerChange:f,onTriggerEnter:P.useCallback(()=>{d.isOpenDelayedRef.current?A():S()},[d.isOpenDelayedRef,A,S]),onTriggerLeave:P.useCallback(()=>{R?y():(window.clearTimeout(x.current),x.current=0)},[y,R]),onOpen:S,onClose:y,disableHoverableContent:R,children:b})})};zm.displayName=Yr;var nu="TooltipTrigger",Um=P.forwardRef((n,m)=>{const{__scopeTooltip:b,...p}=n,T=$r(nu,b),H=xu(nu,b),k=Tl(b),l=P.useRef(null),d=an(m,l,T.onTriggerChange),_=P.useRef(!1),v=P.useRef(!1),f=P.useCallback(()=>_.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),C.jsx(ly,{asChild:!0,...k,children:C.jsx(Ns.button,{"aria-describedby":T.open?T.contentId:void 0,"data-state":T.stateAttribute,...p,ref:d,onPointerMove:ns(n.onPointerMove,w=>{w.pointerType!=="touch"&&!v.current&&!H.isPointerInTransitRef.current&&(T.onTriggerEnter(),v.current=!0)}),onPointerLeave:ns(n.onPointerLeave,()=>{T.onTriggerLeave(),v.current=!1}),onPointerDown:ns(n.onPointerDown,()=>{T.open&&T.onClose(),_.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ns(n.onFocus,()=>{_.current||T.onOpen()}),onBlur:ns(n.onBlur,T.onClose),onClick:ns(n.onClick,T.onClose)})})});Um.displayName=nu;var Eu="TooltipPortal",[Ry,Ay]=Dl(Eu,{forceMount:void 0}),Pm=n=>{const{__scopeTooltip:m,forceMount:b,children:p,container:T}=n,H=$r(Eu,m);return C.jsx(Ry,{scope:m,forceMount:b,children:C.jsx(wu,{present:b||H.open,children:C.jsx(Om,{asChild:!0,container:T,children:p})})})};Pm.displayName=Eu;var Vn="TooltipContent",Im=P.forwardRef((n,m)=>{const b=Ay(Vn,n.__scopeTooltip),{forceMount:p=b.forceMount,side:T="top",...H}=n,k=$r(Vn,n.__scopeTooltip);return C.jsx(wu,{present:p||k.open,children:k.disableHoverableContent?C.jsx(qm,{side:T,...H,ref:m}):C.jsx(Dy,{side:T,...H,ref:m})})}),Dy=P.forwardRef((n,m)=>{const b=$r(Vn,n.__scopeTooltip),p=xu(Vn,n.__scopeTooltip),T=P.useRef(null),H=an(m,T),[k,l]=P.useState(null),{trigger:d,onClose:_}=b,v=T.current,{onPointerInTransitChange:f}=p,w=P.useCallback(()=>{l(null),f(!1)},[f]),x=P.useCallback((R,E)=>{const a=R.currentTarget,o={x:R.clientX,y:R.clientY},c=By(o,a.getBoundingClientRect()),h=ky(o,c),S=Oy(E.getBoundingClientRect()),y=Ny([...h,...S]);l(y),f(!0)},[f]);return P.useEffect(()=>()=>w(),[w]),P.useEffect(()=>{if(d&&v){const R=a=>x(a,v),E=a=>x(a,d);return d.addEventListener("pointerleave",R),v.addEventListener("pointerleave",E),()=>{d.removeEventListener("pointerleave",R),v.removeEventListener("pointerleave",E)}}},[d,v,x,w]),P.useEffect(()=>{if(k){const R=E=>{const a=E.target,o={x:E.clientX,y:E.clientY},c=d?.contains(a)||v?.contains(a),h=!jy(o,k);c?w():h&&(w(),_())};return document.addEventListener("pointermove",R),()=>document.removeEventListener("pointermove",R)}},[d,v,k,_,w]),C.jsx(qm,{...n,ref:H})}),[Ty,My]=Dl(Yr,{isInside:!1}),Ly=my("TooltipContent"),qm=P.forwardRef((n,m)=>{const{__scopeTooltip:b,children:p,"aria-label":T,onEscapeKeyDown:H,onPointerDownOutside:k,...l}=n,d=$r(Vn,b),_=Tl(b),{onClose:v}=d;return P.useEffect(()=>(document.addEventListener(su,v),()=>document.removeEventListener(su,v)),[v]),P.useEffect(()=>{if(d.trigger){const f=w=>{w.target?.contains(d.trigger)&&v()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[d.trigger,v]),C.jsx(um,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:H,onPointerDownOutside:k,onFocusOutside:f=>f.preventDefault(),onDismiss:v,children:C.jsxs(oy,{"data-state":d.stateAttribute,..._,...l,ref:m,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(Ly,{children:p}),C.jsx(Ty,{scope:b,isInside:!0,children:C.jsx(Cy,{id:d.contentId,role:"tooltip",children:T||p})})]})})});Im.displayName=Vn;var Fm="TooltipArrow",Gm=P.forwardRef((n,m)=>{const{__scopeTooltip:b,...p}=n,T=Tl(b);return My(Fm,b).isInside?null:C.jsx(cy,{...T,...p,ref:m})});Gm.displayName=Fm;function By(n,m){const b=Math.abs(m.top-n.y),p=Math.abs(m.bottom-n.y),T=Math.abs(m.right-n.x),H=Math.abs(m.left-n.x);switch(Math.min(b,p,T,H)){case H:return"left";case T:return"right";case b:return"top";case p:return"bottom";default:throw new Error("unreachable")}}function ky(n,m,b=5){const p=[];switch(m){case"top":p.push({x:n.x-b,y:n.y+b},{x:n.x+b,y:n.y+b});break;case"bottom":p.push({x:n.x-b,y:n.y-b},{x:n.x+b,y:n.y-b});break;case"left":p.push({x:n.x+b,y:n.y-b},{x:n.x+b,y:n.y+b});break;case"right":p.push({x:n.x-b,y:n.y-b},{x:n.x-b,y:n.y+b});break}return p}function Oy(n){const{top:m,right:b,bottom:p,left:T}=n;return[{x:T,y:m},{x:b,y:m},{x:b,y:p},{x:T,y:p}]}function jy(n,m){const{x:b,y:p}=n;let T=!1;for(let H=0,k=m.length-1;H<m.length;k=H++){const l=m[H],d=m[k],_=l.x,v=l.y,f=d.x,w=d.y;v>p!=w>p&&b<(f-_)*(p-v)/(w-v)+_&&(T=!T)}return T}function Ny(n){const m=n.slice();return m.sort((b,p)=>b.x<p.x?-1:b.x>p.x?1:b.y<p.y?-1:b.y>p.y?1:0),Hy(m)}function Hy(n){if(n.length<=1)return n.slice();const m=[];for(let p=0;p<n.length;p++){const T=n[p];for(;m.length>=2;){const H=m[m.length-1],k=m[m.length-2];if((H.x-k.x)*(T.y-k.y)>=(H.y-k.y)*(T.x-k.x))m.pop();else break}m.push(T)}m.pop();const b=[];for(let p=n.length-1;p>=0;p--){const T=n[p];for(;b.length>=2;){const H=b[b.length-1],k=b[b.length-2];if((H.x-k.x)*(T.y-k.y)>=(H.y-k.y)*(T.x-k.x))b.pop();else break}b.push(T)}return b.pop(),m.length===1&&b.length===1&&m[0].x===b[0].x&&m[0].y===b[0].y?m:m.concat(b)}var zy=Hm,Uy=zm,Py=Um,Iy=Pm,qy=Im,Fy=Gm;const Gy=zy;function Wy({children:n,content:m,side:b="top",align:p="center",...T}){return m?C.jsxs(Uy,{...T,children:[C.jsx(Py,{asChild:!0,children:n}),C.jsx(Iy,{children:C.jsxs(qy,{side:b,align:p,sideOffset:4,className:"tooltip-content",children:[m,C.jsx(Fy,{className:"tooltip-arrow"})]})})]}):n}function ls({nodes:n,selectionMode:m="none",selectedIds:b,onSelectionChange:p,checkedIds:T,onCheckChange:H,autoCheckChildren:k=!1,onNodeToggle:l,onNodeActivate:d,onContextMenuSelect:_,getContextMenuItems:v,onAction:f,toggleOnRowClick:w=!1,renderRightSlot:x,renderActions:R}){const E=b!==void 0,a=T!==void 0,[o,c]=P.useState([]),[h,S]=P.useState([]),[y,A]=P.useState(()=>{const Y=new Set,se=me=>{me.forEach(N=>{N.defaultExpanded&&Y.add(N.id),N.children?.length&&se(N.children)})};return se(n),Y}),[D,g]=P.useState(null),[L,O]=P.useState(null),z=E?b??[]:o,U=a?T??[]:h,I=Y=>Y.checkable===!0,$=Y=>{a||S(Y),H?.(Y)},te=Y=>{const se=[];return Y.children?.length&&Y.children.forEach(me=>{I(me)&&se.push(me.id),se.push(...te(me))}),se},G=(Y,se)=>{const me=new Set(U),N=(Q,ie)=>{ie?me.add(Q):me.delete(Q)};N(Y.id,se),k&&Y.children&&te(Y).forEach(ie=>N(ie,se)),$(Array.from(me))},K=P.useMemo(()=>{const Y=[],se=me=>{me.forEach(N=>{m!=="none"&&N.selectable!==!1&&Y.push(N.id),N.children?.length&&y.has(N.id)&&se(N.children)})};return se(n),Y},[y,n,m]),B=Y=>{E||c(Y),p?.(Y)},F=Y=>{const se=new Set(y),me=se.has(Y.id);me?se.delete(Y.id):se.add(Y.id),A(se),l?.(Y.id,!me)},W=(Y,se)=>{const me=K.indexOf(Y),N=K.indexOf(se);if(me===-1||N===-1)return[se];const Q=Math.min(me,N),ie=Math.max(me,N);return K.slice(Q,ie+1)},j=(Y,se)=>{if(!(m!=="none"&&Y.selectable!==!1))return;if(m==="single"){B([Y.id]),g(Y.id);return}const N=se.metaKey||se.ctrlKey;if(se.shiftKey&&D){const ie=W(D,Y.id);if(N){const ne=new Set(z);ie.forEach(Re=>ne.add(Re)),B(Array.from(ne))}else B(ie);g(Y.id);return}if(N){const ie=new Set(z);ie.has(Y.id)?ie.delete(Y.id):ie.add(Y.id),B(Array.from(ie)),g(Y.id);return}B([Y.id]),g(Y.id)},V=(Y,se)=>{const me=m!=="none"&&Y.selectable!==!1,N=z.includes(Y.id),Q=me&&!N?[Y.id]:z,ie=v?v(Y,Q):Y.contextMenu??[];ie.length&&(se.preventDefault(),se.stopPropagation(),me&&!N&&(B(Q),g(Y.id)),O({items:ie,position:{x:se.clientX,y:se.clientY},node:Y}))},ee=(Y,se=0)=>{if(Y.variant==="load-more")return C.jsx("div",{className:"tree-node tree-node--load-more",role:"treeitem",children:C.jsxs("div",{className:"tree-row tree-row--load-more",style:{paddingLeft:`${se*12+28}px`},onClick:ne=>{Y.isLoading||(j(Y,ne),d?.(Y))},children:[Y.isLoading?C.jsx(Te,{name:"refresh",size:14,className:"icon-spin"}):C.jsx(Te,{name:"plus",size:14}),C.jsx("span",{className:"tree-node-label",children:Y.isLoading?"Loading...":Y.label})]})},Y.id);const me=!!Y.children?.length,N=y.has(Y.id),Q=m!=="none"&&z.includes(Y.id),ie=m!=="none"&&Y.selectable!==!1;return C.jsxs("div",{className:`tree-node ${se===0?"tree-node--root":"tree-node--nested"}`,role:"treeitem","aria-expanded":me?N:void 0,"aria-selected":ie?Q:void 0,children:[C.jsxs("div",{className:`tree-row ${Q?"tree-row--selected":""}`,style:{paddingLeft:`${se*12+8}px`},tabIndex:ie?0:-1,onClick:ne=>{if(w&&m==="none"&&me){F(Y);return}j(Y,ne)},onDoubleClick:()=>d?.(Y),onContextMenu:ne=>V(Y,ne),children:[me?C.jsx("button",{type:"button",className:"tree-toggle","aria-label":N?"Collapse":"Expand",onClick:ne=>{ne.stopPropagation(),F(Y)},children:C.jsx(Te,{name:N?"chevronDown":"chevronRight",size:24})}):C.jsx("span",{className:"tree-toggle-placeholder","aria-hidden":!0}),I(Y)?C.jsx("input",{type:"checkbox",className:"tree-checkbox",checked:U.includes(Y.id),onClick:ne=>ne.stopPropagation(),onChange:ne=>G(Y,ne.target.checked),style:{marginRight:"6px"}}):null,Y.icon?C.jsx(Te,{name:Y.icon,size:14,className:`tree-node-icon ${Y.iconClassName||""}`}):null,C.jsxs("div",{className:"tree-node-body",children:[C.jsx("span",{className:"tree-node-label",children:Y.label}),Y.description?C.jsx("span",{className:"tree-node-description",children:Y.description}):null]}),C.jsxs("div",{className:"tree-node-right",children:[Y.actions?.length?C.jsx("div",{className:"tree-actions",children:Y.actions.map(ne=>C.jsx(Wy,{content:ne.label,children:C.jsx("button",{type:"button",className:`icon-button icon-button--tiny ${ne.intent==="danger"?"icon-button--danger":""}`,disabled:ne.disabled,onClick:Re=>{Re.stopPropagation(),f?.(Y,ne.id)},children:C.jsx(Te,{name:ne.icon,size:12})})},ne.id))}):null,R?C.jsx("div",{className:"tree-actions",children:R(Y)}):null,x?x(Y):Y.rightSlot]})]}),me&&N?C.jsx("div",{className:"tree-children",role:"group",children:Y.children?.map(ne=>ee(ne,se+1))}):null]},Y.id)};return C.jsxs("div",{className:"tree-view",role:"tree",children:[n.map(Y=>ee(Y)),L?C.jsx(fu,{items:L.items,position:L.position,onSelect:Y=>_?.(L.node,Y),onClose:()=>O(null)}):null]})}function Yy({open:n,sourceBranch:m,onClose:b,onConfirm:p}){const[T,H]=P.useState(""),k=P.useRef(null);if(P.useEffect(()=>{n&&(H(""),setTimeout(()=>{k.current?.focus()},50))},[n]),!n)return null;const l=d=>{d.preventDefault(),T.trim()&&(p(T.trim()),b())};return C.jsx("div",{className:"dialog-overlay",onClick:d=>{d.target===d.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Create New Branch"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("form",{onSubmit:l,className:"dialog-body",children:[C.jsxs("div",{className:"dialog-field",children:[C.jsx("label",{htmlFor:"branch-name",className:"dialog-label",children:"Branch Name"}),C.jsx("input",{ref:k,id:"branch-name",type:"text",className:"dialog-input",value:T,onChange:d=>H(d.target.value),autoComplete:"off",spellCheck:!1})]}),m&&C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"branch",size:12}),C.jsxs("span",{children:["Based on ",C.jsx("strong",{children:m})]})]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"submit",className:"dialog-button dialog-button--primary",disabled:!T.trim(),children:"Create Branch"})]})]})]})})}function Vy({open:n,branchName:m,onClose:b,onConfirm:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Delete Branch"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[m?C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"trash",size:12}),C.jsxs("span",{children:["Deleting branch ",C.jsx("strong",{children:m})]})]}):null,C.jsx("p",{className:"dialog-label",style:{marginTop:8},children:"This will delete the branch. This action cannot be undone."}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary dialog-button--danger",onClick:()=>{p(),b()},children:"Delete"})]})]})]})}):null}function Xy({open:n,branchName:m,onClose:b,onConfirm:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Force Push"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[C.jsxs("div",{className:"dialog-info",style:{background:"rgba(244, 135, 113, 0.12)",color:"var(--danger)"},children:[C.jsx(Te,{name:"alert",size:14}),C.jsx("span",{children:"Warning: Destructive Action"})]}),C.jsxs("p",{className:"text-sm text-muted",children:["Are you sure you want to force push to ",C.jsx("strong",{children:m}),"?",C.jsx("br",{}),"This will overwrite history on the remote repository."]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--danger",onClick:()=>{p(),b()},children:"Force Push"})]})]})]})}):null}function Ky({branchGroups:n,onLoadMoreLocal:m,onLoadMoreRemote:b,canLoadMoreLocal:p,canLoadMoreRemote:T,onCreateBranch:H,onSwitchBranch:k,onDeleteBranch:l,onMergeBranch:d,onRebaseBranch:_,onPull:v,onPush:f}){const[w,x]=P.useState({open:!1,repoId:""}),[R,E]=P.useState({open:!1,repoId:"",branchName:""}),[a,o]=P.useState({open:!1,repoId:"",branchName:""}),c=n.map(A=>{const D=A.repo.activeBranch,g=A.localBranches.map(O=>{const z=(O.ahead??0)>0,U=(O.behind??0)>0,I=z||U,$=C.jsxs("div",{className:"flex items-center gap-2",children:[O.current&&C.jsx("span",{className:"git-badge",children:"current"}),I?C.jsxs("span",{className:"git-branch-status text-xs text-muted",children:[U?`${O.behind} `:"",z?`${O.ahead}`:""]}):null]});return{id:`${A.repo.repoId}:local:${O.name}`,label:O.name,description:O.lastCommit,icon:"branch",rightSlot:$,contextMenu:[{id:"switch-branch",label:"Switch Branch",disabled:O.current},{id:"merge-to-active",label:D?`Merge to ${D}`:"Merge to active branch",disabled:!D||O.current},{id:"rebase-active-on-branch",label:D?`Rebase ${D} on ${O.name}`:`Rebase active branch on ${O.name}`,disabled:!D||O.current},{id:"pull",label:"Pull",disabled:!O.current},{id:"push",label:"Push",disabled:!O.current},{id:"force-push",label:"Force Push",disabled:!O.current}],actions:[{id:"delete",icon:"trash",label:"Delete",intent:"danger",disabled:O.current}]}});p?.(A.repo.repoId)&&g.push({id:`${A.repo.repoId}:local:load-more`,label:"Load More...",variant:"load-more",selectable:!1});const L=A.remoteBranches.map(O=>({id:`${A.repo.repoId}:remote:${O.name}`,label:O.name,description:O.lastCommit,icon:"cloud",actions:[]}));return T?.(A.repo.repoId)&&L.push({id:`${A.repo.repoId}:remote:load-more`,label:"Load More...",variant:"load-more",selectable:!1}),{id:A.repo.repoId,label:A.repo.name,description:A.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:A.localBranches.length+A.remoteBranches.length}),children:[{id:`${A.repo.repoId}:local`,label:"Local Branches",icon:"branch",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:A.localBranches.length}),actions:[{id:"new-branch",icon:"plus",label:"New Branch"}],children:g},{id:`${A.repo.repoId}:remote`,label:"Remote Branches",icon:"cloud",defaultExpanded:!1,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:A.remoteBranches.length}),children:L}]}}),h=A=>{if(A.id.endsWith(":local:load-more")){const D=A.id.replace(":local:load-more","");m?.(D)}else if(A.id.endsWith(":remote:load-more")){const D=A.id.replace(":remote:load-more","");b?.(D)}},S=(A,D)=>{if(D==="new-branch"){const g=A.id.replace(":local",""),O=n.find(z=>z.repo.repoId===g)?.localBranches.find(z=>z.current)?.name;x({open:!0,repoId:g,sourceBranch:O})}else if(D==="delete"){const g=A.id.split(":local:");if(g.length===2){const L=g[0],O=g[1];E({open:!0,repoId:L,branchName:O})}}},y=(A,D)=>{if(D==="switch-branch"){const g=A.id.split(":local:");if(g.length===2){const L=g[0],O=g[1];k?.(L,O)}}else if(D==="merge-to-active"){const g=A.id.split(":local:");if(g.length===2){const L=g[0],O=g[1],U=n.find(I=>I.repo.repoId===L)?.repo.activeBranch;U&&U!==O&&d?.(L,U,O)}}else if(D==="rebase-active-on-branch"){const g=A.id.split(":local:");if(g.length===2){const L=g[0],O=g[1],U=n.find(I=>I.repo.repoId===L)?.repo.activeBranch;U&&U!==O&&_?.(L,U,O)}}else if(D==="pull"){const g=A.id.split(":local:");if(g.length===2){const L=g[0];v?.(L)}}else if(D==="push"){const g=A.id.split(":local:");if(g.length===2){const L=g[0];f?.(L,!1)}}else if(D==="force-push"){const g=A.id.split(":local:");if(g.length===2){const L=g[0],O=g[1];o({open:!0,repoId:L,branchName:O})}}};return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:c,toggleOnRowClick:!0,onNodeActivate:h,onAction:S,onContextMenuSelect:y}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"folder",size:22}),C.jsx("p",{children:"No repositories bound."})]}),C.jsx(Yy,{open:w.open,sourceBranch:w.sourceBranch,onClose:()=>x(A=>({...A,open:!1})),onConfirm:A=>{H?.(w.repoId,A,w.sourceBranch)}}),C.jsx(Vy,{open:R.open,branchName:R.branchName,onClose:()=>E(A=>({...A,open:!1})),onConfirm:()=>{l?.(R.repoId,R.branchName)}}),C.jsx(Xy,{open:a.open,branchName:a.branchName,onClose:()=>o(A=>({...A,open:!1})),onConfirm:()=>{f?.(a.repoId,!0)}})]})}function $y({open:n,commitHash:m,onClose:b,onConfirm:p}){const[T,H]=P.useState("mixed");return P.useEffect(()=>{n&&H("mixed")},[n]),n?C.jsx("div",{className:"dialog-overlay",onClick:k=>{k.target===k.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Reset to Commit"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[m&&C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"commit",size:12}),C.jsxs("span",{children:["Resetting to ",C.jsx("strong",{children:m})]})]}),C.jsxs("div",{className:"dialog-field",children:[C.jsx("label",{className:"dialog-label",children:"Reset Mode"}),C.jsxs("div",{className:"dialog-radio-group",children:[C.jsxs("label",{className:"dialog-radio",children:[C.jsx("input",{type:"radio",name:"reset-mode",checked:T==="soft",onChange:()=>H("soft")}),C.jsxs("div",{className:"dialog-radio-label",children:[C.jsx("strong",{children:"Soft"}),C.jsx("span",{children:"Keep changes staged"})]})]}),C.jsxs("label",{className:"dialog-radio",children:[C.jsx("input",{type:"radio",name:"reset-mode",checked:T==="mixed",onChange:()=>H("mixed")}),C.jsxs("div",{className:"dialog-radio-label",children:[C.jsx("strong",{children:"Mixed"}),C.jsx("span",{children:"Keep changes unstaged"})]})]}),C.jsxs("label",{className:"dialog-radio",children:[C.jsx("input",{type:"radio",name:"reset-mode",checked:T==="hard",onChange:()=>H("hard")}),C.jsxs("div",{className:"dialog-radio-label",children:[C.jsx("strong",{children:"Hard"}),C.jsx("span",{children:"Discard all changes"})]})]})]})]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:`dialog-button dialog-button--primary ${T==="hard"?"dialog-button--danger":""}`,onClick:()=>{p(T),b()},children:"Reset"})]})]})]})}):null}function Zy({open:n,commitHash:m,onClose:b,onConfirm:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Revert Commit"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[m&&C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"commit",size:12}),C.jsxs("span",{children:["Reverting commit ",C.jsx("strong",{children:m})]})]}),C.jsx("p",{className:"dialog-label",style:{marginTop:8},children:"This will create a new commit that undoes the changes from this commit."}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary",onClick:()=>{p(),b()},children:"Revert"})]})]})]})}):null}function Qy({commitGroups:n,onLoadMore:m,canLoadMore:b,isLoadingMore:p,onReset:T,onRevert:H,onSquashCommits:k}){const[l,d]=P.useState({open:!1,repoId:"",worktreePath:"",commitId:""}),[_,v]=P.useState({open:!1,repoId:"",worktreePath:"",commitId:""}),[f,w]=P.useState([]),x="::",R=O=>encodeURIComponent(O),E=O=>decodeURIComponent(O),a=(O,z)=>`worktree${x}${R(O)}${x}${R(z)}`,o=(O,z,U)=>`commit${x}${R(O)}${x}${R(z)}${x}${U}`,c=(O,z)=>`commit-load-more${x}${R(O)}${x}${R(z)}`,h=n.map(O=>{const z=O.items.map(I=>{const $=I.commits.map(te=>({id:o(O.repo.repoId,I.worktree.path,te.id),label:te.message,description:`${te.author} - ${te.date}`,icon:"commit",contextMenu:[{id:"reset",label:"Reset..."},{id:"revert",label:"Revert..."}]}));return b?.(O.repo.repoId,I.worktree.path)&&$.push({id:c(O.repo.repoId,I.worktree.path),label:"Load More...",variant:"load-more",isLoading:p?.(O.repo.repoId,I.worktree.path),selectable:!1}),{id:a(O.repo.repoId,I.worktree.path),label:I.worktree.branch,description:I.worktree.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:I.commits.length}),children:$}}),U=O.items.reduce((I,$)=>I+$.commits.length,0);return{id:O.repo.repoId,label:O.repo.name,description:O.repo.activeBranch?`${O.repo.activeBranch}  ${O.repo.path}`:O.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:U}),children:z}}),S=O=>{const z=O.split(x);return z.length!==4||z[0]!=="commit"?null:{repoId:E(z[1]),worktreePath:E(z[2]),commitId:z[3]}},y=O=>{const z=O.split(x);return z.length!==3||z[0]!=="commit-load-more"?null:{repoId:E(z[1]),worktreePath:E(z[2])}},A=(O,z,U)=>U.map(S).filter(I=>!!I).filter(I=>I.repoId===O&&I.worktreePath===z).map(I=>I.commitId),D=O=>{const z=y(O.id);z&&m?.(z.repoId,z.worktreePath)},g=(O,z)=>{const U=S(O.id);if(!U)return;const{repoId:I,worktreePath:$,commitId:te}=U;if(z==="reset")d({open:!0,repoId:I,worktreePath:$,commitId:te});else if(z==="revert")v({open:!0,repoId:I,worktreePath:$,commitId:te});else if(z==="squash-commits"){const G=A(I,$,f);G.length>1&&k?.(I,$,G)}},L=(O,z)=>{const U=O.contextMenu??[];if(z.length<2)return U;const I=S(O.id);return!I||A(I.repoId,I.worktreePath,z).length<2?U:[{id:"squash-commits",label:"Squash Commits"},...U]};return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:h,selectionMode:"multiple",toggleOnRowClick:!0,selectedIds:f,onSelectionChange:w,onNodeActivate:D,onContextMenuSelect:g,getContextMenuItems:L}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"folder",size:22}),C.jsx("p",{children:"No repositories bound."})]}),C.jsx($y,{open:l.open,commitHash:l.commitId,onClose:()=>d(O=>({...O,open:!1})),onConfirm:O=>{T?.(l.repoId,l.worktreePath,l.commitId,O)}}),C.jsx(Zy,{open:_.open,commitHash:_.commitId,onClose:()=>v(O=>({...O,open:!1})),onConfirm:()=>{H?.(_.repoId,_.worktreePath,_.commitId)}})]})}function Jy({repos:n,enabledRepoIds:m,onEnableRepos:b,activeRepoId:p,onActivateRepo:T,onRemoveRepo:H,onOpenTerminal:k,onOpenRepoFolder:l}){const d=n.map(f=>({id:f.repoId,label:f.name,description:f.path,icon:"folder",checkable:!0,rightSlot:f.repoId===p?C.jsx("span",{className:"git-badge",children:"active"}):void 0,actions:[{id:"open-folder",icon:"folder",label:"Open in File Explorer",disabled:!l},{id:"terminal",icon:"terminal",label:"Terminal"},{id:"remove",icon:"trash",label:"Remove",intent:"danger"}]})),_=(f,w)=>{const x=n.find(R=>R.repoId===f.id);if(w==="terminal"){x&&k?.(x);return}if(w==="open-folder"){x&&l?.(x);return}w==="remove"&&H?.(f.id)},v=f=>{T?.(f.id)};return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:d,checkedIds:m,onCheckChange:b,onNodeActivate:v,onAction:_,toggleOnRowClick:!1}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"folder",size:22}),C.jsx("p",{children:"No repositories bound."})]})]})}const eS="modulepreload",tS=function(n,m){return new URL(n,m).href},P_={},Cl=function(m,b,p){let T=Promise.resolve();if(b&&b.length>0){let _=function(v){return Promise.all(v.map(f=>Promise.resolve(f).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const k=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");T=_(b.map(v=>{if(v=tS(v,p),v in P_)return;P_[v]=!0;const f=v.endsWith(".css"),w=f?'[rel="stylesheet"]':"";if(p)for(let R=k.length-1;R>=0;R--){const E=k[R];if(E.href===v&&(!f||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${w}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":eS,f||(x.as="script"),x.crossOrigin="",x.href=v,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((R,E)=>{x.addEventListener("load",R),x.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${v}`)))})}))}function H(k){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=k,window.dispatchEvent(l),!l.defaultPrevented)throw k}return T.then(k=>{for(const l of k||[])l.status==="rejected"&&H(l.reason);return m().catch(H)})},I_={wsUrl:"",authToken:"",workspacePath:"",settings:{}};function Ml(){return typeof window>"u"?{...I_}:window.__APP_CONFIG__??{...I_}}function iS(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`req_${Date.now()}_${Math.random().toString(16).slice(2)}`}function sS(n,m){if(!m)return n;const b=new URL(n);return b.searchParams.set("token",m),b.toString()}class nS{url;ws=null;connectionPromise=null;pending=new Map;handlers=new Map;constructor(m,b){this.url=sS(m,b)}async request(m,b){await this.ensureConnected();const p=iS(),H=JSON.stringify({type:"request",id:p,method:m,params:b});return new Promise((k,l)=>{this.pending.set(p,{resolve:k,reject:l});try{this.ws?.send(H)}catch(d){this.pending.delete(p),l(d instanceof Error?d:new Error("Failed to send WebSocket message"))}})}subscribe(m,b){const p=this.handlers.get(m)??new Set;return p.add(b),this.handlers.set(m,p),()=>{const T=this.handlers.get(m);T&&(T.delete(b),T.size||this.handlers.delete(m))}}async ensureConnected(){if(!(this.ws&&this.ws.readyState===WebSocket.OPEN))return this.connectionPromise?this.connectionPromise:(this.connectionPromise=new Promise((m,b)=>{const p=new WebSocket(this.url);this.ws=p;const T=()=>{this.connectionPromise=null,m()},H=()=>{this.connectionPromise=null,b(new Error("WebSocket connection failed"))};p.addEventListener("open",T),p.addEventListener("error",H),p.addEventListener("message",k=>this.handleMessage(k)),p.addEventListener("close",()=>this.handleClose())}),this.connectionPromise)}handleMessage(m){if(typeof m.data!="string")return;let b=null;try{b=JSON.parse(m.data)}catch{return}if(b){if(b.type==="response"){const p=this.pending.get(b.id);if(!p)return;if(this.pending.delete(b.id),b.ok)p.resolve(b.result);else{const T=new Error(b.error?.message||"Request failed");b.error?.code&&(T.code=b.error.code),p.reject(T)}return}if(b.type==="event"){const p=this.handlers.get(b.event);if(!p)return;p.forEach(T=>T(b.payload))}}}handleClose(){const m=new Error("WebSocket disconnected");this.pending.forEach(b=>b.reject(m)),this.pending.clear(),this.ws=null}}class rS{async request(m,b){const{invoke:p}=await Cl(async()=>{const{invoke:T}=await import("./core-BEOw45JP.js");return{invoke:T}},[],import.meta.url);return p(m,b)}subscribe(m,b){let p=!1,T;return Cl(async()=>{const{listen:H}=await import("./event-DXqYWlmG.js");return{listen:H}},__vite__mapDeps([0,1]),import.meta.url).then(({listen:H})=>H(m,k=>b(k.payload)).then(k=>{p?k():T=k})).catch(()=>{}),()=>{p=!0,T&&T()}}}let fl=null;function Zr(){if(!fl){const n=Ml();n.wsUrl?fl=new nS(n.wsUrl,n.authToken):fl=new rS}return fl}function aS(){return typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`req_${Date.now()}_${Math.random().toString(16).slice(2)}`}class lS{api;pending=new Map;handlers=new Map;constructor(m){this.api=m,window.addEventListener("message",this.handleMessage)}request(m,b){const p=aS(),T={type:"vscode-request",id:p,method:m,params:b};return new Promise((H,k)=>{this.pending.set(p,{resolve:H,reject:k});try{this.api.postMessage(T)}catch(l){this.pending.delete(p),k(l instanceof Error?l:new Error("Failed to send VS Code message"))}})}subscribe(m,b){const p=this.handlers.get(m)??new Set;return p.add(b),this.handlers.set(m,p),()=>{const T=this.handlers.get(m);T&&(T.delete(b),T.size||this.handlers.delete(m))}}handleMessage=m=>{const b=m.data;if(!(!b||typeof b!="object")){if(b.type==="vscode-response"){const p=this.pending.get(b.id);if(!p)return;if(this.pending.delete(b.id),b.ok)p.resolve(b.result);else{const T=new Error(b.error?.message||"Request failed");b.error?.code&&(T.code=b.error.code),p.reject(T)}return}if(b.type==="vscode-event"){const p=this.handlers.get(b.event);if(!p)return;p.forEach(T=>T(b.payload))}}}}let Ir;function Wm(){if(Ir!==void 0)return Ir;const n=window.acquireVsCodeApi?.();return n?(Ir=new lS(n),Ir):(Ir=null,null)}async function oS(n){const m=Ml(),b=Wm();if(b){const T=await b.request("vscode.showOpenDialog",{canSelectFiles:!n?.directory,canSelectFolders:!!n?.directory,canSelectMany:!!n?.multiple,title:n?.title});return!T||T.length===0?null:n?.multiple?T:T[0]??null}if(m.wsUrl)return Zr().request("dialog.open",n??{});const{open:p}=await Cl(async()=>{const{open:T}=await import("./index-CU_haXI-.js");return{open:T}},__vite__mapDeps([2,1]),import.meta.url);return p(n)}async function ru(n,m){if(Ml().wsUrl){await Zr().request("shell.openPath",{path:n,openWith:m});return}const{openPath:p}=await Cl(async()=>{const{openPath:T}=await import("./index-RPoYOzLW.js");return{openPath:T}},__vite__mapDeps([3,1]),import.meta.url);await p(n,m)}async function q_(n,m){const b=Wm();if(b){await b.request("vscode.openFile",{path:n,preview:m?.preview});return}await ru(n,"Visual Studio Code")}function cS({open:n,repoCount:m,onClose:b,onConfirm:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Stage All and Commit"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"alert",size:12}),C.jsxs("span",{children:[m>1?`${m} repositories have `:"This repository has ","no staged changes but has unstaged changes."]})]}),C.jsx("p",{className:"dialog-label",style:{marginTop:8},children:"Do you want to stage all changes and commit?"}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary",onClick:()=>{p(),b()},children:"Stage All & Commit"})]})]})]})}):null}function uS({open:n,onClose:m,onConfirm:b}){const[p,T]=P.useState(""),H=P.useRef(null);if(P.useEffect(()=>{n&&(T(""),setTimeout(()=>{H.current?.focus()},50))},[n]),!n)return null;const k=l=>{l.preventDefault(),b(p.trim()),m()};return C.jsx("div",{className:"dialog-overlay",onClick:l=>{l.target===l.currentTarget&&m()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Stash Changes"}),C.jsx("button",{type:"button",className:"icon-button",onClick:m,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("form",{onSubmit:k,className:"dialog-body",children:[C.jsxs("div",{className:"dialog-field",children:[C.jsx("label",{htmlFor:"stash-message",className:"dialog-label",children:"Message (optional)"}),C.jsx("input",{ref:H,id:"stash-message",type:"text",className:"dialog-input",value:p,onChange:l=>T(l.target.value),autoComplete:"off",spellCheck:!1,placeholder:"My stash"})]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:m,children:"Cancel"}),C.jsx("button",{type:"submit",className:"dialog-button dialog-button--primary",children:"Stash"})]})]})]})})}function hS({groups:n,onCommit:m,onStageAll:b,onUnstageAll:p,onStageFile:T,onUnstageFile:H,onRollbackFiles:k,onStash:l}){const[d,_]=P.useState(""),[v,f]=P.useState([]),[w,x]=P.useState({open:!1,repoIds:[]}),[R,E]=P.useState({open:!1,repoId:null}),a=P.useMemo(()=>n.filter(z=>z.items.length>0),[n]);P.useEffect(()=>{f(z=>{const U=new Set(a.map($=>$.repo.repoId)),I=z.filter($=>U.has($));return z.length===0&&a.length>0?a.map($=>$.repo.repoId):I})},[a.length]);const o=z=>{switch(z){case"added":return"fileAdd";case"deleted":return"fileRemove";default:return"fileEdit"}},c=z=>{switch(z){case"added":return"tree-node-icon--added";case"deleted":return"tree-node-icon--deleted";default:return"tree-node-icon--modified"}},h=P.useMemo(()=>a.map(z=>{const U=z.items.filter(G=>G.staged),I=z.items.filter(G=>!G.staged),$=[],te=G=>{if(G.insertions!==void 0&&G.deletions!==void 0){const K=[];return G.insertions>0&&K.push(C.jsxs("span",{style:{color:"#73c991",marginRight:G.deletions>0?"4px":"0"},children:["+",G.insertions]},"ins")),G.deletions>0&&K.push(C.jsxs("span",{style:{color:"#f48771"},children:["-",G.deletions]},"del")),K.length===0?"No changes":C.jsx(C.Fragment,{children:K})}return G.status.charAt(0).toUpperCase()+G.status.slice(1)};return U.length>0&&$.push({id:`repo:${z.repo.repoId}:staged`,label:"Staged Changes",icon:"check",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:U.length}),actions:[{id:"unstage-all",icon:"minus",label:"Unstage All"},{id:"rollback-all",icon:"undo",label:"Roll back All",intent:"danger"}],children:U.map(G=>({id:`file:${z.repo.repoId}:${G.path}:staged`,label:G.path,icon:o(G.status),iconClassName:c(G.status),description:te(G),selectable:!0,actions:[{id:"open-file",icon:"externalLink",label:"Open in VSCode"},{id:"unstage",icon:"minus",label:"Unstage"},{id:"rollback",icon:"undo",label:"Roll back",intent:"danger"}]}))}),I.length>0&&$.push({id:`repo:${z.repo.repoId}:unstaged`,label:"Unstaged Changes",icon:"fileEdit",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:I.length}),actions:[{id:"stage-all",icon:"plus",label:"Stage All"},{id:"rollback-all",icon:"undo",label:"Roll back All",intent:"danger"}],children:I.map(G=>({id:`file:${z.repo.repoId}:${G.path}:unstaged`,label:G.path,icon:o(G.status),iconClassName:c(G.status),description:te(G),selectable:!0,actions:[{id:"open-file",icon:"externalLink",label:"Open in VSCode"},{id:"stage",icon:"plus",label:"Stage"},{id:"rollback",icon:"undo",label:"Roll back",intent:"danger"}]}))}),{id:z.repo.repoId,label:z.repo.name,description:z.repo.activeBranch?`${z.repo.activeBranch}  ${z.repo.path}`:z.repo.path,icon:"folder",checkable:!0,defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:z.items.length}),contextMenu:[{id:"stash-all",label:"Stash All Changes",icon:"archive"}],children:$}}),[a]),S=(z,U)=>{for(const I of a){if(z.id===`repo:${I.repo.repoId}:staged`){if(U==="unstage-all"&&p(I.repo.repoId),U==="rollback-all"){const G=I.items.filter(K=>K.staged).map(K=>K.path);k(I.repo.repoId,G)}return}if(z.id===`repo:${I.repo.repoId}:unstaged`){if(U==="stage-all"&&b(I.repo.repoId),U==="rollback-all"){const G=I.items.filter(K=>!K.staged).map(K=>K.path);k(I.repo.repoId,G)}return}const $=I.items.find(G=>G.staged&&`file:${I.repo.repoId}:${G.path}:staged`===z.id);if($){if(U==="open-file"){const G=`${I.repo.path}/${$.path}`;q_(G)}U==="unstage"&&H(I.repo.repoId,$.path),U==="rollback"&&k(I.repo.repoId,[$.path]);return}const te=I.items.find(G=>!G.staged&&`file:${I.repo.repoId}:${G.path}:unstaged`===z.id);if(te){if(U==="open-file"){const G=`${I.repo.path}/${te.path}`;q_(G)}U==="stage"&&T(I.repo.repoId,te.path),U==="rollback"&&k(I.repo.repoId,[te.path]);return}}},y=(z,U)=>{U==="stash-all"&&E({open:!0,repoId:z.id})},A=z=>{R.repoId&&l(R.repoId,z)},D=async()=>{const z=[];if(v.forEach(U=>{const I=n.find($=>$.repo.repoId===U);if(I){const $=I.items.some(G=>G.staged),te=I.items.some(G=>!G.staged);!$&&te&&z.push(U)}}),z.length>0){x({open:!0,repoIds:z});return}await Promise.all(v.map(U=>m(U,d))),_("")},g=async()=>{const{repoIds:z}=w;await Promise.all(z.map(U=>b(U))),await Promise.all(v.map(U=>m(U,d))),_("")},L=P.useMemo(()=>{if(v.length===1){const z=v[0],U=n.find(I=>I.repo.repoId===z);if(U){const I=U.repo.activeBranch;return`Commit to ${U.repo.name}${I?` - ${I}`:""}`}}return`Commit to ${v.length} ${v.length===1?"Repo":"Repos"}`},[v,n]),O=!d.trim()||v.length===0;return a.length?C.jsxs("div",{className:"commit-panel",children:[C.jsxs("div",{className:"commit-message",children:[C.jsx("div",{className:"commit-textarea-wrap",children:C.jsx("textarea",{className:"commit-textarea",placeholder:"Describe your changes...",rows:3,value:d,onChange:z=>_(z.target.value),spellCheck:!1})}),C.jsxs("button",{type:"button",className:"commit-button",disabled:O,onClick:D,children:[C.jsx(Te,{name:"check",size:14}),L]})]}),C.jsx("div",{className:"git-tree",children:C.jsx(ls,{nodes:h,checkedIds:v,onCheckChange:f,onAction:S,onContextMenuSelect:y,autoCheckChildren:!1,toggleOnRowClick:!0})}),C.jsx(cS,{open:w.open,repoCount:w.repoIds.length,onClose:()=>x(z=>({...z,open:!1})),onConfirm:g}),C.jsx(uS,{open:R.open,onClose:()=>E(z=>({...z,open:!1})),onConfirm:A})]}):C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"check",size:22}),C.jsx("p",{children:"All repositories clean."})]})}function dS({stashGroups:n,onApplyStash:m,onDeleteStash:b}){const p=n.map(H=>({id:H.repo.repoId,label:H.repo.name,description:H.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:H.items.length}),children:H.items.map(k=>{const l=k.message||`stash@{${k.index}}`,d=`stash@{${k.index}}`,_=k.relativeTime?`${d} - ${k.relativeTime}`:d;return{id:`${H.repo.repoId}:stash:${k.id}`,label:l,description:_,icon:"archive",actions:[{id:"apply-stash",icon:"play",label:"Apply"},{id:"delete-stash",icon:"trash",label:"Delete",intent:"danger"}]}})})),T=(H,k)=>{const l=H.id.split(":stash:");if(l.length!==2)return;const[d,_]=l,f=n.find(w=>w.repo.repoId===d)?.items.find(w=>w.id===_);f&&(k==="apply-stash"?m?.(d,f.index):k==="delete-stash"&&b?.(d,f.index))};return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:p,onAction:T}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"archive",size:22}),C.jsx("p",{children:"No stashes found."})]})]})}function fS({open:n,repoName:m,onClose:b,onConfirm:p}){const[T,H]=P.useState(""),[k,l]=P.useState(""),d=P.useRef(null);if(P.useEffect(()=>{n&&(H(""),l(`../${m}-worktree`),setTimeout(()=>{d.current?.focus()},50))},[n,m]),P.useEffect(()=>{n&&T&&l(`../${m}-${T}`)},[T,n,m]),!n)return null;const _=v=>{v.preventDefault(),T.trim()&&k.trim()&&(p(T.trim(),k.trim()),b())};return C.jsx("div",{className:"dialog-overlay",onClick:v=>{v.target===v.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Create Worktree"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("form",{onSubmit:_,className:"dialog-body",children:[C.jsxs("div",{className:"dialog-field",children:[C.jsx("label",{htmlFor:"branch-name",className:"dialog-label",children:"Branch Name"}),C.jsx("input",{ref:d,id:"branch-name",type:"text",className:"dialog-input",value:T,onChange:v=>H(v.target.value),autoComplete:"off",spellCheck:!1})]}),C.jsxs("div",{className:"dialog-field",children:[C.jsx("label",{htmlFor:"worktree-path",className:"dialog-label",children:"Worktree Path"}),C.jsx("input",{id:"worktree-path",type:"text",className:"dialog-input",value:k,onChange:v=>l(v.target.value),autoComplete:"off",spellCheck:!1})]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"submit",className:"dialog-button dialog-button--primary",disabled:!T.trim()||!k.trim(),children:"Create"})]})]})]})})}function _S({open:n,branchName:m,onClose:b,onConfirm:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Delete Worktree"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[m&&C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"trash",size:12}),C.jsxs("span",{children:["Deleting worktree for branch ",C.jsx("strong",{children:m})]})]}),C.jsx("p",{className:"dialog-label",style:{marginTop:8},children:"This will remove the worktree folder and delete the associated branch. This action cannot be undone."}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary dialog-button--danger",onClick:()=>{p(),b()},children:"Delete"})]})]})]})}):null}function mS({worktreeGroups:n,onCreateWorktree:m,onDeleteWorktree:b,onOpenTerminal:p,onOpenWorktreeFolder:T,onMergeBranch:H,onRebaseBranch:k,onSmartUpdateWorktrees:l,onRefresh:d}){const[_,v]=P.useState({open:!1,repoId:"",repoName:""}),[f,w]=P.useState({open:!1,repoId:"",branchName:""}),x=n.map(a=>{const o=a.repo.activeBranch,c=a.items.filter(h=>h.path!==a.repo.path);return{id:a.repo.repoId,label:a.repo.name,description:a.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:c.length}),actions:[{id:"create-worktree",icon:"plus",label:"Create Worktree"}],contextMenu:[{id:"smart-update-worktrees",label:o?`Smart update worktrees to ${o}`:"Smart update worktrees",disabled:!o||!c.length||!l}],children:c.map(h=>{const S=(h.ahead??0)>0,y=(h.behind??0)>0,D=S||y?C.jsxs("span",{className:"git-branch-status text-xs text-muted",children:[y?`${h.behind} `:"",S?`${h.ahead}`:""]}):null;return{id:`${a.repo.repoId}:${h.branch}`,label:h.branch,description:h.path,icon:"folder",rightSlot:D,contextMenu:[{id:"separator-update-worktree",label:"Update work tree",type:"separator"},{id:"update-from-active",label:o?`Merge from ${o}`:"Merge from active branch",disabled:!o||h.branch===o},{id:"rebase-branch-on-active",label:o?`Rebase ${h.branch} on ${o}`:`Rebase ${h.branch} on active branch`,disabled:!o||h.branch===o},{id:"separator-update-repo",label:"Update repo",type:"separator"},{id:"merge-to-active",label:o?`Merge to ${o}`:"Merge to active branch",disabled:!o||h.branch===o},{id:"rebase-active-on-branch",label:o?`Rebase ${o} on ${h.branch}`:`Rebase active branch on ${h.branch}`,disabled:!o||h.branch===o}],actions:[{id:"open-folder",icon:"folder",label:"Open in File Explorer",disabled:!T},{id:"terminal",icon:"terminal",label:"Terminal"},{id:"delete-worktree",icon:"trash",label:"Delete",intent:"danger"}]}})}}),R=(a,o)=>{if(o==="create-worktree"){const c=n.find(h=>h.repo.repoId===a.id);c&&v({open:!0,repoId:c.repo.repoId,repoName:c.repo.name})}else if(o==="terminal"||o==="delete-worktree"||o==="open-folder"){const c=a.id.lastIndexOf(":");if(c!==-1){const h=a.id.substring(0,c),S=a.id.substring(c+1),y=n.find(D=>D.repo.repoId===h),A=y?.items.find(D=>D.branch===S);if(o==="terminal"){y&&A&&p?.(y.repo,A);return}if(o==="open-folder"){y&&A&&T?.(y.repo,A);return}w({open:!0,repoId:h,branchName:S})}}},E=(a,o)=>{const c=n.find(g=>g.repo.repoId===a.id);if(c){o==="smart-update-worktrees"&&l?.(c.repo.repoId);return}const h=a.id.lastIndexOf(":");if(h===-1)return;const S=a.id.substring(0,h),y=a.id.substring(h+1),D=n.find(g=>g.repo.repoId===S)?.repo.activeBranch;if(!(!D||D===y)){if(o==="merge-to-active"){H?.(S,D,y);return}if(o==="update-from-active"){H?.(S,y,D);return}if(o==="rebase-branch-on-active"){k?.(S,y,D);return}o==="rebase-active-on-branch"&&k?.(S,D,y)}};return C.jsxs("div",{className:"git-tree",children:[C.jsx("div",{className:"worktree-toolbar",children:C.jsx("button",{type:"button",className:"icon-button",title:"Refresh",onClick:d,disabled:!d,children:C.jsx(Te,{name:"refresh",size:15})})}),C.jsx(ls,{nodes:x,toggleOnRowClick:!0,onAction:R,onContextMenuSelect:E}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"folder",size:22}),C.jsx("p",{children:"No repositories bound."})]}),C.jsx(fS,{open:_.open,repoName:_.repoName,onClose:()=>v(a=>({...a,open:!1})),onConfirm:(a,o)=>{m?.(_.repoId,a,o)}}),C.jsx(_S,{open:f.open,branchName:f.branchName,onClose:()=>w(a=>({...a,open:!1})),onConfirm:()=>{b?.(f.repoId,f.branchName)}})]})}function pS({remoteGroups:n}){const m=n.map(b=>({id:b.repo.repoId,label:b.repo.name,description:b.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:b.items.length}),children:b.items.map(p=>({id:`${b.repo.repoId}:remote:${p.name}`,label:p.name,description:`Fetch: ${p.fetch}`,icon:"cloud"}))}));return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:m}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"cloud",size:22}),C.jsx("p",{children:"No remotes configured."})]})]})}function gS({submoduleGroups:n}){const m=n.map(b=>({id:b.repo.repoId,label:b.repo.name,description:b.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:b.items.length}),children:b.items.map(p=>({id:`${b.repo.repoId}:submodule:${p.path}`,label:p.name||p.path,description:p.url?`${p.path}  ${p.url}`:p.path,icon:"merge"}))}));return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:m}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"merge",size:22}),C.jsx("p",{children:"No submodules configured."})]})]})}function vS({tagGroups:n,onLoadMore:m,canLoadMore:b,isLoadingMore:p}){const H=f=>encodeURIComponent(f),k=f=>decodeURIComponent(f),l=f=>`tag-load-more::${H(f)}`,d=n.map(f=>({id:f.repo.repoId,label:f.repo.name,description:f.repo.path,icon:"folder",defaultExpanded:!0,selectable:!1,rightSlot:C.jsx("span",{className:"git-pill",children:f.items.length}),children:[...f.items.map(w=>({id:`${f.repo.repoId}:tag:${w.name}`,label:w.name,icon:"tag"})),...b?.(f.repo.repoId)?[{id:l(f.repo.repoId),label:"Load More...",variant:"load-more",isLoading:p?.(f.repo.repoId),selectable:!1}]:[]]})),_=f=>{const w=f.split("::");return w.length!==2||w[0]!=="tag-load-more"?null:{repoId:k(w[1])}},v=f=>{const w=_(f.id);w&&m?.(w.repoId)};return C.jsxs("div",{className:"git-tree",children:[C.jsx(ls,{nodes:d,onNodeActivate:v}),n.length?null:C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"tag",size:22}),C.jsx("p",{children:"No tags found."})]})]})}const yS=[{id:"commit",label:"Changes",icon:"fileEdit"},{id:"commits",label:"Commits",icon:"commit"},{id:"branches",label:"Branches",icon:"branch"},{id:"worktrees",label:"Worktrees",icon:"folder"},{id:"repos",label:"Repos",icon:"folder"},{id:"stashes",label:"Stashes",icon:"archive"},{id:"tags",label:"Tags",icon:"tag"},{id:"remotes",label:"Remotes",icon:"cloud"},{id:"submodules",label:"Submodules",icon:"merge"}];function SS({initialTabs:n,initialSplit:m=!0,repos:b=[],enabledRepoIds:p,branchGroups:T=[],commitGroups:H=[],worktreeGroups:k=[],changedFileGroups:l=[],remoteGroups:d=[],submoduleGroups:_=[],stashGroups:v=[],tagGroups:f=[],width:w,loading:x=!1,error:R,onRefresh:E,onEnableRepos:a,onCommit:o,onPull:c,onPush:h,onStageAll:S,onUnstageAll:y,onStageFile:A,onUnstageFile:D,onRollbackFiles:g,onLoadMoreCommits:L,onLoadMoreLocalBranches:O,onLoadMoreRemoteBranches:z,canLoadMoreCommits:U,canLoadMoreLocalBranches:I,canLoadMoreRemoteBranches:$,isLoadingMoreCommits:te,onCreateBranch:G,onOpenFolder:K,onSwitchBranch:B,onDeleteBranch:F,onMergeBranch:W,onRebaseBranch:j,onReset:V,onRevert:ee,onSquashCommits:Y,onCreateWorktree:se,onDeleteWorktree:me,onApplyStash:N,onStash:Q,onDeleteStash:ie,onLoadMoreTags:ne,canLoadMoreTags:Re,isLoadingMoreTags:ve,onRemoveRepo:Le,onActivateRepo:Ne,onOpenRepoTerminal:Fe,onOpenRepoFolder:Ce,onOpenWorktreeTerminal:Be,onOpenWorktreeFolder:Ut,onSmartUpdateWorktrees:Xt}){const{tabs:Kt,tabGroups:Lt,topTabs:jt,bottomTabs:lt,activeTab:Ae,setActiveTab:ut,activeTopTab:mt,setActiveTopTab:Ke,activeBottomTab:ht,setActiveBottomTab:Pt,draggedTabId:wt,dragOverTabId:Nt,dragOverGroup:We,moveTabToGroup:It,handleDragStart:pt,handleDragOver:Bt,handleDrop:rt,handleDragEnd:Ni,handlePointerDown:Hi}=yv(n??yS),[kt,pi]=P.useState(m),[gi,vi]=P.useState(.5),[Ht,yi]=P.useState(!1),[pe,le]=P.useState("top"),ue=P.useRef(null),[_e,we]=P.useState(null),ye=b.length>0,be=kt?mt==="commit"||ht==="commit":Ae==="commit";P.useEffect(()=>{if(!be||!E||!ye)return;const ge=window.setInterval(()=>{E()},1e4);return()=>window.clearInterval(ge)},[be,ye,E]),P.useEffect(()=>{if(!Ht)return;const ge=Ui=>{const Si=ue.current;if(!Si)return;const ct=Si.getBoundingClientRect(),Zn=6,un=120,bi=Math.max(ct.height-Zn,1);if(bi<=un*2){vi(.5);return}const cs=Ui.clientY-ct.top,Qr=Math.min(Math.max(cs,un),bi-un)/bi;vi(Qr)},Pe=()=>{yi(!1)};return window.addEventListener("pointermove",ge),window.addEventListener("pointerup",Pe),()=>{window.removeEventListener("pointermove",ge),window.removeEventListener("pointerup",Pe)}},[Ht]);const Se=(ge,Pe)=>o?.(ge,Pe),ot=ge=>S?.(ge),Rt=ge=>{y?.(ge)},Hs=(ge,Pe)=>{A?.(ge,Pe)},ln=(ge,Pe)=>{D?.(ge,Pe)},on=(ge,Pe)=>{g?.(ge,Pe)},$t=(ge,Pe)=>{Q?.(ge,Pe)},dt=()=>{if(kt){ut(pe==="bottom"?ht:mt),pi(!1);return}(Lt[Ae]??"top")==="bottom"?(Pt(Ae),Ke(jt[0]?.id??Ae),le("bottom")):(Ke(Ae),Pt(lt[0]?.id??Ae),le("top")),pi(!0)},it=ge=>{ut(ge),le(Lt[ge]??"top")},Ai=ge=>{Ke(ge),le("top")},zs=ge=>{Pt(ge),le("bottom")},cn=P.useMemo(()=>{if(!_e||!kt)return[];const ge=Lt[_e.tabId]??"top",Pe=jt.length,Ui=lt.length,Si=ge==="top"||Ui<=1,ct=ge==="bottom"||Pe<=1;return[{id:"move-top",label:"Move to Top Panel",disabled:Si},{id:"move-bottom",label:"Move to Bottom Panel",disabled:ct}]},[lt.length,kt,_e,Lt,jt.length]),Us=ge=>C.jsxs(C.Fragment,{children:[ye&&ge==="repos"?C.jsx(Jy,{repos:b,enabledRepoIds:p,onEnableRepos:a,activeRepoId:null,onActivateRepo:Ne,onRemoveRepo:Le,onOpenTerminal:Fe,onOpenRepoFolder:Ce}):null,R?C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"alert",size:22}),C.jsx("p",{children:R}),C.jsx("button",{type:"button",className:"git-primary-button",onClick:E,children:"Retry"})]}):null,ye?C.jsxs(C.Fragment,{children:[ge==="branches"?C.jsx(Ky,{branchGroups:T,onLoadMoreLocal:O,onLoadMoreRemote:z,canLoadMoreLocal:I,canLoadMoreRemote:$,onCreateBranch:G,onSwitchBranch:B,onDeleteBranch:F,onMergeBranch:W,onRebaseBranch:j,onPull:c,onPush:h}):null,ge==="commits"?C.jsx(Qy,{commitGroups:H,onLoadMore:L,canLoadMore:U,isLoadingMore:te,onReset:V,onRevert:ee,onSquashCommits:Y}):null,ge==="commit"?C.jsx(hS,{groups:l,onStageAll:ot,onUnstageAll:Rt,onStageFile:Hs,onUnstageFile:ln,onRollbackFiles:on,onCommit:Se,onStash:$t}):null,ge==="stashes"?C.jsx(dS,{stashGroups:v,onApplyStash:N,onDeleteStash:ie}):null,ge==="tags"?C.jsx(vS,{tagGroups:f,onLoadMore:ne,canLoadMore:Re,isLoadingMore:ve}):null,ge==="worktrees"?C.jsx(mS,{worktreeGroups:k,onCreateWorktree:se,onDeleteWorktree:me,onOpenTerminal:Be,onOpenWorktreeFolder:Ut,onMergeBranch:W,onRebaseBranch:j,onSmartUpdateWorktrees:Xt,onRefresh:E}):null,ge==="submodules"?C.jsx(gS,{submoduleGroups:_}):null,ge==="remotes"?C.jsx(pS,{remoteGroups:d}):null]}):C.jsxs("div",{className:"git-empty",children:[C.jsx(Te,{name:"folder",size:22}),C.jsx("p",{children:"No repositories bound."}),C.jsx("button",{type:"button",className:"git-primary-button",onClick:K,children:"Open Folder"})]})]}),os=(ge,Pe)=>{kt&&we({tabId:ge,position:{x:Pe.clientX,y:Pe.clientY}})},zi=ge=>{if(!_e)return;const{tabId:Pe}=_e;ge==="move-top"&&(It(Pe,"top"),Ke(Pe),le("top")),ge==="move-bottom"&&(It(Pe,"bottom"),Pt(Pe),le("bottom"))},Ps=ge=>{ge.preventDefault(),yi(!0)};return C.jsxs("aside",{className:"git-panel",style:{width:w},children:[C.jsxs("div",{className:"panel-header",children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[C.jsxs("div",{className:"panel-title",children:[C.jsx(Te,{name:"branch",size:16}),C.jsx("span",{children:"Git Manager"})]}),C.jsx("button",{type:"button",className:`icon-button icon-button--small ${kt?"icon-button--pressed":""}`,title:kt?"Disable split view":"Enable split view","aria-pressed":kt,onClick:dt,children:C.jsx(Te,{name:"split",size:14})})]}),C.jsxs("div",{style:{display:"flex",gap:"4px"},children:[C.jsx("button",{type:"button",className:"icon-button icon-button--small",title:"Add Repository",onClick:K,children:C.jsx(Te,{name:"plus",size:14})}),C.jsx("button",{type:"button",className:"icon-button icon-button--small",title:"Refresh",onClick:E,disabled:x,children:C.jsx(Te,{name:"refresh",size:14})})]})]}),kt?C.jsxs("div",{className:`git-panel-split ${Ht?"is-resizing":""}`,ref:ue,children:[C.jsxs("section",{className:"git-panel-section",style:{flex:`0 0 ${gi*100}%`},children:[C.jsx(Vc,{tabs:jt,activeTab:mt,draggedTabId:wt,dragOverTabId:Nt,dragOverGroup:We,groupId:"top",onTabClick:Ai,onTabContextMenu:os,onDragStart:ge=>pt("top",ge),onDragOver:ge=>Bt("top",ge),onDrop:ge=>rt("top",ge),onDragEnd:Ni,onPointerDown:ge=>Hi("top",ge)}),C.jsx("div",{className:"git-panel-content",children:Us(mt)})]}),C.jsx("div",{className:"git-panel-split-handle",role:"separator","aria-orientation":"horizontal",onPointerDown:Ps}),C.jsxs("section",{className:"git-panel-section",style:{flex:`0 0 ${(1-gi)*100}%`},children:[C.jsx(Vc,{tabs:lt,activeTab:ht,draggedTabId:wt,dragOverTabId:Nt,dragOverGroup:We,groupId:"bottom",onTabClick:zs,onTabContextMenu:os,onDragStart:ge=>pt("bottom",ge),onDragOver:ge=>Bt("bottom",ge),onDrop:ge=>rt("bottom",ge),onDragEnd:Ni,onPointerDown:ge=>Hi("bottom",ge)}),C.jsx("div",{className:"git-panel-content",children:Us(ht)})]})]}):C.jsxs(C.Fragment,{children:[C.jsx(Vc,{tabs:Kt,activeTab:Ae,draggedTabId:wt,dragOverTabId:Nt,dragOverGroup:We,groupId:"single",onTabClick:it,onTabContextMenu:os,onDragStart:ge=>pt("single",ge),onDragOver:ge=>Bt("single",ge),onDrop:ge=>rt("single",ge),onDragEnd:Ni,onPointerDown:ge=>Hi("single",ge)}),C.jsx("div",{className:"git-panel-content",children:Us(Ae)})]}),_e&&kt?C.jsx(fu,{items:cn,position:_e.position,onSelect:zi,onClose:()=>we(null)}):null]})}function He(n,m){return Zr().request(n,m)}function bS(n){return He("create_session",n)}function au(n){return He("write_to_session",n)}function CS(n){return He("resize_session",n)}function pl(n){return He("kill_session",n)}function wS(n){return Zr().subscribe("session-data",n)}function xS(n){return Zr().subscribe("scan-progress",n)}function ES(n){return He("git_scan_repos",n)}function F_(n){return He("git_status",n)}function RS(n){return He("git_list_branches",n)}function AS(n){return He("git_list_remote_branches",n)}function Ym(n){return He("git_list_commits",n)}function G_(n){return He("git_list_worktrees",n)}function DS(n){return He("git_list_remotes",n)}function TS(n){return He("git_list_submodules",n)}function MS(n){return He("git_list_stashes",n)}function W_(n){return He("git_list_tags",n)}function LS(n){return He("git_apply_stash",n)}function BS(n){return He("git_drop_stash",n)}function kS(n){return He("git_stash_save",n)}function OS(n){return He("git_pull",n)}function jS(n){return He("git_push",n)}function NS(n){return He("git_commit",n)}function HS(n){return He("git_stage_files",n)}function zS(n){return He("git_unstage_files",n)}function US(n){return He("git_discard_files",n)}function PS(n){return He("git_stage_all",n)}function IS(n){return He("git_unstage_all",n)}function qS(n){return He("git_merge_into_branch",n)}function _l(n){return He("git_rebase_branch",n)}function FS(n){return He("git_create_branch",n)}function Y_(n){return He("git_checkout_branch",n)}function GS(n){return He("git_detach_worktree_head",n)}function WS(n){return He("git_smart_checkout_branch",n)}function YS(n){return He("git_reset",n)}function VS(n){return He("git_revert",n)}function XS(n){return He("git_squash_commits",n)}function KS(n){return He("git_commits_in_remote",n)}function $S(n){return He("git_add_worktree",n)}function ZS(n){return He("git_remove_worktree",n)}function V_(n){return He("git_delete_branch",n)}function Ru(n){if(typeof n=="string")return n;if(n instanceof Error)return n.message;if(n&&typeof n=="object"){const m=n.message;if(typeof m=="string"&&m.trim())return m;const b=n.error;if(typeof b=="string"&&b.trim())return b}return"Unexpected error."}const lu="worktree:",QS=(n,m)=>`${lu}${encodeURIComponent(n)}:${encodeURIComponent(m)}`,JS=n=>{if(!n.startsWith(lu))return null;const m=n.slice(lu.length),b=m.indexOf(":");if(b===-1)return null;const p=decodeURIComponent(m.slice(0,b)),T=decodeURIComponent(m.slice(b+1));return{repoId:p,worktreePath:T}};function eb(){const[n,m]=P.useState({}),[b,p]=P.useState({}),[T,H]=P.useState({}),[k,l]=P.useState({}),d=P.useMemo(()=>Object.fromEntries(Object.entries(n).map(([R,E])=>[R,E.slice(0,T[R]??10)])),[n,T]),_=P.useMemo(()=>Object.fromEntries(Object.entries(b).map(([R,E])=>[R,E.slice(0,k[R]??10)])),[b,k]),v=P.useCallback(R=>{H(E=>({...E,[R]:(E[R]??10)+10}))},[]),f=P.useCallback(R=>{l(E=>({...E,[R]:(E[R]??10)+10}))},[]),w=P.useCallback(R=>(n[R]?.length??0)>(T[R]??10),[n,T]),x=P.useCallback(R=>(b[R]?.length??0)>(k[R]??10),[b,k]);return{allLocalBranchesByRepo:n,setAllLocalBranchesByRepo:m,allRemoteBranchesByRepo:b,setAllRemoteBranchesByRepo:p,localBranchLimitByRepo:T,setLocalBranchLimitByRepo:H,remoteBranchLimitByRepo:k,setRemoteBranchLimitByRepo:l,localBranchesByRepo:d,remoteBranchesByRepo:_,loadMoreLocalBranches:v,loadMoreRemoteBranches:f,canLoadMoreLocalBranches:w,canLoadMoreRemoteBranches:x}}const $c=10;function Vm(n){return n.map(m=>({id:m.id.slice(0,7),message:m.summary,author:m.author,date:m.relative_time}))}function tb(n){const m=P.useRef({}),[b,p]=P.useState({}),[T,H]=P.useState({}),[k,l]=P.useState({}),[d,_]=P.useState({}),v=P.useCallback(async(x,R)=>{const E=n[x]??[],a=k[x]?.[R],o=d[x]?.[R];if(!E.some(S=>S.path===R)||!a||o)return;const c=m.current[x]??{},h=(c[R]??0)+1;m.current[x]={...c,[R]:h},_(S=>({...S,[x]:{...S[x]??{},[R]:!0}}));try{const y=(T[x]?.[R]??0)+$c,A=await Ym({cwd:R,limit:$c,skip:y});if((m.current[x]?.[R]??0)!==h)return;p(D=>({...D,[x]:{...D[x]??{},[R]:[...D[x]?.[R]??[],...Vm(A)]}})),H(D=>({...D,[x]:{...D[x]??{},[R]:y}})),A.length<$c&&l(D=>({...D,[x]:{...D[x]??{},[R]:!1}}))}finally{(m.current[x]?.[R]??0)===h&&_(S=>({...S,[x]:{...S[x]??{},[R]:!1}}))}},[T,k,d,n]),f=P.useCallback((x,R)=>k[x]?.[R]??!1,[k]),w=P.useCallback((x,R)=>d[x]?.[R]??!1,[d]);return{worktreeCommitsByRepo:b,setWorktreeCommitsByRepo:p,commitsSkipByWorktreeByRepo:T,setCommitsSkipByWorktreeByRepo:H,hasMoreCommitsByWorktreeByRepo:k,setHasMoreCommitsByWorktreeByRepo:l,loadingMoreCommitsByWorktreeByRepo:d,setLoadingMoreCommitsByWorktreeByRepo:_,loadMoreCommits:v,canLoadMoreCommits:f,isLoadingMoreCommits:w}}function X_(n){return n==="added"?"added":n==="deleted"?"deleted":"modified"}function K_(n){const m=[];return n.staged&&m.push({path:n.path,status:X_(n.staged),staged:!0,insertions:n.staged_stats?.insertions,deletions:n.staged_stats?.deletions}),n.unstaged&&m.push({path:n.path,status:X_(n.unstaged),staged:!1,insertions:n.unstaged_stats?.insertions,deletions:n.unstaged_stats?.deletions}),m}function ib({statusByRepo:n,statusByWorktreeByRepo:m}){const b=P.useMemo(()=>Object.fromEntries(Object.entries(n).map(([T,H])=>[T,H?H.modified_files.flatMap(K_):[]])),[n]),p=P.useMemo(()=>Object.fromEntries(Object.entries(m).map(([T,H])=>[T,Object.fromEntries(Object.entries(H).map(([k,l])=>[k,l?l.modified_files.flatMap(K_):[]]))])),[m]);return{changedFilesByRepo:b,changedFilesByWorktreeByRepo:p}}function sb(){const[n,m]=P.useState({}),[b,p]=P.useState({}),[T,H]=P.useState({}),[k,l]=P.useState({});return{remotesByRepo:n,setRemotesByRepo:m,submodulesByRepo:b,setSubmodulesByRepo:p,stashesByRepo:T,setStashesByRepo:H,tagsByRepo:k,setTagsByRepo:l}}function nb(){const[n,m]=P.useState({}),[b,p]=P.useState({});return{statusByRepo:n,setStatusByRepo:m,statusByWorktreeByRepo:b,setStatusByWorktreeByRepo:p}}function rb(){const[n,m]=P.useState({});return{worktreesByRepo:n,setWorktreesByRepo:m}}function $_(n){return n.map(m=>({name:m.name,current:m.current,lastCommit:m.last_commit||"",ahead:m.ahead,behind:m.behind}))}function Z_(n){return n.map(m=>({branch:m.branch,path:m.path,ahead:m.ahead,behind:m.behind}))}function ab(n){return n.map(m=>({name:m.name,fetch:m.fetch,push:m.push}))}function lb(n){return n.map(m=>({name:m.name,path:m.path,url:m.url??null}))}function ob(n){return n.map(m=>({index:m.index,message:m.message,id:m.id,relativeTime:m.relative_time}))}function Q_(n){return n.map(m=>({name:m.name}))}const qr=25;function Xm(){const n=P.useRef(0),m=P.useRef({}),[b,p]=P.useState([]),[T,H]=P.useState(!1),[k,l]=P.useState(null),{statusByRepo:d,setStatusByRepo:_,statusByWorktreeByRepo:v,setStatusByWorktreeByRepo:f}=nb(),{changedFilesByRepo:w,changedFilesByWorktreeByRepo:x}=ib({statusByRepo:d,statusByWorktreeByRepo:v}),{setAllLocalBranchesByRepo:R,setAllRemoteBranchesByRepo:E,setLocalBranchLimitByRepo:a,setRemoteBranchLimitByRepo:o,localBranchesByRepo:c,remoteBranchesByRepo:h,loadMoreLocalBranches:S,loadMoreRemoteBranches:y,canLoadMoreLocalBranches:A,canLoadMoreRemoteBranches:D}=eb(),{worktreesByRepo:g,setWorktreesByRepo:L}=rb(),{remotesByRepo:O,setRemotesByRepo:z,submodulesByRepo:U,setSubmodulesByRepo:I,stashesByRepo:$,setStashesByRepo:te,tagsByRepo:G,setTagsByRepo:K}=sb(),[B,F]=P.useState({}),[W,j]=P.useState({}),[V,ee]=P.useState({}),{worktreeCommitsByRepo:Y,setWorktreeCommitsByRepo:se,setCommitsSkipByWorktreeByRepo:me,setHasMoreCommitsByWorktreeByRepo:N,setLoadingMoreCommitsByWorktreeByRepo:Q,loadMoreCommits:ie,canLoadMoreCommits:ne,isLoadingMoreCommits:Re}=tb(g),ve=P.useCallback(le=>{p(le);const ue=new Set(le.map(we=>we.repo_id)),_e=we=>Object.fromEntries(Object.entries(we).filter(([ye])=>ue.has(ye)));_(_e),f(_e),R(_e),E(_e),se(_e),L(_e),z(_e),I(_e),te(_e),K(_e),F(_e),j(_e),ee(_e),me(_e),N(_e),Q(_e),a(_e),o(_e)},[]),Le=P.useCallback(async le=>{const ue=le?b.filter(we=>we.repo_id===le):b;if(!ue.length)return;const _e=++n.current;H(!0),l(null);try{a(ye=>{const be={...ye};return ue.forEach(Se=>{be[Se.repo_id]=10}),be}),o(ye=>{const be={...ye};return ue.forEach(Se=>{be[Se.repo_id]=10}),be}),F(ye=>{const be={...ye};return ue.forEach(Se=>{be[Se.repo_id]=0}),be});const we=await Promise.all(ue.map(async ye=>{const[be,Se,ot,Rt,Hs,ln,on,$t]=await Promise.all([F_({cwd:ye.root_path}),RS({cwd:ye.root_path}),AS({cwd:ye.root_path}),G_({cwd:ye.root_path}),DS({cwd:ye.root_path}),TS({cwd:ye.root_path}),MS({cwd:ye.root_path}),W_({cwd:ye.root_path,limit:qr,skip:0})]),dt=Z_(Rt),it=dt.length>0?dt:[{branch:be.branch||"HEAD",path:ye.root_path}],Ai=await Promise.all(it.map(ge=>ge.path===ye.root_path?Promise.resolve(be):F_({cwd:ge.path}))),zs=Object.fromEntries(it.map((ge,Pe)=>[ge.path,Ai[Pe]??null])),cn=await Promise.all(it.map(ge=>Ym({cwd:ge.path,limit:10,skip:0}))),Us=Object.fromEntries(it.map((ge,Pe)=>[ge.path,Vm(cn[Pe]??[])])),os=Object.fromEntries(it.map(ge=>[ge.path,0])),zi=Object.fromEntries(it.map((ge,Pe)=>[ge.path,(cn[Pe]??[]).length===10])),Ps=Object.fromEntries(it.map(ge=>[ge.path,!1]));return{repoId:ye.repo_id,status:be,localBranches:$_(Se),remoteBranches:$_(ot),worktrees:it,worktreeStatuses:zs,worktreeCommits:Us,worktreeSkips:os,hasMoreCommitsByWorktree:zi,loadingMoreCommitsByWorktree:Ps,remotes:ab(Hs),submodules:lb(ln),stashes:ob(on),tags:Q_($t),tagsSkip:0,hasMoreTags:$t.length===qr,loadingMoreTags:!1}}));if(_e!==n.current)return;_(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.status;return be}),f(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.worktreeStatuses;return be}),R(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.localBranches;return be}),E(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.remoteBranches;return be}),se(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.worktreeCommits;return be}),me(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.worktreeSkips;return be}),N(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.hasMoreCommitsByWorktree;return be}),Q(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.loadingMoreCommitsByWorktree;return be}),L(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.worktrees;return be}),z(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.remotes;return be}),I(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.submodules;return be}),te(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.stashes;return be}),K(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.tags;return be}),F(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.tagsSkip;return be}),j(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.hasMoreTags;return be}),ee(ye=>{const be={...ye};for(const Se of we)be[Se.repoId]=Se.loadingMoreTags;return be})}catch(we){if(_e!==n.current)return;const ye=Ru(we);l(ye==="Unexpected error."?"Failed to load git data.":ye)}finally{_e===n.current&&H(!1)}},[b]),Ne=P.useCallback(le=>b.find(_e=>_e.repo_id===le)??null,[b]),Fe=P.useCallback(le=>{const ue=JS(le);if(ue){const we=Ne(ue.repoId);return we?{repo:we,cwd:ue.worktreePath}:null}const _e=Ne(le);return _e?{repo:_e,cwd:_e.root_path}:null},[Ne]),Ce=P.useCallback(async function(le,ue,_e={}){const we=Ne(le);if(!we)return;const{refresh:ye=!0,errorMessage:be}=_e;try{const Se=await ue(we);return ye&&await Le(we.repo_id),Se}catch(Se){throw be&&console.error(be,Se),Se}},[Le,Ne]),Be=P.useCallback(async(le,ue)=>{if(!ue.length)return;const _e=Fe(le);_e&&await Ce(_e.repo.repo_id,()=>HS({cwd:_e.cwd,paths:ue}))},[Fe,Ce]),Ut=P.useCallback(async(le,ue)=>{if(!ue.length)return;const _e=Fe(le);_e&&await Ce(_e.repo.repo_id,()=>zS({cwd:_e.cwd,paths:ue}))},[Fe,Ce]),Xt=P.useCallback(async(le,ue)=>{if(!ue.length)return;const _e=Fe(le);_e&&await Ce(_e.repo.repo_id,()=>US({cwd:_e.cwd,paths:ue}))},[Fe,Ce]),Kt=P.useCallback(async le=>{const ue=Fe(le);ue&&await Ce(ue.repo.repo_id,()=>PS({cwd:ue.cwd}))},[Fe,Ce]),Lt=P.useCallback(async le=>{const ue=Fe(le);ue&&await Ce(ue.repo.repo_id,()=>IS({cwd:ue.cwd}))},[Fe,Ce]),jt=P.useCallback(async(le,ue)=>{const _e=Fe(le);_e&&await Ce(_e.repo.repo_id,()=>NS({cwd:_e.cwd,message:ue,stageAll:!1,amend:!1}))},[Fe,Ce]),lt=P.useCallback(async le=>{await Ce(le,ue=>OS({cwd:ue.root_path}))},[Ce]),Ae=P.useCallback(async(le,ue)=>{await Ce(le,_e=>jS({cwd:_e.root_path,force:ue}))},[Ce]),ut=P.useCallback(async(le,ue,_e)=>{await Ce(le,we=>qS({repoRoot:we.root_path,targetBranch:ue,sourceBranch:_e}),{errorMessage:"Failed to merge branch"})},[Ce]),mt=P.useCallback(async(le,ue,_e)=>{await Ce(le,we=>_l({repoRoot:we.root_path,targetBranch:ue,ontoBranch:_e}),{errorMessage:"Failed to rebase branch"})},[Ce]),Ke=P.useCallback(async le=>{const ue=Ne(le);if(!ue)return;const _e=d[le]?.branch;if(!_e)throw new Error("Active branch not found for repository.");const we=await G_({cwd:ue.root_path}),ye=Z_(we).filter(ot=>ot.path!==ue.root_path);if(!ye.length)return;const be=ye.find(ot=>ot.branch==="HEAD");if(be)throw new Error(`Worktree at ${be.path} is detached (HEAD).`);const Se=ye.find(ot=>(ot.behind??0)>0);if(Se)throw new Error(`Worktree ${Se.branch} is behind ${_e}.`);for(const ot of ye)ot.branch!==_e&&(await _l({repoRoot:ue.root_path,targetBranch:ot.branch,ontoBranch:_e}),await _l({repoRoot:ue.root_path,targetBranch:_e,ontoBranch:ot.branch}));for(const ot of ye)ot.branch!==_e&&await _l({repoRoot:ue.root_path,targetBranch:ot.branch,ontoBranch:_e});await Le(le)},[Le,Ne,d]),ht=P.useCallback(async(le,ue,_e)=>{await Ce(le,we=>FS({cwd:we.root_path,branchName:ue,sourceBranch:_e}),{errorMessage:"Failed to create branch"})},[Ce]),Pt=P.useCallback(async(le,ue)=>{await Ce(le,_e=>V_({repoRoot:_e.root_path,branch:ue,force:!1}),{errorMessage:"Failed to delete branch"})},[Ce]),wt=P.useCallback(async(le,ue)=>{await Ce(le,_e=>Y_({cwd:_e.root_path,branchName:ue}),{errorMessage:"Failed to switch branch"})},[Ce]),Nt=P.useCallback(async(le,ue,_e)=>{await Ce(le,()=>Y_({cwd:ue,branchName:_e}),{errorMessage:"Failed to check out branch in worktree"})},[Ce]),We=P.useCallback(async(le,ue)=>{await Ce(le,()=>GS({cwd:ue}),{refresh:!1,errorMessage:"Failed to detach worktree HEAD"})},[Ce]),It=P.useCallback(async(le,ue)=>{await Ce(le,_e=>WS({cwd:_e.root_path,branchName:ue}),{errorMessage:"Failed to smart switch branch"})},[Ce]),pt=P.useCallback(async(le,ue,_e,we)=>{await Ce(le,ye=>YS({cwd:we??ye.root_path,target:ue,mode:_e}),{errorMessage:"Failed to reset"})},[Ce]),Bt=P.useCallback(async(le,ue,_e)=>{await Ce(le,we=>VS({cwd:_e??we.root_path,commit:ue}),{errorMessage:"Failed to revert commit"})},[Ce]),rt=P.useCallback(async(le,ue,_e)=>{await Ce(le,we=>XS({cwd:_e??we.root_path,commits:ue}),{errorMessage:"Failed to squash commits"})},[Ce]),Ni=P.useCallback(async(le,ue,_e)=>await Ce(le,ye=>KS({cwd:_e??ye.root_path,commits:ue}),{refresh:!1,errorMessage:"Failed to check commits in remote"})??!1,[Ce]),Hi=P.useCallback(async(le,ue,_e)=>{await Ce(le,we=>$S({repoRoot:we.root_path,path:_e,branch:ue,startPoint:"HEAD"}),{errorMessage:"Failed to create worktree"})},[Ce]),kt=P.useCallback(async(le,ue)=>{await Ce(le,async _e=>{const ye=(g[le]||[]).find(be=>be.branch===ue);if(!ye){console.error("Worktree not found for branch",ue);return}await ZS({repoRoot:_e.root_path,path:ye.path,force:!0}),await V_({repoRoot:_e.root_path,branch:ue,force:!0})},{errorMessage:"Failed to remove worktree"})},[Ce,g]),pi=P.useCallback(async(le,ue)=>{await Ce(le,_e=>LS({cwd:_e.root_path,index:ue}))},[Ce]),gi=P.useCallback(async(le,ue)=>{await Ce(le,_e=>BS({cwd:_e.root_path,index:ue}))},[Ce]),vi=P.useCallback(async(le,ue,_e=!0)=>{await Ce(le,we=>kS({cwd:we.root_path,message:ue,includeUntracked:_e}),{errorMessage:"Failed to stash changes"})},[Ce]),Ht=P.useCallback(async le=>{const ue=Ne(le);if(!ue)return;const _e=W[le]??!1,we=V[le]??!1;if(!_e||we)return;const ye=(m.current[le]??0)+1;m.current={...m.current,[le]:ye},ee(be=>({...be,[le]:!0}));try{const Se=(B[le]??0)+qr,ot=await W_({cwd:ue.root_path,limit:qr,skip:Se});if((m.current[le]??0)!==ye)return;K(Rt=>({...Rt,[le]:[...Rt[le]??[],...Q_(ot)]})),F(Rt=>({...Rt,[le]:Se})),ot.length<qr&&j(Rt=>({...Rt,[le]:!1}))}finally{(m.current[le]??0)===ye&&ee(be=>({...be,[le]:!1}))}},[W,V,Ne,B]),yi=P.useCallback(le=>W[le]??!1,[W]),pe=P.useCallback(le=>V[le]??!1,[V]);return{repos:b,setRepos:ve,statusByRepo:d,statusByWorktreeByRepo:v,localBranchesByRepo:c,remoteBranchesByRepo:h,worktreeCommitsByRepo:Y,worktreesByRepo:g,remotesByRepo:O,submodulesByRepo:U,stashesByRepo:$,tagsByRepo:G,tagsSkipByRepo:B,hasMoreTagsByRepo:W,loadingMoreTagsByRepo:V,changedFilesByRepo:w,changedFilesByWorktreeByRepo:x,loading:T,error:k,refreshRepos:Le,stageFiles:Be,unstageFiles:Ut,discardFiles:Xt,stageAll:Kt,unstageAll:Lt,commit:jt,pull:lt,push:Ae,mergeIntoBranch:ut,rebaseBranch:mt,smartUpdateWorktrees:Ke,createBranch:ht,deleteBranch:Pt,switchBranch:wt,checkoutBranchAtPath:Nt,detachWorktreeHead:We,smartSwitchBranch:It,reset:pt,revert:Bt,squashCommits:rt,commitsInRemote:Ni,createWorktree:Hi,removeWorktree:kt,applyStash:pi,dropStash:gi,createStash:vi,loadMoreTags:Ht,canLoadMoreTags:yi,isLoadingMoreTags:pe,loadMoreCommits:ie,loadMoreLocalBranches:S,loadMoreRemoteBranches:y,canLoadMoreCommits:ne,canLoadMoreLocalBranches:A,canLoadMoreRemoteBranches:D,isLoadingMoreCommits:Re}}function Km(){const[n,m]=P.useState(null),b=P.useCallback(()=>{m(null)},[]),p=P.useCallback((H,k,l)=>{const d=Ru(k);m({title:H,message:d==="Unexpected error."?l:d})},[]),T=P.useCallback(async(H,k,l)=>{try{return await l()}catch(d){p(H,d,k);return}},[p]);return{gitCommandError:n,clearGitCommandError:b,showGitCommandError:p,runGitCommand:T}}const Ll=()=>crypto.randomUUID();function Xn(n){return n?n.type==="pane"?1:Xn(n.children[0])+Xn(n.children[1]):0}function nn(n,m){return n?n.type==="pane"?n.id===m?n:null:nn(n.children[0],m)||nn(n.children[1],m):null}function Wn(n){return n?n.type==="pane"?n:Wn(n.children[0])??Wn(n.children[1]):null}function Vr(n,m=[]){return n?n.type==="pane"?(m.push(n),m):(Vr(n.children[0],m),Vr(n.children[1],m),m):m}function Fr(n,m){if(n.type==="pane")return n.id===m?null:n;const b=Fr(n.children[0],m),p=Fr(n.children[1],m);return!b&&!p?null:b?p?{...n,children:[b,p]}:b:p}function J_(n,m,b="vertical"){return n?{type:"split",id:Ll(),orientation:b,children:[n,m]}:m}function em(n,m="vertical"){return n&&n.type==="split"?n.orientation:m}function tm(n,m,b,p){const[T,H]=ou(n,m,b,p);return H?T:n}function ou(n,m,b,p){if(n.type==="pane")return n.id!==m?[n,!1]:[{type:"split",id:Ll(),orientation:p,children:[n,b]},!0];const[T,H]=ou(n.children[0],m,b,p);if(H)return[{...n,children:[T,n.children[1]]},!0];const[k,l]=ou(n.children[1],m,b,p);return l?[{...n,children:[n.children[0],k]},!0]:[n,!1]}var Zc={exports:{}},im;function cb(){return im||(im=1,(function(n,m){(function(b,p){n.exports=p()})(self,(()=>(()=>{var b={4567:function(k,l,d){var _=this&&this.__decorate||function(h,S,y,A){var D,g=arguments.length,L=g<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,S,y,A);else for(var O=h.length-1;O>=0;O--)(D=h[O])&&(L=(g<3?D(L):g>3?D(S,y,L):D(S,y))||L);return g>3&&L&&Object.defineProperty(S,y,L),L},v=this&&this.__param||function(h,S){return function(y,A){S(y,A,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.AccessibilityManager=void 0;const f=d(9042),w=d(6114),x=d(9924),R=d(844),E=d(5596),a=d(4725),o=d(3656);let c=l.AccessibilityManager=class extends R.Disposable{constructor(h,S){super(),this._terminal=h,this._renderService=S,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let y=0;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);if(this._topBoundaryFocusListener=y=>this._handleBoundaryFocus(y,0),this._bottomBoundaryFocusListener=y=>this._handleBoundaryFocus(y,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new x.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((y=>this._handleResize(y.rows)))),this.register(this._terminal.onRender((y=>this._refreshRows(y.start,y.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((y=>this._handleChar(y)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((y=>this._handleTab(y)))),this.register(this._terminal.onKey((y=>this._handleKey(y.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new E.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,o.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,R.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(h){for(let S=0;S<h;S++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),w.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,w.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,S){this._liveRegionDebouncer.refresh(h,S,this._terminal.rows)}_renderRows(h,S){const y=this._terminal.buffer,A=y.lines.length.toString();for(let D=h;D<=S;D++){const g=y.translateBufferLineToString(y.ydisp+D,!0),L=(y.ydisp+D+1).toString(),O=this._rowElements[D];O&&(g.length===0?O.innerText="":O.textContent=g,O.setAttribute("aria-posinset",L),O.setAttribute("aria-setsize",A))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,S){const y=h.target,A=this._rowElements[S===0?1:this._rowElements.length-2];if(y.getAttribute("aria-posinset")===(S===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==A)return;let D,g;if(S===0?(D=y,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=y,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),S===0){const L=this._createAccessibilityTreeNode();this._rowElements.unshift(L),this._rowContainer.insertAdjacentElement("afterbegin",L)}else{const L=this._createAccessibilityTreeNode();this._rowElements.push(L),this._rowContainer.appendChild(L)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(S===0?-1:1),this._rowElements[S===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let S=this._rowContainer.children.length;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};l.AccessibilityManager=c=_([v(1,a.IRenderService)],c)},3614:(k,l)=>{function d(w){return w.replace(/\r?\n/g,"\r")}function _(w,x){return x?"\x1B[200~"+w+"\x1B[201~":w}function v(w,x,R,E){w=_(w=d(w),R.decPrivateModes.bracketedPasteMode&&E.rawOptions.ignoreBracketedPasteMode!==!0),R.triggerDataEvent(w,!0),x.value=""}function f(w,x,R){const E=R.getBoundingClientRect(),a=w.clientX-E.left-10,o=w.clientY-E.top-10;x.style.width="20px",x.style.height="20px",x.style.left=`${a}px`,x.style.top=`${o}px`,x.style.zIndex="1000",x.focus()}Object.defineProperty(l,"__esModule",{value:!0}),l.rightClickHandler=l.moveTextAreaUnderMouseCursor=l.paste=l.handlePasteEvent=l.copyHandler=l.bracketTextForPaste=l.prepareTextForTerminal=void 0,l.prepareTextForTerminal=d,l.bracketTextForPaste=_,l.copyHandler=function(w,x){w.clipboardData&&w.clipboardData.setData("text/plain",x.selectionText),w.preventDefault()},l.handlePasteEvent=function(w,x,R,E){w.stopPropagation(),w.clipboardData&&v(w.clipboardData.getData("text/plain"),x,R,E)},l.paste=v,l.moveTextAreaUnderMouseCursor=f,l.rightClickHandler=function(w,x,R,E,a){f(w,x,R),a&&E.rightClickSelect(w),x.value=E.selectionText,x.select()}},7239:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorContrastCache=void 0;const _=d(1505);l.ColorContrastCache=class{constructor(){this._color=new _.TwoKeyMap,this._css=new _.TwoKeyMap}setCss(v,f,w){this._css.set(v,f,w)}getCss(v,f){return this._css.get(v,f)}setColor(v,f,w){this._color.set(v,f,w)}getColor(v,f){return this._color.get(v,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.addDisposableDomListener=void 0,l.addDisposableDomListener=function(d,_,v,f){d.addEventListener(_,v,f);let w=!1;return{dispose:()=>{w||(w=!0,d.removeEventListener(_,v,f))}}}},6465:function(k,l,d){var _=this&&this.__decorate||function(a,o,c,h){var S,y=arguments.length,A=y<3?o:h===null?h=Object.getOwnPropertyDescriptor(o,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,h);else for(var D=a.length-1;D>=0;D--)(S=a[D])&&(A=(y<3?S(A):y>3?S(o,c,A):S(o,c))||A);return y>3&&A&&Object.defineProperty(o,c,A),A},v=this&&this.__param||function(a,o){return function(c,h){o(c,h,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Linkifier2=void 0;const f=d(3656),w=d(8460),x=d(844),R=d(2585);let E=l.Linkifier2=class extends x.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new w.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new w.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,x.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,x.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{const o=this._linkProviders.indexOf(a);o!==-1&&this._linkProviders.splice(o,1)}}}attachToDom(a,o,c){this._element=a,this._mouseService=o,this._renderService=c,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;const o=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!o)return;this._isMouseOut=!1;const c=a.composedPath();for(let h=0;h<c.length;h++){const S=c[h];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&o.x===this._lastBufferCell.x&&o.y===this._lastBufferCell.y||(this._handleHover(o),this._lastBufferCell=o)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,o){var c,h;this._activeProviderReplies&&o||((c=this._activeProviderReplies)===null||c===void 0||c.forEach((y=>{y?.forEach((A=>{A.link.dispose&&A.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=a.y);let S=!1;for(const[y,A]of this._linkProviders.entries())o?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(y)&&(S=this._checkLinkProviderResult(y,a,S)):A.provideLinks(a.y,(D=>{var g,L;if(this._isMouseOut)return;const O=D?.map((z=>({link:z})));(g=this._activeProviderReplies)===null||g===void 0||g.set(y,O),S=this._checkLinkProviderResult(y,a,S),((L=this._activeProviderReplies)===null||L===void 0?void 0:L.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)}))}_removeIntersectingLinks(a,o){const c=new Set;for(let h=0;h<o.size;h++){const S=o.get(h);if(S)for(let y=0;y<S.length;y++){const A=S[y],D=A.link.range.start.y<a?0:A.link.range.start.x,g=A.link.range.end.y>a?this._bufferService.cols:A.link.range.end.x;for(let L=D;L<=g;L++){if(c.has(L)){S.splice(y--,1);break}c.add(L)}}}}_checkLinkProviderResult(a,o,c){var h;if(!this._activeProviderReplies)return c;const S=this._activeProviderReplies.get(a);let y=!1;for(let A=0;A<a;A++)this._activeProviderReplies.has(A)&&!this._activeProviderReplies.get(A)||(y=!0);if(!y&&S){const A=S.find((D=>this._linkAtPosition(D.link,o)));A&&(c=!0,this._handleNewLink(A))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let A=0;A<this._activeProviderReplies.size;A++){const D=(h=this._activeProviderReplies.get(A))===null||h===void 0?void 0:h.find((g=>this._linkAtPosition(g.link,o)));if(D){c=!0,this._handleNewLink(D);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;const o=this._positionFromMouseEvent(a,this._element,this._mouseService);o&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,o)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,o){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!o||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=o)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,x.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const o=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);o&&this._linkAtPosition(a.link,o)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:c=>{var h,S;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((S=this._element)===null||S===void 0||S.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.underline},set:c=>{var h,S,y;!((h=this._currentLink)===null||h===void 0)&&h.state&&((y=(S=this._currentLink)===null||S===void 0?void 0:S.state)===null||y===void 0?void 0:y.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((c=>{if(!this._currentLink)return;const h=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(h,S),this._lastMouseEvent&&this._element)){const y=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);y&&this._askForLink(y,!1)}}))))}_linkHover(a,o,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),o.hover&&o.hover(c,o.text)}_fireUnderlineEvent(a,o){const c=a.range,h=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-h-1,c.end.x,c.end.y-h-1,void 0);(o?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(a,o,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(o,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),o.leave&&o.leave(c,o.text)}_linkAtPosition(a,o){const c=a.range.start.y*this._bufferService.cols+a.range.start.x,h=a.range.end.y*this._bufferService.cols+a.range.end.x,S=o.y*this._bufferService.cols+o.x;return c<=S&&S<=h}_positionFromMouseEvent(a,o,c){const h=c.getCoords(a,o,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,o,c,h,S){return{x1:a,y1:o,x2:c,y2:h,cols:this._bufferService.cols,fg:S}}};l.Linkifier2=E=_([v(0,R.IBufferService)],E)},9042:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tooMuchOutput=l.promptLabel=void 0,l.promptLabel="Terminal input",l.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(k,l,d){var _=this&&this.__decorate||function(E,a,o,c){var h,S=arguments.length,y=S<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(E,a,o,c);else for(var A=E.length-1;A>=0;A--)(h=E[A])&&(y=(S<3?h(y):S>3?h(a,o,y):h(a,o))||y);return S>3&&y&&Object.defineProperty(a,o,y),y},v=this&&this.__param||function(E,a){return function(o,c){a(o,c,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkProvider=void 0;const f=d(511),w=d(2585);let x=l.OscLinkProvider=class{constructor(E,a,o){this._bufferService=E,this._optionsService=a,this._oscLinkService=o}provideLinks(E,a){var o;const c=this._bufferService.buffer.lines.get(E-1);if(!c)return void a(void 0);const h=[],S=this._optionsService.rawOptions.linkHandler,y=new f.CellData,A=c.getTrimmedLength();let D=-1,g=-1,L=!1;for(let O=0;O<A;O++)if(g!==-1||c.hasContent(O)){if(c.loadCell(O,y),y.hasExtendedAttrs()&&y.extended.urlId){if(g===-1){g=O,D=y.extended.urlId;continue}L=y.extended.urlId!==D}else g!==-1&&(L=!0);if(L||g!==-1&&O===A-1){const z=(o=this._oscLinkService.getLinkData(D))===null||o===void 0?void 0:o.uri;if(z){const U={start:{x:g+1,y:E},end:{x:O+(L||O!==A-1?0:1),y:E}};let I=!1;if(!S?.allowNonHttpProtocols)try{const $=new URL(z);["http:","https:"].includes($.protocol)||(I=!0)}catch{I=!0}I||h.push({text:z,range:U,activate:($,te)=>S?S.activate($,te,U):R(0,te),hover:($,te)=>{var G;return(G=S?.hover)===null||G===void 0?void 0:G.call(S,$,te,U)},leave:($,te)=>{var G;return(G=S?.leave)===null||G===void 0?void 0:G.call(S,$,te,U)}})}L=!1,y.hasExtendedAttrs()&&y.extended.urlId?(g=O,D=y.extended.urlId):(g=-1,D=-1)}}a(h)}};function R(E,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}l.OscLinkProvider=x=_([v(0,w.IBufferService),v(1,w.IOptionsService),v(2,w.IOscLinkService)],x)},6193:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.RenderDebouncer=void 0,l.RenderDebouncer=class{constructor(d,_){this._parentWindow=d,this._renderCallback=_,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(d){return this._refreshCallbacks.push(d),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(d,_,v){this._rowCount=v,d=d!==void 0?d:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const d=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,_),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const d of this._refreshCallbacks)d(0);this._refreshCallbacks=[]}}},5596:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ScreenDprMonitor=void 0;const _=d(844);class v extends _.Disposable{constructor(w){super(),this._parentWindow=w,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,_.toDisposable)((()=>{this.clearListener()})))}setListener(w){this._listener&&this.clearListener(),this._listener=w,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var w;this._outerListener&&((w=this._resolutionMediaMatchList)===null||w===void 0||w.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}l.ScreenDprMonitor=v},3236:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Terminal=void 0;const _=d(3614),v=d(3656),f=d(6465),w=d(9042),x=d(3730),R=d(1680),E=d(3107),a=d(5744),o=d(2950),c=d(1296),h=d(428),S=d(4269),y=d(5114),A=d(8934),D=d(3230),g=d(9312),L=d(4725),O=d(6731),z=d(8055),U=d(8969),I=d(8460),$=d(844),te=d(6114),G=d(8437),K=d(2584),B=d(7399),F=d(5941),W=d(9074),j=d(2585),V=d(5435),ee=d(4567),Y=typeof window<"u"?window.document:null;class se extends U.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(N={}){super(N),this.browser=te,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new $.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(x.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(W.DecorationService),this._instantiationService.setService(j.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((Q,ie)=>this.refresh(Q,ie)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((Q=>this._reportWindowsOptions(Q)))),this.register(this._inputHandler.onColor((Q=>this._handleColorEvent(Q)))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((Q=>this._afterResize(Q.cols,Q.rows)))),this.register((0,$.toDisposable)((()=>{var Q,ie;this._customKeyEventHandler=void 0,(ie=(Q=this.element)===null||Q===void 0?void 0:Q.parentNode)===null||ie===void 0||ie.removeChild(this.element)})))}_handleColorEvent(N){if(this._themeService)for(const Q of N){let ie,ne="";switch(Q.index){case 256:ie="foreground",ne="10";break;case 257:ie="background",ne="11";break;case 258:ie="cursor",ne="12";break;default:ie="ansi",ne="4;"+Q.index}switch(Q.type){case 0:const Re=z.color.toColorRGB(ie==="ansi"?this._themeService.colors.ansi[Q.index]:this._themeService.colors[ie]);this.coreService.triggerDataEvent(`${K.C0.ESC}]${ne};${(0,F.toRgbString)(Re)}${K.C1_ESCAPED.ST}`);break;case 1:if(ie==="ansi")this._themeService.modifyColors((ve=>ve.ansi[Q.index]=z.rgba.toColor(...Q.color)));else{const ve=ie;this._themeService.modifyColors((Le=>Le[ve]=z.rgba.toColor(...Q.color)))}break;case 2:this._themeService.restoreColor(Q.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(N){N?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(N){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[I"),this.updateCursorStyle(N),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var N;return(N=this.textarea)===null||N===void 0?void 0:N.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const N=this.buffer.ybase+this.buffer.y,Q=this.buffer.lines.get(N);if(!Q)return;const ie=Math.min(this.buffer.x,this.cols-1),ne=this._renderService.dimensions.css.cell.height,Re=Q.getWidth(ie),ve=this._renderService.dimensions.css.cell.width*Re,Le=this.buffer.y*this._renderService.dimensions.css.cell.height,Ne=ie*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ne+"px",this.textarea.style.top=Le+"px",this.textarea.style.width=ve+"px",this.textarea.style.height=ne+"px",this.textarea.style.lineHeight=ne+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",(Q=>{this.hasSelection()&&(0,_.copyHandler)(Q,this._selectionService)})));const N=Q=>(0,_.handlePasteEvent)(Q,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",N)),this.register((0,v.addDisposableDomListener)(this.element,"paste",N)),te.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(Q=>{Q.button===2&&(0,_.rightClickHandler)(Q,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",(Q=>{(0,_.rightClickHandler)(Q,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),te.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",(Q=>{Q.button===1&&(0,_.moveTextAreaUnderMouseCursor)(Q,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",(N=>this._keyUp(N)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",(N=>this._keyDown(N)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",(N=>this._keyPress(N)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",(N=>this._compositionHelper.compositionupdate(N)))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,v.addDisposableDomListener)(this.textarea,"input",(N=>this._inputEvent(N)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(N){var Q;if(!N)throw new Error("Terminal requires a parent element.");N.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=N.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),N.appendChild(this.element);const ie=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),ie.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),ie.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",w.promptLabel),te.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(y.CoreBrowserService,this.textarea,(Q=this._document.defaultView)!==null&&Q!==void 0?Q:window),this._instantiationService.setService(L.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",(ne=>this._handleTextAreaFocus(ne)))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(L.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(O.ThemeService),this._instantiationService.setService(L.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(S.CharacterJoinerService),this._instantiationService.setService(L.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(L.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((ne=>this._onRender.fire(ne)))),this.onResize((ne=>this._renderService.resize(ne.cols,ne.rows))),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(ie);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(L.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(R.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((ne=>this.scrollLines(ne.amount,ne.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(L.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((ne=>this.scrollLines(ne.amount,ne.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((ne=>this._renderService.handleSelectionChanged(ne.start,ne.end,ne.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((ne=>{this.textarea.value=ne,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((ne=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(E.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(ne=>this._selectionService.handleMouseDown(ne)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(ee.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(ne=>this._handleScreenReaderModeOptionChange(ne)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(ne=>{!this._overviewRulerRenderer&&ne&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const N=this,Q=this.element;function ie(ve){const Le=N._mouseService.getMouseReportCoords(ve,N.screenElement);if(!Le)return!1;let Ne,Fe;switch(ve.overrideType||ve.type){case"mousemove":Fe=32,ve.buttons===void 0?(Ne=3,ve.button!==void 0&&(Ne=ve.button<3?ve.button:3)):Ne=1&ve.buttons?0:4&ve.buttons?1:2&ve.buttons?2:3;break;case"mouseup":Fe=0,Ne=ve.button<3?ve.button:3;break;case"mousedown":Fe=1,Ne=ve.button<3?ve.button:3;break;case"wheel":if(N.viewport.getLinesScrolled(ve)===0)return!1;Fe=ve.deltaY<0?0:1,Ne=4;break;default:return!1}return!(Fe===void 0||Ne===void 0||Ne>4)&&N.coreMouseService.triggerMouseEvent({col:Le.col,row:Le.row,x:Le.x,y:Le.y,button:Ne,action:Fe,ctrl:ve.ctrlKey,alt:ve.altKey,shift:ve.shiftKey})}const ne={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Re={mouseup:ve=>(ie(ve),ve.buttons||(this._document.removeEventListener("mouseup",ne.mouseup),ne.mousedrag&&this._document.removeEventListener("mousemove",ne.mousedrag)),this.cancel(ve)),wheel:ve=>(ie(ve),this.cancel(ve,!0)),mousedrag:ve=>{ve.buttons&&ie(ve)},mousemove:ve=>{ve.buttons||ie(ve)}};this.register(this.coreMouseService.onProtocolChange((ve=>{ve?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(ve)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&ve?ne.mousemove||(Q.addEventListener("mousemove",Re.mousemove),ne.mousemove=Re.mousemove):(Q.removeEventListener("mousemove",ne.mousemove),ne.mousemove=null),16&ve?ne.wheel||(Q.addEventListener("wheel",Re.wheel,{passive:!1}),ne.wheel=Re.wheel):(Q.removeEventListener("wheel",ne.wheel),ne.wheel=null),2&ve?ne.mouseup||(Q.addEventListener("mouseup",Re.mouseup),ne.mouseup=Re.mouseup):(this._document.removeEventListener("mouseup",ne.mouseup),Q.removeEventListener("mouseup",ne.mouseup),ne.mouseup=null),4&ve?ne.mousedrag||(ne.mousedrag=Re.mousedrag):(this._document.removeEventListener("mousemove",ne.mousedrag),ne.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(Q,"mousedown",(ve=>{if(ve.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(ve))return ie(ve),ne.mouseup&&this._document.addEventListener("mouseup",ne.mouseup),ne.mousedrag&&this._document.addEventListener("mousemove",ne.mousedrag),this.cancel(ve)}))),this.register((0,v.addDisposableDomListener)(Q,"wheel",(ve=>{if(!ne.wheel){if(!this.buffer.hasScrollback){const Le=this.viewport.getLinesScrolled(ve);if(Le===0)return;const Ne=K.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ve.deltaY<0?"A":"B");let Fe="";for(let Ce=0;Ce<Math.abs(Le);Ce++)Fe+=Ne;return this.coreService.triggerDataEvent(Fe,!0),this.cancel(ve,!0)}return this.viewport.handleWheel(ve)?this.cancel(ve):void 0}}),{passive:!1})),this.register((0,v.addDisposableDomListener)(Q,"touchstart",(ve=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(ve),this.cancel(ve)}),{passive:!0})),this.register((0,v.addDisposableDomListener)(Q,"touchmove",(ve=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(ve)?void 0:this.cancel(ve)}),{passive:!1}))}refresh(N,Q){var ie;(ie=this._renderService)===null||ie===void 0||ie.refreshRows(N,Q)}updateCursorStyle(N){var Q;!((Q=this._selectionService)===null||Q===void 0)&&Q.shouldColumnSelect(N)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(N,Q,ie=0){var ne;ie===1?(super.scrollLines(N,Q,ie),this.refresh(0,this.rows-1)):(ne=this.viewport)===null||ne===void 0||ne.scrollLines(N)}paste(N){(0,_.paste)(N,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(N){this._customKeyEventHandler=N}registerLinkProvider(N){return this.linkifier2.registerLinkProvider(N)}registerCharacterJoiner(N){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const Q=this._characterJoinerService.register(N);return this.refresh(0,this.rows-1),Q}deregisterCharacterJoiner(N){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(N)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(N){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+N)}registerDecoration(N){return this._decorationService.registerDecoration(N)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(N,Q,ie){this._selectionService.setSelection(N,Q,ie)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var N;(N=this._selectionService)===null||N===void 0||N.clearSelection()}selectAll(){var N;(N=this._selectionService)===null||N===void 0||N.selectAll()}selectLines(N,Q){var ie;(ie=this._selectionService)===null||ie===void 0||ie.selectLines(N,Q)}_keyDown(N){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1)return!1;const Q=this.browser.isMac&&this.options.macOptionIsMeta&&N.altKey;if(!Q&&!this._compositionHelper.keydown(N))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;Q||N.key!=="Dead"&&N.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ie=(0,B.evaluateKeyboardEvent)(N,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(N),ie.type===3||ie.type===2){const ne=this.rows-1;return this.scrollLines(ie.type===2?-ne:ne),this.cancel(N,!0)}return ie.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,N)||(ie.cancel&&this.cancel(N,!0),!ie.key||!!(N.key&&!N.ctrlKey&&!N.altKey&&!N.metaKey&&N.key.length===1&&N.key.charCodeAt(0)>=65&&N.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ie.key!==K.C0.ETX&&ie.key!==K.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ie.key,domEvent:N}),this._showCursor(),this.coreService.triggerDataEvent(ie.key,!0),!this.optionsService.rawOptions.screenReaderMode||N.altKey||N.ctrlKey?this.cancel(N,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(N,Q){const ie=N.isMac&&!this.options.macOptionIsMeta&&Q.altKey&&!Q.ctrlKey&&!Q.metaKey||N.isWindows&&Q.altKey&&Q.ctrlKey&&!Q.metaKey||N.isWindows&&Q.getModifierState("AltGraph");return Q.type==="keypress"?ie:ie&&(!Q.keyCode||Q.keyCode>47)}_keyUp(N){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1||((function(Q){return Q.keyCode===16||Q.keyCode===17||Q.keyCode===18})(N)||this.focus(),this.updateCursorStyle(N),this._keyPressHandled=!1)}_keyPress(N){let Q;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1)return!1;if(this.cancel(N),N.charCode)Q=N.charCode;else if(N.which===null||N.which===void 0)Q=N.keyCode;else{if(N.which===0||N.charCode===0)return!1;Q=N.which}return!(!Q||(N.altKey||N.ctrlKey||N.metaKey)&&!this._isThirdLevelShift(this.browser,N)||(Q=String.fromCharCode(Q),this._onKey.fire({key:Q,domEvent:N}),this._showCursor(),this.coreService.triggerDataEvent(Q,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(N){if(N.data&&N.inputType==="insertText"&&(!N.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const Q=N.data;return this.coreService.triggerDataEvent(Q,!0),this.cancel(N),!0}return!1}resize(N,Q){N!==this.cols||Q!==this.rows?super.resize(N,Q):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(N,Q){var ie,ne;(ie=this._charSizeService)===null||ie===void 0||ie.measure(),(ne=this.viewport)===null||ne===void 0||ne.syncScrollArea(!0)}clear(){var N;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let Q=1;Q<this.rows;Q++)this.buffer.lines.push(this.buffer.getBlankLine(G.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(N=this.viewport)===null||N===void 0||N.reset(),this.refresh(0,this.rows-1)}}reset(){var N,Q;this.options.rows=this.rows,this.options.cols=this.cols;const ie=this._customKeyEventHandler;this._setup(),super.reset(),(N=this._selectionService)===null||N===void 0||N.reset(),this._decorationService.reset(),(Q=this.viewport)===null||Q===void 0||Q.reset(),this._customKeyEventHandler=ie,this.refresh(0,this.rows-1)}clearTextureAtlas(){var N;(N=this._renderService)===null||N===void 0||N.clearTextureAtlas()}_reportFocus(){var N;!((N=this.element)===null||N===void 0)&&N.classList.contains("focus")?this.coreService.triggerDataEvent(K.C0.ESC+"[I"):this.coreService.triggerDataEvent(K.C0.ESC+"[O")}_reportWindowsOptions(N){if(this._renderService)switch(N){case V.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const Q=this._renderService.dimensions.css.canvas.width.toFixed(0),ie=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[4;${ie};${Q}t`);break;case V.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const ne=this._renderService.dimensions.css.cell.width.toFixed(0),Re=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[6;${Re};${ne}t`)}}cancel(N,Q){if(this.options.cancelEvents||Q)return N.preventDefault(),N.stopPropagation(),!1}}l.Terminal=se},9924:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TimeBasedDebouncer=void 0,l.TimeBasedDebouncer=class{constructor(d,_=1e3){this._renderCallback=d,this._debounceThresholdMS=_,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(d,_,v){this._rowCount=v,d=d!==void 0?d:0,_=_!==void 0?_:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,d):d,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,_):_;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const w=f-this._lastRefreshMs,x=this._debounceThresholdMS-w;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),x)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const d=Math.max(this._rowStart,0),_=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(d,_)}}},1680:function(k,l,d){var _=this&&this.__decorate||function(o,c,h,S){var y,A=arguments.length,D=A<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,h):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(o,c,h,S);else for(var g=o.length-1;g>=0;g--)(y=o[g])&&(D=(A<3?y(D):A>3?y(c,h,D):y(c,h))||D);return A>3&&D&&Object.defineProperty(c,h,D),D},v=this&&this.__param||function(o,c){return function(h,S){c(h,S,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.Viewport=void 0;const f=d(3656),w=d(4725),x=d(8460),R=d(844),E=d(2585);let a=l.Viewport=class extends R.Disposable{constructor(o,c,h,S,y,A,D,g){super(),this._viewportElement=o,this._scrollArea=c,this._bufferService=h,this._optionsService=S,this._charSizeService=y,this._renderService=A,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new x.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((L=>this._activeBuffer=L.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((L=>this._renderDimensions=L))),this._handleThemeChange(g.colors),this.register(g.onChangeColors((L=>this._handleThemeChange(L)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,c){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&h<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const c=this._getPixelsScrolled(o);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(o,c))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const c=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let c=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(o,c){var h;let S,y="";const A=[],D=c??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let L=o;L<D;L++){const O=g.get(L);if(!O)continue;const z=(h=g.get(L+1))===null||h===void 0?void 0:h.isWrapped;if(y+=O.translateToString(!z),!z||L===g.length-1){const U=document.createElement("div");U.textContent=y,A.push(U),y.length>0&&(S=U),y=""}}return{bufferElements:A,cursorElement:S}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let c=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(o,c){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&c.altKey||h==="ctrl"&&c.ctrlKey||h==="shift"&&c.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const c=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(o,c))}};l.Viewport=a=_([v(2,E.IBufferService),v(3,E.IOptionsService),v(4,w.ICharSizeService),v(5,w.IRenderService),v(6,w.ICoreBrowserService),v(7,w.IThemeService)],a)},3107:function(k,l,d){var _=this&&this.__decorate||function(a,o,c,h){var S,y=arguments.length,A=y<3?o:h===null?h=Object.getOwnPropertyDescriptor(o,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,h);else for(var D=a.length-1;D>=0;D--)(S=a[D])&&(A=(y<3?S(A):y>3?S(o,c,A):S(o,c))||A);return y>3&&A&&Object.defineProperty(o,c,A),A},v=this&&this.__param||function(a,o){return function(c,h){o(c,h,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferDecorationRenderer=void 0;const f=d(3656),w=d(4725),x=d(844),R=d(2585);let E=l.BufferDecorationRenderer=class extends x.Disposable{constructor(a,o,c,h){super(),this._screenElement=a,this._bufferService=o,this._decorationService=c,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,f.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((S=>this._removeDecoration(S)))),this.register((0,x.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var o,c;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((o=a?.options)===null||o===void 0?void 0:o.layer)==="top"),h.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const S=(c=a.options.x)!==null&&c!==void 0?c:0;return S&&S>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(a,h),h}_refreshStyle(a){const o=a.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let c=this._decorationElements.get(a);c||(c=this._createElement(a),a.element=c,this._decorationElements.set(a,c),this._container.appendChild(c),a.onDispose((()=>{this._decorationElements.delete(a),c.remove()}))),c.style.top=o*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(c)}}_refreshXPosition(a,o=a.element){var c;if(!o)return;const h=(c=a.options.x)!==null&&c!==void 0?c:0;(a.options.anchor||"left")==="right"?o.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var o;(o=this._decorationElements.get(a))===null||o===void 0||o.remove(),this._decorationElements.delete(a),a.dispose()}};l.BufferDecorationRenderer=E=_([v(1,R.IBufferService),v(2,R.IDecorationService),v(3,w.IRenderService)],E)},5871:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ColorZoneStore=void 0,l.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(d){if(d.options.overviewRulerOptions){for(const _ of this._zones)if(_.color===d.options.overviewRulerOptions.color&&_.position===d.options.overviewRulerOptions.position){if(this._lineIntersectsZone(_,d.marker.line))return;if(this._lineAdjacentToZone(_,d.marker.line,d.options.overviewRulerOptions.position))return void this._addLineToZone(_,d.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=d.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=d.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=d.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=d.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:d.options.overviewRulerOptions.color,position:d.options.overviewRulerOptions.position,startBufferLine:d.marker.line,endBufferLine:d.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(d){this._linePadding=d}_lineIntersectsZone(d,_){return _>=d.startBufferLine&&_<=d.endBufferLine}_lineAdjacentToZone(d,_,v){return _>=d.startBufferLine-this._linePadding[v||"full"]&&_<=d.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(d,_){d.startBufferLine=Math.min(d.startBufferLine,_),d.endBufferLine=Math.max(d.endBufferLine,_)}}},5744:function(k,l,d){var _=this&&this.__decorate||function(S,y,A,D){var g,L=arguments.length,O=L<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(S,y,A,D);else for(var z=S.length-1;z>=0;z--)(g=S[z])&&(O=(L<3?g(O):L>3?g(y,A,O):g(y,A))||O);return L>3&&O&&Object.defineProperty(y,A,O),O},v=this&&this.__param||function(S,y){return function(A,D){y(A,D,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OverviewRulerRenderer=void 0;const f=d(5871),w=d(3656),x=d(4725),R=d(844),E=d(2585),a={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let h=l.OverviewRulerRenderer=class extends R.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(S,y,A,D,g,L,O){var z;super(),this._viewportElement=S,this._screenElement=y,this._bufferService=A,this._decorationService=D,this._renderService=g,this._optionsService=L,this._coreBrowseService=O,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(z=this._viewportElement.parentElement)===null||z===void 0||z.insertBefore(this._canvas,this._viewportElement);const U=this._canvas.getContext("2d");if(!U)throw new Error("Ctx cannot be null");this._ctx=U,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,R.toDisposable)((()=>{var I;(I=this._canvas)===null||I===void 0||I.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,w.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const S=Math.floor(this._canvas.width/3),y=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=S,o.center=y,o.right=S,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=o.left,c.right=o.left+o.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);const S=this._canvas.height/this._bufferService.buffer.lines.length,y=Math.round(Math.max(Math.min(S,12),6)*this._coreBrowseService.dpr);a.left=y,a.center=y,a.right=y}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const y of this._decorationService.decorations)this._colorZoneStore.addDecoration(y);this._ctx.lineWidth=1;const S=this._colorZoneStore.zones;for(const y of S)y.position!=="full"&&this._renderColorZone(y);for(const y of S)y.position==="full"&&this._renderColorZone(y);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(S){this._ctx.fillStyle=S.color,this._ctx.fillRect(c[S.position||"full"],Math.round((this._canvas.height-1)*(S.startBufferLine/this._bufferService.buffers.active.lines.length)-a[S.position||"full"]/2),o[S.position||"full"],Math.round((this._canvas.height-1)*((S.endBufferLine-S.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[S.position||"full"]))}_queueRefresh(S,y){this._shouldUpdateDimensions=S||this._shouldUpdateDimensions,this._shouldUpdateAnchor=y||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};l.OverviewRulerRenderer=h=_([v(2,E.IBufferService),v(3,E.IDecorationService),v(4,x.IRenderService),v(5,E.IOptionsService),v(6,x.ICoreBrowserService)],h)},2950:function(k,l,d){var _=this&&this.__decorate||function(E,a,o,c){var h,S=arguments.length,y=S<3?a:c===null?c=Object.getOwnPropertyDescriptor(a,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(E,a,o,c);else for(var A=E.length-1;A>=0;A--)(h=E[A])&&(y=(S<3?h(y):S>3?h(a,o,y):h(a,o))||y);return S>3&&y&&Object.defineProperty(a,o,y),y},v=this&&this.__param||function(E,a){return function(o,c){a(o,c,E)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CompositionHelper=void 0;const f=d(4725),w=d(2585),x=d(2584);let R=l.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(E,a,o,c,h,S){this._textarea=E,this._compositionView=a,this._bufferService=o,this._optionsService=c,this._coreService=h,this._renderService=S,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(E){this._compositionView.textContent=E.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(E){if(this._isComposing||this._isSendingComposition){if(E.keyCode===229||E.keyCode===16||E.keyCode===17||E.keyCode===18)return!1;this._finalizeComposition(!1)}return E.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(E){if(this._compositionView.classList.remove("active"),this._isComposing=!1,E){const a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}}),0)}else{this._isSendingComposition=!1;const a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){const E=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const a=this._textarea.value,o=a.replace(E,"");this._dataAlreadySent=o,a.length>E.length?this._coreService.triggerDataEvent(o,!0):a.length<E.length?this._coreService.triggerDataEvent(`${x.C0.DEL}`,!0):a.length===E.length&&a!==E&&this._coreService.triggerDataEvent(a,!0)}}),0)}updateCompositionElements(E){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const S=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(S.width,1)+"px",this._textarea.style.height=Math.max(S.height,1)+"px",this._textarea.style.lineHeight=S.height+"px"}E||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};l.CompositionHelper=R=_([v(2,w.IBufferService),v(3,w.IOptionsService),v(4,w.ICoreService),v(5,f.IRenderService)],R)},9806:(k,l)=>{function d(_,v,f){const w=f.getBoundingClientRect(),x=_.getComputedStyle(f),R=parseInt(x.getPropertyValue("padding-left")),E=parseInt(x.getPropertyValue("padding-top"));return[v.clientX-w.left-R,v.clientY-w.top-E]}Object.defineProperty(l,"__esModule",{value:!0}),l.getCoords=l.getCoordsRelativeToElement=void 0,l.getCoordsRelativeToElement=d,l.getCoords=function(_,v,f,w,x,R,E,a,o){if(!R)return;const c=d(_,v,f);return c?(c[0]=Math.ceil((c[0]+(o?E/2:0))/E),c[1]=Math.ceil(c[1]/a),c[0]=Math.min(Math.max(c[0],1),w+(o?1:0)),c[1]=Math.min(Math.max(c[1],1),x),c):void 0}},9504:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.moveToCellSequence=void 0;const _=d(2584);function v(a,o,c,h){const S=a-f(a,c),y=o-f(o,c),A=Math.abs(S-y)-(function(D,g,L){let O=0;const z=D-f(D,L),U=g-f(g,L);for(let I=0;I<Math.abs(z-U);I++){const $=w(D,g)==="A"?-1:1,te=L.buffer.lines.get(z+$*I);te?.isWrapped&&O++}return O})(a,o,c);return E(A,R(w(a,o),h))}function f(a,o){let c=0,h=o.buffer.lines.get(a),S=h?.isWrapped;for(;S&&a>=0&&a<o.rows;)c++,h=o.buffer.lines.get(--a),S=h?.isWrapped;return c}function w(a,o){return a>o?"A":"B"}function x(a,o,c,h,S,y){let A=a,D=o,g="";for(;A!==c||D!==h;)A+=S?1:-1,S&&A>y.cols-1?(g+=y.buffer.translateBufferLineToString(D,!1,a,A),A=0,a=0,D++):!S&&A<0&&(g+=y.buffer.translateBufferLineToString(D,!1,0,a+1),A=y.cols-1,a=A,D--);return g+y.buffer.translateBufferLineToString(D,!1,a,A)}function R(a,o){const c=o?"O":"[";return _.C0.ESC+c+a}function E(a,o){a=Math.floor(a);let c="";for(let h=0;h<a;h++)c+=o;return c}l.moveToCellSequence=function(a,o,c,h){const S=c.buffer.x,y=c.buffer.y;if(!c.buffer.hasScrollback)return(function(g,L,O,z,U,I){return v(L,z,U,I).length===0?"":E(x(g,L,g,L-f(L,U),!1,U).length,R("D",I))})(S,y,0,o,c,h)+v(y,o,c,h)+(function(g,L,O,z,U,I){let $;$=v(L,z,U,I).length>0?z-f(z,U):L;const te=z,G=(function(K,B,F,W,j,V){let ee;return ee=v(F,W,j,V).length>0?W-f(W,j):B,K<F&&ee<=W||K>=F&&ee<W?"C":"D"})(g,L,O,z,U,I);return E(x(g,$,O,te,G==="C",U).length,R(G,I))})(S,y,a,o,c,h);let A;if(y===o)return A=S>a?"D":"C",E(Math.abs(S-a),R(A,h));A=y>o?"D":"C";const D=Math.abs(y-o);return E((function(g,L){return L.cols-g})(y>o?a:S,c)+(D-1)*c.cols+1+((y>o?S:a)-1),R(A,h))}},1296:function(k,l,d){var _=this&&this.__decorate||function(U,I,$,te){var G,K=arguments.length,B=K<3?I:te===null?te=Object.getOwnPropertyDescriptor(I,$):te;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")B=Reflect.decorate(U,I,$,te);else for(var F=U.length-1;F>=0;F--)(G=U[F])&&(B=(K<3?G(B):K>3?G(I,$,B):G(I,$))||B);return K>3&&B&&Object.defineProperty(I,$,B),B},v=this&&this.__param||function(U,I){return function($,te){I($,te,U)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRenderer=void 0;const f=d(3787),w=d(2550),x=d(2223),R=d(6171),E=d(4725),a=d(8055),o=d(8460),c=d(844),h=d(2585),S="xterm-dom-renderer-owner-",y="xterm-rows",A="xterm-fg-",D="xterm-bg-",g="xterm-focus",L="xterm-selection";let O=1,z=l.DomRenderer=class extends c.Disposable{constructor(U,I,$,te,G,K,B,F,W,j){super(),this._element=U,this._screenElement=I,this._viewportElement=$,this._linkifier2=te,this._charSizeService=K,this._optionsService=B,this._bufferService=F,this._coreBrowserService=W,this._themeService=j,this._terminalClass=O++,this._rowElements=[],this.onRequestRedraw=this.register(new o.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(y),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(L),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,R.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((V=>this._injectCss(V)))),this._injectCss(this._themeService.colors),this._rowFactory=G.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((V=>this._handleLinkHover(V)))),this.register(this._linkifier2.onHideLinkUnderline((V=>this._handleLinkLeave(V)))),this.register((0,c.toDisposable)((()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new w.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const U=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*U,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*U),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/U),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/U),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const $ of this._rowElements)$.style.width=`${this.dimensions.css.canvas.width}px`,$.style.height=`${this.dimensions.css.cell.height}px`,$.style.lineHeight=`${this.dimensions.css.cell.height}px`,$.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const I=`${this._terminalSelector} .${y} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(U){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let I=`${this._terminalSelector} .${y} { color: ${U.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;I+=`${this._terminalSelector} .${y} .xterm-dim { color: ${a.color.multiplyOpacity(U.foreground,.5).css};}`,I+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,I+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",I+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${U.cursor.css};  color: ${U.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${U.cursor.css}; }}`,I+=`${this._terminalSelector} .${y}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-block { background-color: ${U.cursor.css}; color: ${U.cursorAccent.css};}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${U.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${U.cursor.css} inset;}${this._terminalSelector} .${y} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${U.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,I+=`${this._terminalSelector} .${L} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${L} div { position: absolute; background-color: ${U.selectionBackgroundOpaque.css};}${this._terminalSelector} .${L} div { position: absolute; background-color: ${U.selectionInactiveBackgroundOpaque.css};}`;for(const[$,te]of U.ansi.entries())I+=`${this._terminalSelector} .${A}${$} { color: ${te.css}; }${this._terminalSelector} .${A}${$}.xterm-dim { color: ${a.color.multiplyOpacity(te,.5).css}; }${this._terminalSelector} .${D}${$} { background-color: ${te.css}; }`;I+=`${this._terminalSelector} .${A}${x.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(U.background).css}; }${this._terminalSelector} .${A}${x.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(U.background),.5).css}; }${this._terminalSelector} .${D}${x.INVERTED_DEFAULT_COLOR} { background-color: ${U.foreground.css}; }`,this._themeStyleElement.textContent=I}_setDefaultSpacing(){const U=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${U}px`,this._rowFactory.defaultSpacing=U}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(U,I){for(let $=this._rowElements.length;$<=I;$++){const te=document.createElement("div");this._rowContainer.appendChild(te),this._rowElements.push(te)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(U,I){this._refreshRowElements(U,I),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(U,I,$){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(U,I,$),this.renderRows(0,this._bufferService.rows-1),!U||!I)return;const te=U[1]-this._bufferService.buffer.ydisp,G=I[1]-this._bufferService.buffer.ydisp,K=Math.max(te,0),B=Math.min(G,this._bufferService.rows-1);if(K>=this._bufferService.rows||B<0)return;const F=document.createDocumentFragment();if($){const W=U[0]>I[0];F.appendChild(this._createSelectionElement(K,W?I[0]:U[0],W?U[0]:I[0],B-K+1))}else{const W=te===K?U[0]:0,j=K===G?I[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(K,W,j));const V=B-K-1;if(F.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,V)),K!==B){const ee=G===B?I[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(B,0,ee))}}this._selectionContainer.appendChild(F)}_createSelectionElement(U,I,$,te=1){const G=document.createElement("div");return G.style.height=te*this.dimensions.css.cell.height+"px",G.style.top=U*this.dimensions.css.cell.height+"px",G.style.left=I*this.dimensions.css.cell.width+"px",G.style.width=this.dimensions.css.cell.width*($-I)+"px",G}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const U of this._rowElements)U.replaceChildren()}renderRows(U,I){const $=this._bufferService.buffer,te=$.ybase+$.y,G=Math.min($.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,B=this._optionsService.rawOptions.cursorStyle,F=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=U;W<=I;W++){const j=W+$.ydisp,V=this._rowElements[W],ee=$.lines.get(j);if(!V||!ee)break;V.replaceChildren(...this._rowFactory.createRow(ee,j,j===te,B,F,G,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!0)}_handleLinkLeave(U){this._setCellUnderline(U.x1,U.x2,U.y1,U.y2,U.cols,!1)}_setCellUnderline(U,I,$,te,G,K){$<0&&(U=0),te<0&&(I=0);const B=this._bufferService.rows-1;$=Math.max(Math.min($,B),0),te=Math.max(Math.min(te,B),0),G=Math.min(G,this._bufferService.cols);const F=this._bufferService.buffer,W=F.ybase+F.y,j=Math.min(F.x,G-1),V=this._optionsService.rawOptions.cursorBlink,ee=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let se=$;se<=te;++se){const me=se+F.ydisp,N=this._rowElements[se],Q=F.lines.get(me);if(!N||!Q)break;N.replaceChildren(...this._rowFactory.createRow(Q,me,me===W,ee,Y,j,V,this.dimensions.css.cell.width,this._widthCache,K?se===$?U:0:-1,K?(se===te?I:G)-1:-1))}}};l.DomRenderer=z=_([v(4,h.IInstantiationService),v(5,E.ICharSizeService),v(6,h.IOptionsService),v(7,h.IBufferService),v(8,E.ICoreBrowserService),v(9,E.IThemeService)],z)},3787:function(k,l,d){var _=this&&this.__decorate||function(A,D,g,L){var O,z=arguments.length,U=z<3?D:L===null?L=Object.getOwnPropertyDescriptor(D,g):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(A,D,g,L);else for(var I=A.length-1;I>=0;I--)(O=A[I])&&(U=(z<3?O(U):z>3?O(D,g,U):O(D,g))||U);return z>3&&U&&Object.defineProperty(D,g,U),U},v=this&&this.__param||function(A,D){return function(g,L){D(g,L,A)}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomRendererRowFactory=void 0;const f=d(2223),w=d(643),x=d(511),R=d(2585),E=d(8055),a=d(4725),o=d(4269),c=d(6171),h=d(3734);let S=l.DomRendererRowFactory=class{constructor(A,D,g,L,O,z,U){this._document=A,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=L,this._coreService=O,this._decorationService=z,this._themeService=U,this._workCell=new x.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(A,D,g){this._selectionStart=A,this._selectionEnd=D,this._columnSelectMode=g}createRow(A,D,g,L,O,z,U,I,$,te,G){const K=[],B=this._characterJoinerService.getJoinedCharacters(D),F=this._themeService.colors;let W,j=A.getNoBgTrimmedLength();g&&j<z+1&&(j=z+1);let V=0,ee="",Y=0,se=0,me=0,N=!1,Q=0,ie=!1,ne=0;const Re=[],ve=te!==-1&&G!==-1;for(let Le=0;Le<j;Le++){A.loadCell(Le,this._workCell);let Ne=this._workCell.getWidth();if(Ne===0)continue;let Fe=!1,Ce=Le,Be=this._workCell;if(B.length>0&&Le===B[0][0]){Fe=!0;const We=B.shift();Be=new o.JoinedCellData(this._workCell,A.translateToString(!0,We[0],We[1]),We[1]-We[0]),Ce=We[1]-1,Ne=Be.getWidth()}const Ut=this._isCellInSelection(Le,D),Xt=g&&Le===z,Kt=ve&&Le>=te&&Le<=G;let Lt=!1;this._decorationService.forEachDecorationAtCell(Le,D,void 0,(We=>{Lt=!0}));let jt=Be.getChars()||w.WHITESPACE_CELL_CHAR;if(jt===" "&&(Be.isUnderline()||Be.isOverline())&&(jt=""),ne=Ne*I-$.get(jt,Be.isBold(),Be.isItalic()),W){if(V&&(Ut&&ie||!Ut&&!ie&&Be.bg===Y)&&(Ut&&ie&&F.selectionForeground||Be.fg===se)&&Be.extended.ext===me&&Kt===N&&ne===Q&&!Xt&&!Fe&&!Lt){ee+=jt,V++;continue}V&&(W.textContent=ee),W=this._document.createElement("span"),V=0,ee=""}else W=this._document.createElement("span");if(Y=Be.bg,se=Be.fg,me=Be.extended.ext,N=Kt,Q=ne,ie=Ut,Fe&&z>=Le&&z<=Ce&&(z=Le),!this._coreService.isCursorHidden&&Xt){if(Re.push("xterm-cursor"),this._coreBrowserService.isFocused)U&&Re.push("xterm-cursor-blink"),Re.push(L==="bar"?"xterm-cursor-bar":L==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(O)switch(O){case"outline":Re.push("xterm-cursor-outline");break;case"block":Re.push("xterm-cursor-block");break;case"bar":Re.push("xterm-cursor-bar");break;case"underline":Re.push("xterm-cursor-underline")}}if(Be.isBold()&&Re.push("xterm-bold"),Be.isItalic()&&Re.push("xterm-italic"),Be.isDim()&&Re.push("xterm-dim"),ee=Be.isInvisible()?w.WHITESPACE_CELL_CHAR:Be.getChars()||w.WHITESPACE_CELL_CHAR,Be.isUnderline()&&(Re.push(`xterm-underline-${Be.extended.underlineStyle}`),ee===" "&&(ee=""),!Be.isUnderlineColorDefault()))if(Be.isUnderlineColorRGB())W.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(Be.getUnderlineColor()).join(",")})`;else{let We=Be.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Be.isBold()&&We<8&&(We+=8),W.style.textDecorationColor=F.ansi[We].css}Be.isOverline()&&(Re.push("xterm-overline"),ee===" "&&(ee="")),Be.isStrikethrough()&&Re.push("xterm-strikethrough"),Kt&&(W.style.textDecoration="underline");let lt=Be.getFgColor(),Ae=Be.getFgColorMode(),ut=Be.getBgColor(),mt=Be.getBgColorMode();const Ke=!!Be.isInverse();if(Ke){const We=lt;lt=ut,ut=We;const It=Ae;Ae=mt,mt=It}let ht,Pt,wt,Nt=!1;switch(this._decorationService.forEachDecorationAtCell(Le,D,void 0,(We=>{We.options.layer!=="top"&&Nt||(We.backgroundColorRGB&&(mt=50331648,ut=We.backgroundColorRGB.rgba>>8&16777215,ht=We.backgroundColorRGB),We.foregroundColorRGB&&(Ae=50331648,lt=We.foregroundColorRGB.rgba>>8&16777215,Pt=We.foregroundColorRGB),Nt=We.options.layer==="top")})),!Nt&&Ut&&(ht=this._coreBrowserService.isFocused?F.selectionBackgroundOpaque:F.selectionInactiveBackgroundOpaque,ut=ht.rgba>>8&16777215,mt=50331648,Nt=!0,F.selectionForeground&&(Ae=50331648,lt=F.selectionForeground.rgba>>8&16777215,Pt=F.selectionForeground)),Nt&&Re.push("xterm-decoration-top"),mt){case 16777216:case 33554432:wt=F.ansi[ut],Re.push(`xterm-bg-${ut}`);break;case 50331648:wt=E.rgba.toColor(ut>>16,ut>>8&255,255&ut),this._addStyle(W,`background-color:#${y((ut>>>0).toString(16),"0",6)}`);break;default:Ke?(wt=F.foreground,Re.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):wt=F.background}switch(ht||Be.isDim()&&(ht=E.color.multiplyOpacity(wt,.5)),Ae){case 16777216:case 33554432:Be.isBold()&&lt<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(lt+=8),this._applyMinimumContrast(W,wt,F.ansi[lt],Be,ht,void 0)||Re.push(`xterm-fg-${lt}`);break;case 50331648:const We=E.rgba.toColor(lt>>16&255,lt>>8&255,255&lt);this._applyMinimumContrast(W,wt,We,Be,ht,Pt)||this._addStyle(W,`color:#${y(lt.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(W,wt,F.foreground,Be,ht,void 0)||Ke&&Re.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}Re.length&&(W.className=Re.join(" "),Re.length=0),Xt||Fe||Lt?W.textContent=ee:V++,ne!==this.defaultSpacing&&(W.style.letterSpacing=`${ne}px`),K.push(W),Le=Ce}return W&&V&&(W.textContent=ee),K}_applyMinimumContrast(A,D,g,L,O,z){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(L.getCode()))return!1;const U=this._getContrastCache(L);let I;if(O||z||(I=U.getColor(D.rgba,g.rgba)),I===void 0){const $=this._optionsService.rawOptions.minimumContrastRatio/(L.isDim()?2:1);I=E.color.ensureContrastRatio(O||D,z||g,$),U.setColor((O||D).rgba,(z||g).rgba,I??null)}return!!I&&(this._addStyle(A,`color:${I.css}`),!0)}_getContrastCache(A){return A.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(A,D){A.setAttribute("style",`${A.getAttribute("style")||""}${D};`)}_isCellInSelection(A,D){const g=this._selectionStart,L=this._selectionEnd;return!(!g||!L)&&(this._columnSelectMode?g[0]<=L[0]?A>=g[0]&&D>=g[1]&&A<L[0]&&D<=L[1]:A<g[0]&&D>=g[1]&&A>=L[0]&&D<=L[1]:D>g[1]&&D<L[1]||g[1]===L[1]&&D===g[1]&&A>=g[0]&&A<L[0]||g[1]<L[1]&&D===L[1]&&A<L[0]||g[1]<L[1]&&D===g[1]&&A>=g[0])}};function y(A,D,g){for(;A.length<g;)A=D+A;return A}l.DomRendererRowFactory=S=_([v(1,a.ICharacterJoinerService),v(2,R.IOptionsService),v(3,a.ICoreBrowserService),v(4,R.ICoreService),v(5,R.IDecorationService),v(6,a.IThemeService)],S)},2550:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WidthCache=void 0,l.WidthCache=class{constructor(d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=d.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const _=d.createElement("span"),v=d.createElement("span");v.style.fontWeight="bold";const f=d.createElement("span");f.style.fontStyle="italic";const w=d.createElement("span");w.style.fontWeight="bold",w.style.fontStyle="italic",this._measureElements=[_,v,f,w],this._container.appendChild(_),this._container.appendChild(v),this._container.appendChild(f),this._container.appendChild(w),d.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(d,_,v,f){d===this._font&&_===this._fontSize&&v===this._weight&&f===this._weightBold||(this._font=d,this._fontSize=_,this._weight=v,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(d,_,v){let f=0;if(!_&&!v&&d.length===1&&(f=d.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(d,0);let w=d;_&&(w+="B"),v&&(w+="I");let x=this._holey.get(w);if(x===void 0){let R=0;_&&(R|=1),v&&(R|=2),x=this._measure(d,R),this._holey.set(w,x)}return x}_measure(d,_){const v=this._measureElements[_];return v.textContent=d.repeat(32),v.offsetWidth/32}}},2223:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TEXT_BASELINE=l.DIM_OPACITY=l.INVERTED_DEFAULT_COLOR=void 0;const _=d(6114);l.INVERTED_DEFAULT_COLOR=257,l.DIM_OPACITY=.5,l.TEXT_BASELINE=_.isFirefox||_.isLegacyEdge?"bottom":"ideographic"},6171:(k,l)=>{function d(_){return 57508<=_&&_<=57558}Object.defineProperty(l,"__esModule",{value:!0}),l.createRenderDimensions=l.excludeFromContrastRatioDemands=l.isRestrictedPowerlineGlyph=l.isPowerlineGlyph=l.throwIfFalsy=void 0,l.throwIfFalsy=function(_){if(!_)throw new Error("value must not be falsy");return _},l.isPowerlineGlyph=d,l.isRestrictedPowerlineGlyph=function(_){return 57520<=_&&_<=57527},l.excludeFromContrastRatioDemands=function(_){return d(_)||(function(v){return 9472<=v&&v<=9631})(_)},l.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionModel=void 0,l.SelectionModel=class{constructor(d){this._bufferService=d,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?d%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)-1]:[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[d,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const d=this.selectionStart[0]+this.selectionStartLength;return d>this._bufferService.cols?[d%this._bufferService.cols,this.selectionStart[1]+Math.floor(d/this._bufferService.cols)]:[Math.max(d,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const d=this.selectionStart,_=this.selectionEnd;return!(!d||!_)&&(d[1]>_[1]||d[1]===_[1]&&d[0]>_[0])}handleTrim(d){return this.selectionStart&&(this.selectionStart[1]-=d),this.selectionEnd&&(this.selectionEnd[1]-=d),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(k,l,d){var _=this&&this.__decorate||function(a,o,c,h){var S,y=arguments.length,A=y<3?o:h===null?h=Object.getOwnPropertyDescriptor(o,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,h);else for(var D=a.length-1;D>=0;D--)(S=a[D])&&(A=(y<3?S(A):y>3?S(o,c,A):S(o,c))||A);return y>3&&A&&Object.defineProperty(o,c,A),A},v=this&&this.__param||function(a,o){return function(c,h){o(c,h,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharSizeService=void 0;const f=d(2585),w=d(8460),x=d(844);let R=l.CharSizeService=class extends x.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,o,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new w.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new E(a,o,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};l.CharSizeService=R=_([v(2,f.IOptionsService)],R);class E{constructor(o,c,h){this._document=o,this._parentElement=c,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const o={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return o.width!==0&&o.height!==0&&(this._result.width=o.width/32,this._result.height=Math.ceil(o.height)),this._result}}},4269:function(k,l,d){var _=this&&this.__decorate||function(o,c,h,S){var y,A=arguments.length,D=A<3?c:S===null?S=Object.getOwnPropertyDescriptor(c,h):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(o,c,h,S);else for(var g=o.length-1;g>=0;g--)(y=o[g])&&(D=(A<3?y(D):A>3?y(c,h,D):y(c,h))||D);return A>3&&D&&Object.defineProperty(c,h,D),D},v=this&&this.__param||function(o,c){return function(h,S){c(h,S,o)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CharacterJoinerService=l.JoinedCellData=void 0;const f=d(3734),w=d(643),x=d(511),R=d(2585);class E extends f.AttributeData{constructor(c,h,S){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=h,this._width=S}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.JoinedCellData=E;let a=l.CharacterJoinerService=class $m{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new x.CellData}register(c){const h={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(h),h.id}deregister(c){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===c)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(c);if(!h||h.length===0)return[];const S=[],y=h.translateToString(!0);let A=0,D=0,g=0,L=h.getFg(0),O=h.getBg(0);for(let z=0;z<h.getTrimmedLength();z++)if(h.loadCell(z,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==L||this._workCell.bg!==O){if(z-A>1){const U=this._getJoinedRanges(y,g,D,h,A);for(let I=0;I<U.length;I++)S.push(U[I])}A=z,g=D,L=this._workCell.fg,O=this._workCell.bg}D+=this._workCell.getChars().length||w.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-A>1){const z=this._getJoinedRanges(y,g,D,h,A);for(let U=0;U<z.length;U++)S.push(z[U])}return S}_getJoinedRanges(c,h,S,y,A){const D=c.substring(h,S);let g=[];try{g=this._characterJoiners[0].handler(D)}catch(L){console.error(L)}for(let L=1;L<this._characterJoiners.length;L++)try{const O=this._characterJoiners[L].handler(D);for(let z=0;z<O.length;z++)$m._mergeRanges(g,O[z])}catch(O){console.error(O)}return this._stringRangesToCellRanges(g,y,A),g}_stringRangesToCellRanges(c,h,S){let y=0,A=!1,D=0,g=c[y];if(g){for(let L=S;L<this._bufferService.cols;L++){const O=h.getWidth(L),z=h.getString(L).length||w.WHITESPACE_CELL_CHAR.length;if(O!==0){if(!A&&g[0]<=D&&(g[0]=L,A=!0),g[1]<=D){if(g[1]=L,g=c[++y],!g)break;g[0]<=D?(g[0]=L,A=!0):A=!1}D+=z}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(c,h){let S=!1;for(let y=0;y<c.length;y++){const A=c[y];if(S){if(h[1]<=A[0])return c[y-1][1]=h[1],c;if(h[1]<=A[1])return c[y-1][1]=Math.max(h[1],A[1]),c.splice(y,1),c;c.splice(y,1),y--}else{if(h[1]<=A[0])return c.splice(y,0,h),c;if(h[1]<=A[1])return A[0]=Math.min(h[0],A[0]),c;h[0]<A[1]&&(A[0]=Math.min(h[0],A[0]),S=!0)}}return S?c[c.length-1][1]=h[1]:c.push(h),c}};l.CharacterJoinerService=a=_([v(0,R.IBufferService)],a)},5114:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreBrowserService=void 0,l.CoreBrowserService=class{constructor(d,_){this._textarea=d,this.window=_,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(k,l,d){var _=this&&this.__decorate||function(R,E,a,o){var c,h=arguments.length,S=h<3?E:o===null?o=Object.getOwnPropertyDescriptor(E,a):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(R,E,a,o);else for(var y=R.length-1;y>=0;y--)(c=R[y])&&(S=(h<3?c(S):h>3?c(E,a,S):c(E,a))||S);return h>3&&S&&Object.defineProperty(E,a,S),S},v=this&&this.__param||function(R,E){return function(a,o){E(a,o,R)}};Object.defineProperty(l,"__esModule",{value:!0}),l.MouseService=void 0;const f=d(4725),w=d(9806);let x=l.MouseService=class{constructor(R,E){this._renderService=R,this._charSizeService=E}getCoords(R,E,a,o,c){return(0,w.getCoords)(window,R,E,a,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(R,E){const a=(0,w.getCoordsRelativeToElement)(window,R,E);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};l.MouseService=x=_([v(0,f.IRenderService),v(1,f.ICharSizeService)],x)},3230:function(k,l,d){var _=this&&this.__decorate||function(S,y,A,D){var g,L=arguments.length,O=L<3?y:D===null?D=Object.getOwnPropertyDescriptor(y,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(S,y,A,D);else for(var z=S.length-1;z>=0;z--)(g=S[z])&&(O=(L<3?g(O):L>3?g(y,A,O):g(y,A))||O);return L>3&&O&&Object.defineProperty(y,A,O),O},v=this&&this.__param||function(S,y){return function(A,D){y(A,D,S)}};Object.defineProperty(l,"__esModule",{value:!0}),l.RenderService=void 0;const f=d(3656),w=d(6193),x=d(5596),R=d(4725),E=d(8460),a=d(844),o=d(7226),c=d(2585);let h=l.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(S,y,A,D,g,L,O,z){if(super(),this._rowCount=S,this._charSizeService=D,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new o.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new E.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new E.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new E.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new E.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new w.RenderDebouncer(O.window,((U,I)=>this._renderRows(U,I))),this.register(this._renderDebouncer),this._screenDprMonitor=new x.ScreenDprMonitor(O.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(L.onResize((()=>this._fullRefresh()))),this.register(L.buffers.onBufferActivate((()=>{var U;return(U=this._renderer.value)===null||U===void 0?void 0:U.clear()}))),this.register(A.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(g.onDecorationRegistered((()=>this._fullRefresh()))),this.register(g.onDecorationRemoved((()=>this._fullRefresh()))),this.register(A.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(L.cols,L.rows),this._fullRefresh()}))),this.register(A.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(L.buffer.y,L.buffer.y,!0)))),this.register((0,f.addDisposableDomListener)(O.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(z.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in O.window){const U=new O.window.IntersectionObserver((I=>this._handleIntersectionChange(I[I.length-1])),{threshold:0});U.observe(y),this.register({dispose:()=>U.disconnect()})}}_handleIntersectionChange(S){this._isPaused=S.isIntersecting===void 0?S.intersectionRatio===0:!S.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(S,y,A=!1){this._isPaused?this._needsFullRefresh=!0:(A||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(S,y,this._rowCount))}_renderRows(S,y){this._renderer.value&&(S=Math.min(S,this._rowCount-1),y=Math.min(y,this._rowCount-1),this._renderer.value.renderRows(S,y),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:S,end:y}),this._onRender.fire({start:S,end:y}),this._isNextRenderRedrawOnly=!0)}resize(S,y){this._rowCount=y,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(S){this._renderer.value=S,this._renderer.value.onRequestRedraw((y=>this.refreshRows(y.start,y.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(S){return this._renderDebouncer.addRefreshCallback(S)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var S,y;this._renderer.value&&((y=(S=this._renderer.value).clearTextureAtlas)===null||y===void 0||y.call(S),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(S,y){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(S,y))):this._renderer.value.handleResize(S,y),this._fullRefresh())}handleCharSizeChanged(){var S;(S=this._renderer.value)===null||S===void 0||S.handleCharSizeChanged()}handleBlur(){var S;(S=this._renderer.value)===null||S===void 0||S.handleBlur()}handleFocus(){var S;(S=this._renderer.value)===null||S===void 0||S.handleFocus()}handleSelectionChanged(S,y,A){var D;this._selectionState.start=S,this._selectionState.end=y,this._selectionState.columnSelectMode=A,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(S,y,A)}handleCursorMove(){var S;(S=this._renderer.value)===null||S===void 0||S.handleCursorMove()}clear(){var S;(S=this._renderer.value)===null||S===void 0||S.clear()}};l.RenderService=h=_([v(2,c.IOptionsService),v(3,R.ICharSizeService),v(4,c.IDecorationService),v(5,c.IBufferService),v(6,R.ICoreBrowserService),v(7,R.IThemeService)],h)},9312:function(k,l,d){var _=this&&this.__decorate||function(g,L,O,z){var U,I=arguments.length,$=I<3?L:z===null?z=Object.getOwnPropertyDescriptor(L,O):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(g,L,O,z);else for(var te=g.length-1;te>=0;te--)(U=g[te])&&($=(I<3?U($):I>3?U(L,O,$):U(L,O))||$);return I>3&&$&&Object.defineProperty(L,O,$),$},v=this&&this.__param||function(g,L){return function(O,z){L(O,z,g)}};Object.defineProperty(l,"__esModule",{value:!0}),l.SelectionService=void 0;const f=d(9806),w=d(9504),x=d(456),R=d(4725),E=d(8460),a=d(844),o=d(6114),c=d(4841),h=d(511),S=d(2585),y="",A=new RegExp(y,"g");let D=l.SelectionService=class extends a.Disposable{constructor(g,L,O,z,U,I,$,te,G){super(),this._element=g,this._screenElement=L,this._linkifier=O,this._bufferService=z,this._coreService=U,this._mouseService=I,this._optionsService=$,this._renderService=te,this._coreBrowserService=G,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new E.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new E.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new E.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new E.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=K=>this._handleMouseMove(K),this._mouseUpListener=K=>this._handleMouseUp(K),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((K=>this._handleTrim(K))),this.register(this._bufferService.buffers.onBufferActivate((K=>this._handleBufferActivate(K)))),this.enable(),this._model=new x.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!g||!L||g[0]===L[0]&&g[1]===L[1])}get selectionText(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!g||!L)return"";const O=this._bufferService.buffer,z=[];if(this._activeSelectionMode===3){if(g[0]===L[0])return"";const U=g[0]<L[0]?g[0]:L[0],I=g[0]<L[0]?L[0]:g[0];for(let $=g[1];$<=L[1];$++){const te=O.translateBufferLineToString($,!0,U,I);z.push(te)}}else{const U=g[1]===L[1]?L[0]:void 0;z.push(O.translateBufferLineToString(g[1],!0,g[0],U));for(let I=g[1]+1;I<=L[1]-1;I++){const $=O.lines.get(I),te=O.translateBufferLineToString(I,!0);$?.isWrapped?z[z.length-1]+=te:z.push(te)}if(g[1]!==L[1]){const I=O.lines.get(L[1]),$=O.translateBufferLineToString(L[1],!0,0,L[0]);I&&I.isWrapped?z[z.length-1]+=$:z.push($)}}return z.map((U=>U.replace(A," "))).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),o.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){const L=this._getMouseBufferCoords(g),O=this._model.finalSelectionStart,z=this._model.finalSelectionEnd;return!!(O&&z&&L)&&this._areCoordsInSelection(L,O,z)}isCellInSelection(g,L){const O=this._model.finalSelectionStart,z=this._model.finalSelectionEnd;return!(!O||!z)&&this._areCoordsInSelection([g,L],O,z)}_areCoordsInSelection(g,L,O){return g[1]>L[1]&&g[1]<O[1]||L[1]===O[1]&&g[1]===L[1]&&g[0]>=L[0]&&g[0]<O[0]||L[1]<O[1]&&g[1]===O[1]&&g[0]<O[0]||L[1]<O[1]&&g[1]===L[1]&&g[0]>=L[0]}_selectWordAtCursor(g,L){var O,z;const U=(z=(O=this._linkifier.currentLink)===null||O===void 0?void 0:O.link)===null||z===void 0?void 0:z.range;if(U)return this._model.selectionStart=[U.start.x-1,U.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(U,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const I=this._getMouseBufferCoords(g);return!!I&&(this._selectWordAt(I,L),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,L){this._model.clearSelection(),g=Math.max(g,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){const L=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L}_getMouseEventScrollAmount(g){let L=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1];const O=this._renderService.dimensions.css.canvas.height;return L>=0&&L<=O?0:(L>O&&(L-=O),L=Math.min(Math.max(L,-50),50),L/=50,L/Math.abs(L)+Math.round(14*L))}shouldForceSelection(g){return o.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&L.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){const L=this._getMouseBufferCoords(g);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))}shouldColumnSelect(g){return g.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;const L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const O=this._bufferService.buffer;if(this._model.selectionEnd[1]<O.lines.length){const z=O.lines.get(this._model.selectionEnd[1]);z&&z.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){const L=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const O=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(O&&O[0]!==void 0&&O[1]!==void 0){const z=(0,w.moveToCellSequence)(O[0]-1,O[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(z,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const g=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,O=!(!g||!L||g[0]===L[0]&&g[1]===L[1]);O?g&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,L,O)):this._oldHasSelection&&this._fireOnSelectionChange(g,L,O)}_fireOnSelectionChange(g,L,O){this._oldSelectionStart=g,this._oldSelectionEnd=L,this._oldHasSelection=O,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim((L=>this._handleTrim(L)))}_convertViewportColToCharacterIndex(g,L){let O=L;for(let z=0;L>=z;z++){const U=g.loadCell(z,this._workCell).getChars().length;this._workCell.getWidth()===0?O--:U>1&&L!==z&&(O+=U-1)}return O}setSelection(g,L,O){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,L],this._model.selectionStartLength=O,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,L,O=!0,z=!0){if(g[0]>=this._bufferService.cols)return;const U=this._bufferService.buffer,I=U.lines.get(g[1]);if(!I)return;const $=U.translateBufferLineToString(g[1],!1);let te=this._convertViewportColToCharacterIndex(I,g[0]),G=te;const K=g[0]-te;let B=0,F=0,W=0,j=0;if($.charAt(te)===" "){for(;te>0&&$.charAt(te-1)===" ";)te--;for(;G<$.length&&$.charAt(G+1)===" ";)G++}else{let Y=g[0],se=g[0];I.getWidth(Y)===0&&(B++,Y--),I.getWidth(se)===2&&(F++,se++);const me=I.getString(se).length;for(me>1&&(j+=me-1,G+=me-1);Y>0&&te>0&&!this._isCharWordSeparator(I.loadCell(Y-1,this._workCell));){I.loadCell(Y-1,this._workCell);const N=this._workCell.getChars().length;this._workCell.getWidth()===0?(B++,Y--):N>1&&(W+=N-1,te-=N-1),te--,Y--}for(;se<I.length&&G+1<$.length&&!this._isCharWordSeparator(I.loadCell(se+1,this._workCell));){I.loadCell(se+1,this._workCell);const N=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,se++):N>1&&(j+=N-1,G+=N-1),G++,se++}}G++;let V=te+K-B+W,ee=Math.min(this._bufferService.cols,G-te+B+F-W-j);if(L||$.slice(te,G).trim()!==""){if(O&&V===0&&I.getCodePoint(0)!==32){const Y=U.lines.get(g[1]-1);if(Y&&I.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){const se=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(se){const me=this._bufferService.cols-se.start;V-=me,ee+=me}}}if(z&&V+ee===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){const Y=U.lines.get(g[1]+1);if(Y?.isWrapped&&Y.getCodePoint(0)!==32){const se=this._getWordAt([0,g[1]+1],!1,!1,!0);se&&(ee+=se.length)}}return{start:V,length:ee}}}_selectWordAt(g,L){const O=this._getWordAt(g,L);if(O){for(;O.start<0;)O.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[O.start,g[1]],this._model.selectionStartLength=O.length}}_selectToWordAt(g){const L=this._getWordAt(g,!0);if(L){let O=g[1];for(;L.start<0;)L.start+=this._bufferService.cols,O--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,O++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,O]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){const L=this._bufferService.buffer.getWrappedRangeForLine(g),O={start:{x:0,y:L.first},end:{x:this._bufferService.cols-1,y:L.last}};this._model.selectionStart=[0,L.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(O,this._bufferService.cols)}};l.SelectionService=D=_([v(3,S.IBufferService),v(4,S.ICoreService),v(5,R.IMouseService),v(6,S.IOptionsService),v(7,R.IRenderService),v(8,R.ICoreBrowserService)],D)},4725:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IThemeService=l.ICharacterJoinerService=l.ISelectionService=l.IRenderService=l.IMouseService=l.ICoreBrowserService=l.ICharSizeService=void 0;const _=d(8343);l.ICharSizeService=(0,_.createDecorator)("CharSizeService"),l.ICoreBrowserService=(0,_.createDecorator)("CoreBrowserService"),l.IMouseService=(0,_.createDecorator)("MouseService"),l.IRenderService=(0,_.createDecorator)("RenderService"),l.ISelectionService=(0,_.createDecorator)("SelectionService"),l.ICharacterJoinerService=(0,_.createDecorator)("CharacterJoinerService"),l.IThemeService=(0,_.createDecorator)("ThemeService")},6731:function(k,l,d){var _=this&&this.__decorate||function(D,g,L,O){var z,U=arguments.length,I=U<3?g:O===null?O=Object.getOwnPropertyDescriptor(g,L):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(D,g,L,O);else for(var $=D.length-1;$>=0;$--)(z=D[$])&&(I=(U<3?z(I):U>3?z(g,L,I):z(g,L))||I);return U>3&&I&&Object.defineProperty(g,L,I),I},v=this&&this.__param||function(D,g){return function(L,O){g(L,O,D)}};Object.defineProperty(l,"__esModule",{value:!0}),l.ThemeService=l.DEFAULT_ANSI_COLORS=void 0;const f=d(7239),w=d(8055),x=d(8460),R=d(844),E=d(2585),a=w.css.toColor("#ffffff"),o=w.css.toColor("#000000"),c=w.css.toColor("#ffffff"),h=w.css.toColor("#000000"),S={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};l.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const D=[w.css.toColor("#2e3436"),w.css.toColor("#cc0000"),w.css.toColor("#4e9a06"),w.css.toColor("#c4a000"),w.css.toColor("#3465a4"),w.css.toColor("#75507b"),w.css.toColor("#06989a"),w.css.toColor("#d3d7cf"),w.css.toColor("#555753"),w.css.toColor("#ef2929"),w.css.toColor("#8ae234"),w.css.toColor("#fce94f"),w.css.toColor("#729fcf"),w.css.toColor("#ad7fa8"),w.css.toColor("#34e2e2"),w.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let L=0;L<216;L++){const O=g[L/36%6|0],z=g[L/6%6|0],U=g[L%6];D.push({css:w.channels.toCss(O,z,U),rgba:w.channels.toRgba(O,z,U)})}for(let L=0;L<24;L++){const O=8+10*L;D.push({css:w.channels.toCss(O,O,O),rgba:w.channels.toRgba(O,O,O)})}return D})());let y=l.ThemeService=class extends R.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new x.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:o,cursor:c,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:S,selectionBackgroundOpaque:w.color.blend(o,S),selectionInactiveBackgroundTransparent:S,selectionInactiveBackgroundOpaque:w.color.blend(o,S),ansi:l.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(D={}){const g=this._colors;if(g.foreground=A(D.foreground,a),g.background=A(D.background,o),g.cursor=A(D.cursor,c),g.cursorAccent=A(D.cursorAccent,h),g.selectionBackgroundTransparent=A(D.selectionBackground,S),g.selectionBackgroundOpaque=w.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=A(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=w.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?A(D.selectionForeground,w.NULL_COLOR):void 0,g.selectionForeground===w.NULL_COLOR&&(g.selectionForeground=void 0),w.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=w.color.opacity(g.selectionBackgroundTransparent,.3)),w.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=w.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=l.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=A(D.black,l.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=A(D.red,l.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=A(D.green,l.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=A(D.yellow,l.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=A(D.blue,l.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=A(D.magenta,l.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=A(D.cyan,l.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=A(D.white,l.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=A(D.brightBlack,l.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=A(D.brightRed,l.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=A(D.brightGreen,l.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=A(D.brightYellow,l.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=A(D.brightBlue,l.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=A(D.brightMagenta,l.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=A(D.brightCyan,l.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=A(D.brightWhite,l.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){const L=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let O=0;O<L;O++)g.ansi[O+16]=A(D.extendedAnsi[O],l.DEFAULT_ANSI_COLORS[O+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function A(D,g){if(D!==void 0)try{return w.css.toColor(D)}catch{}return g}l.ThemeService=y=_([v(0,E.IOptionsService)],y)},6349:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CircularList=void 0;const _=d(8460),v=d(844);class f extends v.Disposable{constructor(x){super(),this._maxLength=x,this.onDeleteEmitter=this.register(new _.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new _.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new _.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(x){if(this._maxLength===x)return;const R=new Array(x);for(let E=0;E<Math.min(x,this.length);E++)R[E]=this._array[this._getCyclicIndex(E)];this._array=R,this._maxLength=x,this._startIndex=0}get length(){return this._length}set length(x){if(x>this._length)for(let R=this._length;R<x;R++)this._array[R]=void 0;this._length=x}get(x){return this._array[this._getCyclicIndex(x)]}set(x,R){this._array[this._getCyclicIndex(x)]=R}push(x){this._array[this._getCyclicIndex(this._length)]=x,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(x,R,...E){if(R){for(let a=x;a<this._length-R;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+R)];this._length-=R,this.onDeleteEmitter.fire({index:x,amount:R})}for(let a=this._length-1;a>=x;a--)this._array[this._getCyclicIndex(a+E.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<E.length;a++)this._array[this._getCyclicIndex(x+a)]=E[a];if(E.length&&this.onInsertEmitter.fire({index:x,amount:E.length}),this._length+E.length>this._maxLength){const a=this._length+E.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=E.length}trimStart(x){x>this._length&&(x=this._length),this._startIndex+=x,this._length-=x,this.onTrimEmitter.fire(x)}shiftElements(x,R,E){if(!(R<=0)){if(x<0||x>=this._length)throw new Error("start argument out of range");if(x+E<0)throw new Error("Cannot shift elements in list beyond index 0");if(E>0){for(let o=R-1;o>=0;o--)this.set(x+o+E,this.get(x+o));const a=x+R+E-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<R;a++)this.set(x+a+E,this.get(x+a))}}_getCyclicIndex(x){return(this._startIndex+x)%this._maxLength}}l.CircularList=f},1439:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.clone=void 0,l.clone=function d(_,v=5){if(typeof _!="object")return _;const f=Array.isArray(_)?[]:{};for(const w in _)f[w]=v<=1?_[w]:_[w]&&d(_[w],v-1);return f}},8055:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.contrastRatio=l.toPaddedHex=l.rgba=l.rgb=l.css=l.color=l.channels=l.NULL_COLOR=void 0;const _=d(6114);let v=0,f=0,w=0,x=0;var R,E,a,o,c;function h(y){const A=y.toString(16);return A.length<2?"0"+A:A}function S(y,A){return y<A?(A+.05)/(y+.05):(y+.05)/(A+.05)}l.NULL_COLOR={css:"#00000000",rgba:0},(function(y){y.toCss=function(A,D,g,L){return L!==void 0?`#${h(A)}${h(D)}${h(g)}${h(L)}`:`#${h(A)}${h(D)}${h(g)}`},y.toRgba=function(A,D,g,L=255){return(A<<24|D<<16|g<<8|L)>>>0}})(R||(l.channels=R={})),(function(y){function A(D,g){return x=Math.round(255*g),[v,f,w]=c.toChannels(D.rgba),{css:R.toCss(v,f,w,x),rgba:R.toRgba(v,f,w,x)}}y.blend=function(D,g){if(x=(255&g.rgba)/255,x===1)return{css:g.css,rgba:g.rgba};const L=g.rgba>>24&255,O=g.rgba>>16&255,z=g.rgba>>8&255,U=D.rgba>>24&255,I=D.rgba>>16&255,$=D.rgba>>8&255;return v=U+Math.round((L-U)*x),f=I+Math.round((O-I)*x),w=$+Math.round((z-$)*x),{css:R.toCss(v,f,w),rgba:R.toRgba(v,f,w)}},y.isOpaque=function(D){return(255&D.rgba)==255},y.ensureContrastRatio=function(D,g,L){const O=c.ensureContrastRatio(D.rgba,g.rgba,L);if(O)return c.toColor(O>>24&255,O>>16&255,O>>8&255)},y.opaque=function(D){const g=(255|D.rgba)>>>0;return[v,f,w]=c.toChannels(g),{css:R.toCss(v,f,w),rgba:g}},y.opacity=A,y.multiplyOpacity=function(D,g){return x=255&D.rgba,A(D,x*g/255)},y.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}})(E||(l.color=E={})),(function(y){let A,D;if(!_.isNode){const g=document.createElement("canvas");g.width=1,g.height=1;const L=g.getContext("2d",{willReadFrequently:!0});L&&(A=L,A.globalCompositeOperation="copy",D=A.createLinearGradient(0,0,1,1))}y.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return v=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),w=parseInt(g.slice(3,4).repeat(2),16),c.toColor(v,f,w);case 5:return v=parseInt(g.slice(1,2).repeat(2),16),f=parseInt(g.slice(2,3).repeat(2),16),w=parseInt(g.slice(3,4).repeat(2),16),x=parseInt(g.slice(4,5).repeat(2),16),c.toColor(v,f,w,x);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}const L=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return v=parseInt(L[1]),f=parseInt(L[2]),w=parseInt(L[3]),x=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),c.toColor(v,f,w,x);if(!A||!D)throw new Error("css.toColor: Unsupported css format");if(A.fillStyle=D,A.fillStyle=g,typeof A.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(A.fillRect(0,0,1,1),[v,f,w,x]=A.getImageData(0,0,1,1).data,x!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:R.toRgba(v,f,w,x),css:g}}})(a||(l.css=a={})),(function(y){function A(D,g,L){const O=D/255,z=g/255,U=L/255;return .2126*(O<=.03928?O/12.92:Math.pow((O+.055)/1.055,2.4))+.7152*(z<=.03928?z/12.92:Math.pow((z+.055)/1.055,2.4))+.0722*(U<=.03928?U/12.92:Math.pow((U+.055)/1.055,2.4))}y.relativeLuminance=function(D){return A(D>>16&255,D>>8&255,255&D)},y.relativeLuminance2=A})(o||(l.rgb=o={})),(function(y){function A(g,L,O){const z=g>>24&255,U=g>>16&255,I=g>>8&255;let $=L>>24&255,te=L>>16&255,G=L>>8&255,K=S(o.relativeLuminance2($,te,G),o.relativeLuminance2(z,U,I));for(;K<O&&($>0||te>0||G>0);)$-=Math.max(0,Math.ceil(.1*$)),te-=Math.max(0,Math.ceil(.1*te)),G-=Math.max(0,Math.ceil(.1*G)),K=S(o.relativeLuminance2($,te,G),o.relativeLuminance2(z,U,I));return($<<24|te<<16|G<<8|255)>>>0}function D(g,L,O){const z=g>>24&255,U=g>>16&255,I=g>>8&255;let $=L>>24&255,te=L>>16&255,G=L>>8&255,K=S(o.relativeLuminance2($,te,G),o.relativeLuminance2(z,U,I));for(;K<O&&($<255||te<255||G<255);)$=Math.min(255,$+Math.ceil(.1*(255-$))),te=Math.min(255,te+Math.ceil(.1*(255-te))),G=Math.min(255,G+Math.ceil(.1*(255-G))),K=S(o.relativeLuminance2($,te,G),o.relativeLuminance2(z,U,I));return($<<24|te<<16|G<<8|255)>>>0}y.ensureContrastRatio=function(g,L,O){const z=o.relativeLuminance(g>>8),U=o.relativeLuminance(L>>8);if(S(z,U)<O){if(U<z){const te=A(g,L,O),G=S(z,o.relativeLuminance(te>>8));if(G<O){const K=D(g,L,O);return G>S(z,o.relativeLuminance(K>>8))?te:K}return te}const I=D(g,L,O),$=S(z,o.relativeLuminance(I>>8));if($<O){const te=A(g,L,O);return $>S(z,o.relativeLuminance(te>>8))?I:te}return I}},y.reduceLuminance=A,y.increaseLuminance=D,y.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},y.toColor=function(g,L,O,z){return{css:R.toCss(g,L,O,z),rgba:R.toRgba(g,L,O,z)}}})(c||(l.rgba=c={})),l.toPaddedHex=h,l.contrastRatio=S},8969:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CoreTerminal=void 0;const _=d(844),v=d(2585),f=d(4348),w=d(7866),x=d(744),R=d(7302),E=d(6975),a=d(8460),o=d(1753),c=d(1480),h=d(7994),S=d(9282),y=d(5435),A=d(5981),D=d(2660);let g=!1;class L extends _.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event((z=>{var U;(U=this._onScrollApi)===null||U===void 0||U.fire(z.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(z){for(const U in z)this.optionsService.options[U]=z[U]}constructor(z){super(),this._windowsWrappingHeuristics=this.register(new _.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new R.OptionsService(z)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(x.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(w.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(E.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new y.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((U=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((U=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new A.WriteBuffer(((U,I)=>this._inputHandler.parse(U,I)))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(z,U){this._writeBuffer.write(z,U)}writeSync(z,U){this._logService.logLevel<=v.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(z,U)}resize(z,U){isNaN(z)||isNaN(U)||(z=Math.max(z,x.MINIMUM_COLS),U=Math.max(U,x.MINIMUM_ROWS),this._bufferService.resize(z,U))}scroll(z,U=!1){this._bufferService.scroll(z,U)}scrollLines(z,U,I){this._bufferService.scrollLines(z,U,I)}scrollPages(z){this.scrollLines(z*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(z){const U=z-this._bufferService.buffer.ydisp;U!==0&&this.scrollLines(U)}registerEscHandler(z,U){return this._inputHandler.registerEscHandler(z,U)}registerDcsHandler(z,U){return this._inputHandler.registerDcsHandler(z,U)}registerCsiHandler(z,U){return this._inputHandler.registerCsiHandler(z,U)}registerOscHandler(z,U){return this._inputHandler.registerOscHandler(z,U)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let z=!1;const U=this.optionsService.rawOptions.windowsPty;U&&U.buildNumber!==void 0&&U.buildNumber!==void 0?z=U.backend==="conpty"&&U.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(z=!0),z?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const z=[];z.push(this.onLineFeed(S.updateWindowsModeWrappedState.bind(null,this._bufferService))),z.push(this.registerCsiHandler({final:"H"},(()=>((0,S.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,_.toDisposable)((()=>{for(const U of z)U.dispose()}))}}}l.CoreTerminal=L},8460:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.forwardEvent=l.EventEmitter=void 0,l.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=d=>(this._listeners.push(d),{dispose:()=>{if(!this._disposed){for(let _=0;_<this._listeners.length;_++)if(this._listeners[_]===d)return void this._listeners.splice(_,1)}}})),this._event}fire(d,_){const v=[];for(let f=0;f<this._listeners.length;f++)v.push(this._listeners[f]);for(let f=0;f<v.length;f++)v[f].call(void 0,d,_)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},l.forwardEvent=function(d,_){return d((v=>_.fire(v)))}},5435:function(k,l,d){var _=this&&this.__decorate||function(K,B,F,W){var j,V=arguments.length,ee=V<3?B:W===null?W=Object.getOwnPropertyDescriptor(B,F):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ee=Reflect.decorate(K,B,F,W);else for(var Y=K.length-1;Y>=0;Y--)(j=K[Y])&&(ee=(V<3?j(ee):V>3?j(B,F,ee):j(B,F))||ee);return V>3&&ee&&Object.defineProperty(B,F,ee),ee},v=this&&this.__param||function(K,B){return function(F,W){B(F,W,K)}};Object.defineProperty(l,"__esModule",{value:!0}),l.InputHandler=l.WindowsOptionsReportType=void 0;const f=d(2584),w=d(7116),x=d(2015),R=d(844),E=d(482),a=d(8437),o=d(8460),c=d(643),h=d(511),S=d(3734),y=d(2585),A=d(6242),D=d(6351),g=d(5941),L={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function z(K,B){if(K>24)return B.setWinLines||!1;switch(K){case 1:return!!B.restoreWin;case 2:return!!B.minimizeWin;case 3:return!!B.setWinPosition;case 4:return!!B.setWinSizePixels;case 5:return!!B.raiseWin;case 6:return!!B.lowerWin;case 7:return!!B.refreshWin;case 8:return!!B.setWinSizeChars;case 9:return!!B.maximizeWin;case 10:return!!B.fullscreenWin;case 11:return!!B.getWinState;case 13:return!!B.getWinPosition;case 14:return!!B.getWinSizePixels;case 15:return!!B.getScreenSizePixels;case 16:return!!B.getCellSizePixels;case 18:return!!B.getWinSizeChars;case 19:return!!B.getScreenSizeChars;case 20:return!!B.getIconTitle;case 21:return!!B.getWinTitle;case 22:return!!B.pushTitle;case 23:return!!B.popTitle;case 24:return!!B.setWinLines}return!1}var U;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(U||(l.WindowsOptionsReportType=U={}));let I=0;class $ extends R.Disposable{getAttrData(){return this._curAttrData}constructor(B,F,W,j,V,ee,Y,se,me=new x.EscapeSequenceParser){super(),this._bufferService=B,this._charsetService=F,this._coreService=W,this._logService=j,this._optionsService=V,this._oscLinkService=ee,this._coreMouseService=Y,this._unicodeService=se,this._parser=me,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new E.StringToUtf32,this._utf8Decoder=new E.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new te(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((N=>this._activeBuffer=N.activeBuffer))),this._parser.setCsiHandlerFallback(((N,Q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(N),params:Q.toArray()})})),this._parser.setEscHandlerFallback((N=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(N)})})),this._parser.setExecuteHandlerFallback((N=>{this._logService.debug("Unknown EXECUTE code: ",{code:N})})),this._parser.setOscHandlerFallback(((N,Q,ie)=>{this._logService.debug("Unknown OSC code: ",{identifier:N,action:Q,data:ie})})),this._parser.setDcsHandlerFallback(((N,Q,ie)=>{Q==="HOOK"&&(ie=ie.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(N),action:Q,payload:ie})})),this._parser.setPrintHandler(((N,Q,ie)=>this.print(N,Q,ie))),this._parser.registerCsiHandler({final:"@"},(N=>this.insertChars(N))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(N=>this.scrollLeft(N))),this._parser.registerCsiHandler({final:"A"},(N=>this.cursorUp(N))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(N=>this.scrollRight(N))),this._parser.registerCsiHandler({final:"B"},(N=>this.cursorDown(N))),this._parser.registerCsiHandler({final:"C"},(N=>this.cursorForward(N))),this._parser.registerCsiHandler({final:"D"},(N=>this.cursorBackward(N))),this._parser.registerCsiHandler({final:"E"},(N=>this.cursorNextLine(N))),this._parser.registerCsiHandler({final:"F"},(N=>this.cursorPrecedingLine(N))),this._parser.registerCsiHandler({final:"G"},(N=>this.cursorCharAbsolute(N))),this._parser.registerCsiHandler({final:"H"},(N=>this.cursorPosition(N))),this._parser.registerCsiHandler({final:"I"},(N=>this.cursorForwardTab(N))),this._parser.registerCsiHandler({final:"J"},(N=>this.eraseInDisplay(N,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(N=>this.eraseInDisplay(N,!0))),this._parser.registerCsiHandler({final:"K"},(N=>this.eraseInLine(N,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(N=>this.eraseInLine(N,!0))),this._parser.registerCsiHandler({final:"L"},(N=>this.insertLines(N))),this._parser.registerCsiHandler({final:"M"},(N=>this.deleteLines(N))),this._parser.registerCsiHandler({final:"P"},(N=>this.deleteChars(N))),this._parser.registerCsiHandler({final:"S"},(N=>this.scrollUp(N))),this._parser.registerCsiHandler({final:"T"},(N=>this.scrollDown(N))),this._parser.registerCsiHandler({final:"X"},(N=>this.eraseChars(N))),this._parser.registerCsiHandler({final:"Z"},(N=>this.cursorBackwardTab(N))),this._parser.registerCsiHandler({final:"`"},(N=>this.charPosAbsolute(N))),this._parser.registerCsiHandler({final:"a"},(N=>this.hPositionRelative(N))),this._parser.registerCsiHandler({final:"b"},(N=>this.repeatPrecedingCharacter(N))),this._parser.registerCsiHandler({final:"c"},(N=>this.sendDeviceAttributesPrimary(N))),this._parser.registerCsiHandler({prefix:">",final:"c"},(N=>this.sendDeviceAttributesSecondary(N))),this._parser.registerCsiHandler({final:"d"},(N=>this.linePosAbsolute(N))),this._parser.registerCsiHandler({final:"e"},(N=>this.vPositionRelative(N))),this._parser.registerCsiHandler({final:"f"},(N=>this.hVPosition(N))),this._parser.registerCsiHandler({final:"g"},(N=>this.tabClear(N))),this._parser.registerCsiHandler({final:"h"},(N=>this.setMode(N))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(N=>this.setModePrivate(N))),this._parser.registerCsiHandler({final:"l"},(N=>this.resetMode(N))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(N=>this.resetModePrivate(N))),this._parser.registerCsiHandler({final:"m"},(N=>this.charAttributes(N))),this._parser.registerCsiHandler({final:"n"},(N=>this.deviceStatus(N))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(N=>this.deviceStatusPrivate(N))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(N=>this.softReset(N))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(N=>this.setCursorStyle(N))),this._parser.registerCsiHandler({final:"r"},(N=>this.setScrollRegion(N))),this._parser.registerCsiHandler({final:"s"},(N=>this.saveCursor(N))),this._parser.registerCsiHandler({final:"t"},(N=>this.windowOptions(N))),this._parser.registerCsiHandler({final:"u"},(N=>this.restoreCursor(N))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(N=>this.insertColumns(N))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(N=>this.deleteColumns(N))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(N=>this.selectProtected(N))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(N=>this.requestMode(N,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(N=>this.requestMode(N,!1))),this._parser.setExecuteHandler(f.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(f.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(f.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(f.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(f.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(f.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(f.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(f.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(f.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(f.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new A.OscHandler((N=>(this.setTitle(N),this.setIconName(N),!0)))),this._parser.registerOscHandler(1,new A.OscHandler((N=>this.setIconName(N)))),this._parser.registerOscHandler(2,new A.OscHandler((N=>this.setTitle(N)))),this._parser.registerOscHandler(4,new A.OscHandler((N=>this.setOrReportIndexedColor(N)))),this._parser.registerOscHandler(8,new A.OscHandler((N=>this.setHyperlink(N)))),this._parser.registerOscHandler(10,new A.OscHandler((N=>this.setOrReportFgColor(N)))),this._parser.registerOscHandler(11,new A.OscHandler((N=>this.setOrReportBgColor(N)))),this._parser.registerOscHandler(12,new A.OscHandler((N=>this.setOrReportCursorColor(N)))),this._parser.registerOscHandler(104,new A.OscHandler((N=>this.restoreIndexedColor(N)))),this._parser.registerOscHandler(110,new A.OscHandler((N=>this.restoreFgColor(N)))),this._parser.registerOscHandler(111,new A.OscHandler((N=>this.restoreBgColor(N)))),this._parser.registerOscHandler(112,new A.OscHandler((N=>this.restoreCursorColor(N)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const N in w.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:N},(()=>this.selectCharset("("+N))),this._parser.registerEscHandler({intermediates:")",final:N},(()=>this.selectCharset(")"+N))),this._parser.registerEscHandler({intermediates:"*",final:N},(()=>this.selectCharset("*"+N))),this._parser.registerEscHandler({intermediates:"+",final:N},(()=>this.selectCharset("+"+N))),this._parser.registerEscHandler({intermediates:"-",final:N},(()=>this.selectCharset("-"+N))),this._parser.registerEscHandler({intermediates:".",final:N},(()=>this.selectCharset("."+N))),this._parser.registerEscHandler({intermediates:"/",final:N},(()=>this.selectCharset("/"+N)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((N=>(this._logService.error("Parsing error: ",N),N))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler(((N,Q)=>this.requestStatusString(N,Q))))}_preserveStack(B,F,W,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=B,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=W,this._parseStack.position=j}_logSlowResolvingAsync(B){this._logService.logLevel<=y.LogLevelEnum.WARN&&Promise.race([B,new Promise(((F,W)=>setTimeout((()=>W("#SLOW_TIMEOUT")),5e3)))]).catch((F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(B,F){let W,j=this._activeBuffer.x,V=this._activeBuffer.y,ee=0;const Y=this._parseStack.paused;if(Y){if(W=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(W),W;j=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,B.length>O&&(ee=this._parseStack.position+O)}if(this._logService.logLevel<=y.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof B=="string"?` "${B}"`:` "${Array.prototype.map.call(B,(se=>String.fromCharCode(se))).join("")}"`),typeof B=="string"?B.split("").map((se=>se.charCodeAt(0))):B),this._parseBuffer.length<B.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(B.length,O))),Y||this._dirtyRowTracker.clearRange(),B.length>O)for(let se=ee;se<B.length;se+=O){const me=se+O<B.length?se+O:B.length,N=typeof B=="string"?this._stringDecoder.decode(B.substring(se,me),this._parseBuffer):this._utf8Decoder.decode(B.subarray(se,me),this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,N))return this._preserveStack(j,V,N,se),this._logSlowResolvingAsync(W),W}else if(!Y){const se=typeof B=="string"?this._stringDecoder.decode(B,this._parseBuffer):this._utf8Decoder.decode(B,this._parseBuffer);if(W=this._parser.parse(this._parseBuffer,se))return this._preserveStack(j,V,se,0),this._logSlowResolvingAsync(W),W}this._activeBuffer.x===j&&this._activeBuffer.y===V||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(B,F,W){let j,V;const ee=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,se=this._bufferService.cols,me=this._coreService.decPrivateModes.wraparound,N=this._coreService.modes.insertMode,Q=this._curAttrData;let ie=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&W-F>0&&ie.getWidth(this._activeBuffer.x-1)===2&&ie.setCellFromCodePoint(this._activeBuffer.x-1,0,1,Q.fg,Q.bg,Q.extended);for(let ne=F;ne<W;++ne){if(j=B[ne],V=this._unicodeService.wcwidth(j),j<127&&ee){const Re=ee[String.fromCharCode(j)];Re&&(j=Re.charCodeAt(0))}if(Y&&this._onA11yChar.fire((0,E.stringFromCodePoint)(j)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),V||!this._activeBuffer.x){if(this._activeBuffer.x+V-1>=se){if(me){for(;this._activeBuffer.x<se;)ie.setCellFromCodePoint(this._activeBuffer.x++,0,1,Q.fg,Q.bg,Q.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),ie=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=se-1,V===2)continue}if(N&&(ie.insertCells(this._activeBuffer.x,V,this._activeBuffer.getNullCell(Q),Q),ie.getWidth(se-1)===2&&ie.setCellFromCodePoint(se-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,Q.fg,Q.bg,Q.extended)),ie.setCellFromCodePoint(this._activeBuffer.x++,j,V,Q.fg,Q.bg,Q.extended),V>0)for(;--V;)ie.setCellFromCodePoint(this._activeBuffer.x++,0,0,Q.fg,Q.bg,Q.extended)}else ie.getWidth(this._activeBuffer.x-1)?ie.addCodepointToCell(this._activeBuffer.x-1,j):ie.addCodepointToCell(this._activeBuffer.x-2,j)}W-F>0&&(ie.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<se&&W-F>0&&ie.getWidth(this._activeBuffer.x)===0&&!ie.hasContent(this._activeBuffer.x)&&ie.setCellFromCodePoint(this._activeBuffer.x,0,1,Q.fg,Q.bg,Q.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(B,F){return B.final!=="t"||B.prefix||B.intermediates?this._parser.registerCsiHandler(B,F):this._parser.registerCsiHandler(B,(W=>!z(W.params[0],this._optionsService.rawOptions.windowOptions)||F(W)))}registerDcsHandler(B,F){return this._parser.registerDcsHandler(B,new D.DcsHandler(F))}registerEscHandler(B,F){return this._parser.registerEscHandler(B,F)}registerOscHandler(B,F){return this._parser.registerOscHandler(B,new A.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var B;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||B===void 0)&&B.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const B=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-B),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(B=this._bufferService.cols-1){this._activeBuffer.x=Math.min(B,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(B,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=B,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=B,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(B,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+B,this._activeBuffer.y+F)}cursorUp(B){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,B.params[0]||1)):this._moveCursor(0,-(B.params[0]||1)),!0}cursorDown(B){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,B.params[0]||1)):this._moveCursor(0,B.params[0]||1),!0}cursorForward(B){return this._moveCursor(B.params[0]||1,0),!0}cursorBackward(B){return this._moveCursor(-(B.params[0]||1),0),!0}cursorNextLine(B){return this.cursorDown(B),this._activeBuffer.x=0,!0}cursorPrecedingLine(B){return this.cursorUp(B),this._activeBuffer.x=0,!0}cursorCharAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(B){return this._setCursor(B.length>=2?(B.params[1]||1)-1:0,(B.params[0]||1)-1),!0}charPosAbsolute(B){return this._setCursor((B.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(B){return this._moveCursor(B.params[0]||1,0),!0}linePosAbsolute(B){return this._setCursor(this._activeBuffer.x,(B.params[0]||1)-1),!0}vPositionRelative(B){return this._moveCursor(0,B.params[0]||1),!0}hVPosition(B){return this.cursorPosition(B),!0}tabClear(B){const F=B.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=B.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(B){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=B.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(B){const F=B.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(B,F,W,j=!1,V=!1){const ee=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);ee.replaceCells(F,W,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),V),j&&(ee.isWrapped=!1)}_resetBufferLine(B,F=!1){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);W&&(W.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+B),W.isWrapped=!1)}eraseInDisplay(B,F=!1){let W;switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:for(W=this._activeBuffer.y,this._dirtyRowTracker.markDirty(W),this._eraseInBufferLine(W++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);W<this._bufferService.rows;W++)this._resetBufferLine(W,F);this._dirtyRowTracker.markDirty(W);break;case 1:for(W=this._activeBuffer.y,this._dirtyRowTracker.markDirty(W),this._eraseInBufferLine(W,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(W+1).isWrapped=!1);W--;)this._resetBufferLine(W,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(W=this._bufferService.rows,this._dirtyRowTracker.markDirty(W-1);W--;)this._resetBufferLine(W,F);this._dirtyRowTracker.markDirty(0);break;case 3:const j=this._activeBuffer.lines.length-this._bufferService.rows;j>0&&(this._activeBuffer.lines.trimStart(j),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-j,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-j,0),this._onScroll.fire(0))}return!0}eraseInLine(B,F=!1){switch(this._restrictCursor(this._bufferService.cols),B.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(B){this._restrictCursor();let F=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const W=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;for(;F--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(B){this._restrictCursor();let F=B.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const W=this._activeBuffer.ybase+this._activeBuffer.y;let j;for(j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-j;F--;)this._activeBuffer.lines.splice(W,1),this._activeBuffer.lines.splice(j,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(B){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(B){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,B.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(B){let F=B.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(B){let F=B.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=B.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=B.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=B.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(B){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=B.params[0]||1;for(let W=this._activeBuffer.scrollTop;W<=this._activeBuffer.scrollBottom;++W){const j=this._activeBuffer.lines.get(this._activeBuffer.ybase+W);j.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(B){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(B.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(B){if(!this._parser.precedingCodepoint)return!0;const F=B.params[0]||1,W=new Uint32Array(F);for(let j=0;j<F;++j)W[j]=this._parser.precedingCodepoint;return this.print(W,0,W.length),!0}sendDeviceAttributesPrimary(B){return B.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(B){return B.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(B.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(B){return(this._optionsService.rawOptions.termName+"").indexOf(B)===0}setMode(B){for(let F=0;F<B.length;F++)switch(B.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(B){for(let F=0;F<B.length;F++)switch(B.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,w.DEFAULT_CHARSET),this._charsetService.setgCharset(1,w.DEFAULT_CHARSET),this._charsetService.setgCharset(2,w.DEFAULT_CHARSET),this._charsetService.setgCharset(3,w.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(B){for(let F=0;F<B.length;F++)switch(B.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(B){for(let F=0;F<B.length;F++)switch(B.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),B.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(B,F){const W=this._coreService.decPrivateModes,{activeProtocol:j,activeEncoding:V}=this._coreMouseService,ee=this._coreService,{buffers:Y,cols:se}=this._bufferService,{active:me,alt:N}=Y,Q=this._optionsService.rawOptions,ie=Le=>Le?1:2,ne=B.params[0];return Re=ne,ve=F?ne===2?4:ne===4?ie(ee.modes.insertMode):ne===12?3:ne===20?ie(Q.convertEol):0:ne===1?ie(W.applicationCursorKeys):ne===3?Q.windowOptions.setWinLines?se===80?2:se===132?1:0:0:ne===6?ie(W.origin):ne===7?ie(W.wraparound):ne===8?3:ne===9?ie(j==="X10"):ne===12?ie(Q.cursorBlink):ne===25?ie(!ee.isCursorHidden):ne===45?ie(W.reverseWraparound):ne===66?ie(W.applicationKeypad):ne===67?4:ne===1e3?ie(j==="VT200"):ne===1002?ie(j==="DRAG"):ne===1003?ie(j==="ANY"):ne===1004?ie(W.sendFocus):ne===1005?4:ne===1006?ie(V==="SGR"):ne===1015?4:ne===1016?ie(V==="SGR_PIXELS"):ne===1048?1:ne===47||ne===1047||ne===1049?ie(me===N):ne===2004?ie(W.bracketedPasteMode):0,ee.triggerDataEvent(`${f.C0.ESC}[${F?"":"?"}${Re};${ve}$y`),!0;var Re,ve}_updateAttrColor(B,F,W,j,V){return F===2?(B|=50331648,B&=-16777216,B|=S.AttributeData.fromColorRGB([W,j,V])):F===5&&(B&=-50331904,B|=33554432|255&W),B}_extractColor(B,F,W){const j=[0,0,-1,0,0,0];let V=0,ee=0;do{if(j[ee+V]=B.params[F+ee],B.hasSubParams(F+ee)){const Y=B.getSubParams(F+ee);let se=0;do j[1]===5&&(V=1),j[ee+se+1+V]=Y[se];while(++se<Y.length&&se+ee+1+V<j.length);break}if(j[1]===5&&ee+V>=2||j[1]===2&&ee+V>=5)break;j[1]&&(V=1)}while(++ee+F<B.length&&ee+V<j.length);for(let Y=2;Y<j.length;++Y)j[Y]===-1&&(j[Y]=0);switch(j[0]){case 38:W.fg=this._updateAttrColor(W.fg,j[1],j[3],j[4],j[5]);break;case 48:W.bg=this._updateAttrColor(W.bg,j[1],j[3],j[4],j[5]);break;case 58:W.extended=W.extended.clone(),W.extended.underlineColor=this._updateAttrColor(W.extended.underlineColor,j[1],j[3],j[4],j[5])}return ee}_processUnderline(B,F){F.extended=F.extended.clone(),(!~B||B>5)&&(B=1),F.extended.underlineStyle=B,F.fg|=268435456,B===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(B){B.fg=a.DEFAULT_ATTR_DATA.fg,B.bg=a.DEFAULT_ATTR_DATA.bg,B.extended=B.extended.clone(),B.extended.underlineStyle=0,B.extended.underlineColor&=-67108864,B.updateExtended()}charAttributes(B){if(B.length===1&&B.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=B.length;let W;const j=this._curAttrData;for(let V=0;V<F;V++)W=B.params[V],W>=30&&W<=37?(j.fg&=-50331904,j.fg|=16777216|W-30):W>=40&&W<=47?(j.bg&=-50331904,j.bg|=16777216|W-40):W>=90&&W<=97?(j.fg&=-50331904,j.fg|=16777224|W-90):W>=100&&W<=107?(j.bg&=-50331904,j.bg|=16777224|W-100):W===0?this._processSGR0(j):W===1?j.fg|=134217728:W===3?j.bg|=67108864:W===4?(j.fg|=268435456,this._processUnderline(B.hasSubParams(V)?B.getSubParams(V)[0]:1,j)):W===5?j.fg|=536870912:W===7?j.fg|=67108864:W===8?j.fg|=1073741824:W===9?j.fg|=2147483648:W===2?j.bg|=134217728:W===21?this._processUnderline(2,j):W===22?(j.fg&=-134217729,j.bg&=-134217729):W===23?j.bg&=-67108865:W===24?(j.fg&=-268435457,this._processUnderline(0,j)):W===25?j.fg&=-536870913:W===27?j.fg&=-67108865:W===28?j.fg&=-1073741825:W===29?j.fg&=2147483647:W===39?(j.fg&=-67108864,j.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):W===49?(j.bg&=-67108864,j.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):W===38||W===48||W===58?V+=this._extractColor(B,V,j):W===53?j.bg|=1073741824:W===55?j.bg&=-1073741825:W===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):W===100?(j.fg&=-67108864,j.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",W);return!0}deviceStatus(B){switch(B.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${F};${W}R`)}return!0}deviceStatusPrivate(B){if(B.params[0]===6){const F=this._activeBuffer.y+1,W=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${F};${W}R`)}return!0}softReset(B){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(B){const F=B.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const W=F%2==1;return this._optionsService.options.cursorBlink=W,!0}setScrollRegion(B){const F=B.params[0]||1;let W;return(B.length<2||(W=B.params[1])>this._bufferService.rows||W===0)&&(W=this._bufferService.rows),W>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=W-1,this._setCursor(0,0)),!0}windowOptions(B){if(!z(B.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=B.length>1?B.params[1]:0;switch(B.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(U.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(U.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(B){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(B){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(B){return this._windowTitle=B,this._onTitleChange.fire(B),!0}setIconName(B){return this._iconName=B,!0}setOrReportIndexedColor(B){const F=[],W=B.split(";");for(;W.length>1;){const j=W.shift(),V=W.shift();if(/^\d+$/.exec(j)){const ee=parseInt(j);if(G(ee))if(V==="?")F.push({type:0,index:ee});else{const Y=(0,g.parseColor)(V);Y&&F.push({type:1,index:ee,color:Y})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(B){const F=B.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(B,F){this._getCurrentLinkId()&&this._finishHyperlink();const W=B.split(":");let j;const V=W.findIndex((ee=>ee.startsWith("id=")));return V!==-1&&(j=W[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:j,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(B,F){const W=B.split(";");for(let j=0;j<W.length&&!(F>=this._specialColors.length);++j,++F)if(W[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const V=(0,g.parseColor)(W[j]);V&&this._onColor.fire([{type:1,index:this._specialColors[F],color:V}])}return!0}setOrReportFgColor(B){return this._setOrReportSpecialColor(B,0)}setOrReportBgColor(B){return this._setOrReportSpecialColor(B,1)}setOrReportCursorColor(B){return this._setOrReportSpecialColor(B,2)}restoreIndexedColor(B){if(!B)return this._onColor.fire([{type:2}]),!0;const F=[],W=B.split(";");for(let j=0;j<W.length;++j)if(/^\d+$/.exec(W[j])){const V=parseInt(W[j]);G(V)&&F.push({type:2,index:V})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(B){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(B){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(B){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,w.DEFAULT_CHARSET),!0}selectCharset(B){return B.length!==2?(this.selectDefaultCharset(),!0):(B[0]==="/"||this._charsetService.setgCharset(L[B[0]],w.CHARSETS[B[1]]||w.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const B=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,B,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(B){return this._charsetService.setgLevel(B),!0}screenAlignmentPattern(){const B=new h.CellData;B.content=4194373,B.fg=this._curAttrData.fg,B.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const W=this._activeBuffer.ybase+this._activeBuffer.y+F,j=this._activeBuffer.lines.get(W);j&&(j.fill(B),j.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(B,F){const W=this._bufferService.buffer,j=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${V}${f.C0.ESC}\\`),!0))(B==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:B==='"p'?'P1$r61;1"p':B==="r"?`P1$r${W.scrollTop+1};${W.scrollBottom+1}r`:B==="m"?"P1$r0m":B===" q"?`P1$r${{block:2,underline:4,bar:6}[j.cursorStyle]-(j.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(B,F){this._dirtyRowTracker.markRangeDirty(B,F)}}l.InputHandler=$;let te=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,B){K>B&&(I=K,K=B,B=I),K<this.start&&(this.start=K),B>this.end&&(this.end=B)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function G(K){return 0<=K&&K<256}te=_([v(0,y.IBufferService)],te)},844:(k,l)=>{function d(_){for(const v of _)v.dispose();_.length=0}Object.defineProperty(l,"__esModule",{value:!0}),l.getDisposeArrayDisposable=l.disposeArray=l.toDisposable=l.MutableDisposable=l.Disposable=void 0,l.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const _ of this._disposables)_.dispose();this._disposables.length=0}register(_){return this._disposables.push(_),_}unregister(_){const v=this._disposables.indexOf(_);v!==-1&&this._disposables.splice(v,1)}},l.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(_){var v;this._isDisposed||_===this._value||((v=this._value)===null||v===void 0||v.dispose(),this._value=_)}clear(){this.value=void 0}dispose(){var _;this._isDisposed=!0,(_=this._value)===null||_===void 0||_.dispose(),this._value=void 0}},l.toDisposable=function(_){return{dispose:_}},l.disposeArray=d,l.getDisposeArrayDisposable=function(_){return{dispose:()=>d(_)}}},1505:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FourKeyMap=l.TwoKeyMap=void 0;class d{constructor(){this._data={}}set(v,f,w){this._data[v]||(this._data[v]={}),this._data[v][f]=w}get(v,f){return this._data[v]?this._data[v][f]:void 0}clear(){this._data={}}}l.TwoKeyMap=d,l.FourKeyMap=class{constructor(){this._data=new d}set(_,v,f,w,x){this._data.get(_,v)||this._data.set(_,v,new d),this._data.get(_,v).set(f,w,x)}get(_,v,f,w){var x;return(x=this._data.get(_,v))===null||x===void 0?void 0:x.get(f,w)}clear(){this._data.clear()}}},6114:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isChromeOS=l.isLinux=l.isWindows=l.isIphone=l.isIpad=l.isMac=l.getSafariVersion=l.isSafari=l.isLegacyEdge=l.isFirefox=l.isNode=void 0,l.isNode=typeof navigator>"u";const d=l.isNode?"node":navigator.userAgent,_=l.isNode?"node":navigator.platform;l.isFirefox=d.includes("Firefox"),l.isLegacyEdge=d.includes("Edge"),l.isSafari=/^((?!chrome|android).)*safari/i.test(d),l.getSafariVersion=function(){if(!l.isSafari)return 0;const v=d.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},l.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),l.isIpad=_==="iPad",l.isIphone=_==="iPhone",l.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),l.isLinux=_.indexOf("Linux")>=0,l.isChromeOS=/\bCrOS\b/.test(d)},6106:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SortedList=void 0;let d=0;l.SortedList=class{constructor(_){this._getKey=_,this._array=[]}clear(){this._array.length=0}insert(_){this._array.length!==0?(d=this._search(this._getKey(_)),this._array.splice(d,0,_)):this._array.push(_)}delete(_){if(this._array.length===0)return!1;const v=this._getKey(_);if(v===void 0||(d=this._search(v),d===-1)||this._getKey(this._array[d])!==v)return!1;do if(this._array[d]===_)return this._array.splice(d,1),!0;while(++d<this._array.length&&this._getKey(this._array[d])===v);return!1}*getKeyIterator(_){if(this._array.length!==0&&(d=this._search(_),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===_))do yield this._array[d];while(++d<this._array.length&&this._getKey(this._array[d])===_)}forEachByKey(_,v){if(this._array.length!==0&&(d=this._search(_),!(d<0||d>=this._array.length)&&this._getKey(this._array[d])===_))do v(this._array[d]);while(++d<this._array.length&&this._getKey(this._array[d])===_)}values(){return[...this._array].values()}_search(_){let v=0,f=this._array.length-1;for(;f>=v;){let w=v+f>>1;const x=this._getKey(this._array[w]);if(x>_)f=w-1;else{if(!(x<_)){for(;w>0&&this._getKey(this._array[w-1])===_;)w--;return w}v=w+1}}return v}}},7226:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DebouncedIdleTask=l.IdleTaskQueue=l.PriorityTaskQueue=void 0;const _=d(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(x){this._tasks.push(x),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(x){this._idleCallback=void 0;let R=0,E=0,a=x.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(R=Date.now(),this._tasks[this._i]()||this._i++,R=Math.max(1,Date.now()-R),E=Math.max(R,E),o=x.timeRemaining(),1.5*E>o)return a-R<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-R))}ms`),void this._start();a=o}this.clear()}}class f extends v{_requestCallback(x){return setTimeout((()=>x(this._createDeadline(16))))}_cancelCallback(x){clearTimeout(x)}_createDeadline(x){const R=Date.now()+x;return{timeRemaining:()=>Math.max(0,R-Date.now())}}}l.PriorityTaskQueue=f,l.IdleTaskQueue=!_.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(w){return requestIdleCallback(w)}_cancelCallback(w){cancelIdleCallback(w)}}:f,l.DebouncedIdleTask=class{constructor(){this._queue=new l.IdleTaskQueue}set(w){this._queue.clear(),this._queue.enqueue(w)}flush(){this._queue.flush()}}},9282:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.updateWindowsModeWrappedState=void 0;const _=d(643);l.updateWindowsModeWrappedState=function(v){const f=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),w=f?.get(v.cols-1),x=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);x&&w&&(x.isWrapped=w[_.CHAR_DATA_CODE_INDEX]!==_.NULL_CELL_CODE&&w[_.CHAR_DATA_CODE_INDEX]!==_.WHITESPACE_CELL_CODE)}},3734:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ExtendedAttrs=l.AttributeData=void 0;class d{constructor(){this.fg=0,this.bg=0,this.extended=new _}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new d;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}l.AttributeData=d;class _{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,w=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=w}clone(){return new _(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}l.ExtendedAttrs=_},9092:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Buffer=l.MAX_BUFFER_SIZE=void 0;const _=d(6349),v=d(7226),f=d(3734),w=d(8437),x=d(4634),R=d(511),E=d(643),a=d(4863),o=d(7116);l.MAX_BUFFER_SIZE=4294967295,l.Buffer=class{constructor(c,h,S){this._hasScrollback=c,this._optionsService=h,this._bufferService=S,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=w.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=R.CellData.fromCharData([0,E.NULL_CELL_CHAR,E.NULL_CELL_WIDTH,E.NULL_CELL_CODE]),this._whitespaceCell=R.CellData.fromCharData([0,E.WHITESPACE_CELL_CHAR,E.WHITESPACE_CELL_WIDTH,E.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,h){return new w.BufferLine(this._bufferService.cols,this.getNullCell(c),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const h=c+this._optionsService.rawOptions.scrollback;return h>l.MAX_BUFFER_SIZE?l.MAX_BUFFER_SIZE:h}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=w.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new _.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,h){const S=this.getNullCell(w.DEFAULT_ATTR_DATA);let y=0;const A=this._getCorrectBufferLength(h);if(A>this.lines.maxLength&&(this.lines.maxLength=A),this.lines.length>0){if(this._cols<c)for(let g=0;g<this.lines.length;g++)y+=+this.lines.get(g).resize(c,S);let D=0;if(this._rows<h)for(let g=this._rows;g<h;g++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new w.BufferLine(c,S)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new w.BufferLine(c,S)));else for(let g=this._rows;g>h;g--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(A<this.lines.maxLength){const g=this.lines.length-A;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=A}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,h-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(c,h),this._cols>c))for(let D=0;D<this.lines.length;D++)y+=+this.lines.get(D).resize(c,S);this._cols=c,this._rows=h,this._memoryCleanupQueue.clear(),y>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,h){this._cols!==c&&(c>this._cols?this._reflowLarger(c,h):this._reflowSmaller(c,h))}_reflowLarger(c,h){const S=(0,x.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(w.DEFAULT_ATTR_DATA));if(S.length>0){const y=(0,x.reflowLargerCreateNewLayout)(this.lines,S);(0,x.reflowLargerApplyNewLayout)(this.lines,y.layout),this._reflowLargerAdjustViewport(c,h,y.countRemoved)}}_reflowLargerAdjustViewport(c,h,S){const y=this.getNullCell(w.DEFAULT_ATTR_DATA);let A=S;for(;A-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new w.BufferLine(c,y))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-S,0)}_reflowSmaller(c,h){const S=this.getNullCell(w.DEFAULT_ATTR_DATA),y=[];let A=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=c)continue;const L=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),L.unshift(g);const O=this.ybase+this.y;if(O>=D&&O<D+L.length)continue;const z=L[L.length-1].getTrimmedLength(),U=(0,x.reflowSmallerGetNewLineLengths)(L,this._cols,c),I=U.length-L.length;let $;$=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);const te=[];for(let j=0;j<I;j++){const V=this.getBlankLine(w.DEFAULT_ATTR_DATA,!0);te.push(V)}te.length>0&&(y.push({start:D+L.length+A,newLines:te}),A+=te.length),L.push(...te);let G=U.length-1,K=U[G];K===0&&(G--,K=U[G]);let B=L.length-I-1,F=z;for(;B>=0;){const j=Math.min(F,K);if(L[G]===void 0)break;if(L[G].copyCellsFrom(L[B],F-j,K-j,j,!0),K-=j,K===0&&(G--,K=U[G]),F-=j,F===0){B--;const V=Math.max(B,0);F=(0,x.getWrappedLineTrimmedLength)(L,V,this._cols)}}for(let j=0;j<L.length;j++)U[j]<c&&L[j].setCell(U[j],S);let W=I-$;for(;W-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+A)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+h-1)}if(y.length>0){const D=[],g=[];for(let G=0;G<this.lines.length;G++)g.push(this.lines.get(G));const L=this.lines.length;let O=L-1,z=0,U=y[z];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+A);let I=0;for(let G=Math.min(this.lines.maxLength-1,L+A-1);G>=0;G--)if(U&&U.start>O+I){for(let K=U.newLines.length-1;K>=0;K--)this.lines.set(G--,U.newLines[K]);G++,D.push({index:O+1,amount:U.newLines.length}),I+=U.newLines.length,U=y[++z]}else this.lines.set(G,g[O--]);let $=0;for(let G=D.length-1;G>=0;G--)D[G].index+=$,this.lines.onInsertEmitter.fire(D[G]),$+=D[G].amount;const te=Math.max(0,L+A-this.lines.maxLength);te>0&&this.lines.onTrimEmitter.fire(te)}}translateBufferLineToString(c,h,S=0,y){const A=this.lines.get(c);return A?A.translateToString(h,S,y):""}getWrappedRangeForLine(c){let h=c,S=c;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;S+1<this.lines.length&&this.lines.get(S+1).isWrapped;)S++;return{first:h,last:S}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===c&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const h=new a.Marker(c);return this.markers.push(h),h.register(this.lines.onTrim((S=>{h.line-=S,h.line<0&&h.dispose()}))),h.register(this.lines.onInsert((S=>{h.line>=S.index&&(h.line+=S.amount)}))),h.register(this.lines.onDelete((S=>{h.line>=S.index&&h.line<S.index+S.amount&&h.dispose(),h.line>S.index&&(h.line-=S.amount)}))),h.register(h.onDispose((()=>this._removeMarker(h)))),h}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLine=l.DEFAULT_ATTR_DATA=void 0;const _=d(3734),v=d(511),f=d(643),w=d(482);l.DEFAULT_ATTR_DATA=Object.freeze(new _.AttributeData);let x=0;class R{constructor(a,o,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);const h=o||v.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let S=0;S<a;++S)this.setCell(S,h);this.length=a}get(a){const o=this._data[3*a+0],c=2097151&o;return[this._data[3*a+1],2097152&o?this._combined[a]:c?(0,w.stringFromCodePoint)(c):"",o>>22,2097152&o?this._combined[a].charCodeAt(this._combined[a].length-1):c]}set(a,o){this._data[3*a+1]=o[f.CHAR_DATA_ATTR_INDEX],o[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=o[1],this._data[3*a+0]=2097152|a|o[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=o[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){const o=this._data[3*a+0];return 2097152&o?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&o}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){const o=this._data[3*a+0];return 2097152&o?this._combined[a]:2097151&o?(0,w.stringFromCodePoint)(2097151&o):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,o){return x=3*a,o.content=this._data[x+0],o.fg=this._data[x+1],o.bg=this._data[x+2],2097152&o.content&&(o.combinedData=this._combined[a]),268435456&o.bg&&(o.extended=this._extendedAttrs[a]),o}setCell(a,o){2097152&o.content&&(this._combined[a]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[a]=o.extended),this._data[3*a+0]=o.content,this._data[3*a+1]=o.fg,this._data[3*a+2]=o.bg}setCellFromCodePoint(a,o,c,h,S,y){268435456&S&&(this._extendedAttrs[a]=y),this._data[3*a+0]=o|c<<22,this._data[3*a+1]=h,this._data[3*a+2]=S}addCodepointToCell(a,o){let c=this._data[3*a+0];2097152&c?this._combined[a]+=(0,w.stringFromCodePoint)(o):(2097151&c?(this._combined[a]=(0,w.stringFromCodePoint)(2097151&c)+(0,w.stringFromCodePoint)(o),c&=-2097152,c|=2097152):c=o|4194304,this._data[3*a+0]=c)}insertCells(a,o,c,h){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs),o<this.length-a){const S=new v.CellData;for(let y=this.length-a-o-1;y>=0;--y)this.setCell(a+o+y,this.loadCell(a+y,S));for(let y=0;y<o;++y)this.setCell(a+y,c)}else for(let S=a;S<this.length;++S)this.setCell(S,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs)}deleteCells(a,o,c,h){if(a%=this.length,o<this.length-a){const S=new v.CellData;for(let y=0;y<this.length-a-o;++y)this.setCell(a+y,this.loadCell(a+o+y,S));for(let y=this.length-o;y<this.length;++y)this.setCell(y,c)}else for(let S=a;S<this.length;++S)this.setCell(S,c);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs)}replaceCells(a,o,c,h,S=!1){if(S)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodePoint(o,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs);a<o&&a<this.length;)this.isProtected(a)||this.setCell(a,c),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o,0,1,h?.fg||0,h?.bg||0,h?.extended||new _.ExtendedAttrs);a<o&&a<this.length;)this.setCell(a++,c)}resize(a,o){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const h=new Uint32Array(c);h.set(this._data),this._data=h}for(let h=this.length;h<a;++h)this.setCell(h,o)}else{this._data=this._data.subarray(0,c);const h=Object.keys(this._combined);for(let y=0;y<h.length;y++){const A=parseInt(h[y],10);A>=a&&delete this._combined[A]}const S=Object.keys(this._extendedAttrs);for(let y=0;y<S.length;y++){const A=parseInt(S[y],10);A>=a&&delete this._extendedAttrs[A]}}return this.length=a,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,o=!1){if(o)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,a);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(const o in a._combined)this._combined[o]=a._combined[o];this._extendedAttrs={};for(const o in a._extendedAttrs)this._extendedAttrs[o]=a._extendedAttrs[o];this.isWrapped=a.isWrapped}clone(){const a=new R(0);a._data=new Uint32Array(this._data),a.length=this.length;for(const o in this._combined)a._combined[o]=this._combined[o];for(const o in this._extendedAttrs)a._extendedAttrs[o]=this._extendedAttrs[o];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,o,c,h,S){const y=a._data;if(S)for(let D=h-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(c+D)+g]=y[3*(o+D)+g];268435456&y[3*(o+D)+2]&&(this._extendedAttrs[c+D]=a._extendedAttrs[o+D])}else for(let D=0;D<h;D++){for(let g=0;g<3;g++)this._data[3*(c+D)+g]=y[3*(o+D)+g];268435456&y[3*(o+D)+2]&&(this._extendedAttrs[c+D]=a._extendedAttrs[o+D])}const A=Object.keys(a._combined);for(let D=0;D<A.length;D++){const g=parseInt(A[D],10);g>=o&&(this._combined[g-o+c]=a._combined[g])}}translateToString(a=!1,o=0,c=this.length){a&&(c=Math.min(c,this.getTrimmedLength()));let h="";for(;o<c;){const S=this._data[3*o+0],y=2097151&S;h+=2097152&S?this._combined[o]:y?(0,w.stringFromCodePoint)(y):f.WHITESPACE_CELL_CHAR,o+=S>>22||1}return h}}l.BufferLine=R},4841:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getRangeLength=void 0,l.getRangeLength=function(d,_){if(d.start.y>d.end.y)throw new Error(`Buffer range end (${d.end.x}, ${d.end.y}) cannot be before start (${d.start.x}, ${d.start.y})`);return _*(d.end.y-d.start.y)+(d.end.x-d.start.x+1)}},4634:(k,l)=>{function d(_,v,f){if(v===_.length-1)return _[v].getTrimmedLength();const w=!_[v].hasContent(f-1)&&_[v].getWidth(f-1)===1,x=_[v+1].getWidth(0)===2;return w&&x?f-1:f}Object.defineProperty(l,"__esModule",{value:!0}),l.getWrappedLineTrimmedLength=l.reflowSmallerGetNewLineLengths=l.reflowLargerApplyNewLayout=l.reflowLargerCreateNewLayout=l.reflowLargerGetLinesToRemove=void 0,l.reflowLargerGetLinesToRemove=function(_,v,f,w,x){const R=[];for(let E=0;E<_.length-1;E++){let a=E,o=_.get(++a);if(!o.isWrapped)continue;const c=[_.get(E)];for(;a<_.length&&o.isWrapped;)c.push(o),o=_.get(++a);if(w>=E&&w<a){E+=c.length-1;continue}let h=0,S=d(c,h,v),y=1,A=0;for(;y<c.length;){const g=d(c,y,v),L=g-A,O=f-S,z=Math.min(L,O);c[h].copyCellsFrom(c[y],A,S,z,!1),S+=z,S===f&&(h++,S=0),A+=z,A===g&&(y++,A=0),S===0&&h!==0&&c[h-1].getWidth(f-1)===2&&(c[h].copyCellsFrom(c[h-1],f-1,S++,1,!1),c[h-1].setCell(f-1,x))}c[h].replaceCells(S,f,x);let D=0;for(let g=c.length-1;g>0&&(g>h||c[g].getTrimmedLength()===0);g--)D++;D>0&&(R.push(E+c.length-D),R.push(D)),E+=c.length-1}return R},l.reflowLargerCreateNewLayout=function(_,v){const f=[];let w=0,x=v[w],R=0;for(let E=0;E<_.length;E++)if(x===E){const a=v[++w];_.onDeleteEmitter.fire({index:E-R,amount:a}),E+=a-1,R+=a,x=v[++w]}else f.push(E);return{layout:f,countRemoved:R}},l.reflowLargerApplyNewLayout=function(_,v){const f=[];for(let w=0;w<v.length;w++)f.push(_.get(v[w]));for(let w=0;w<f.length;w++)_.set(w,f[w]);_.length=v.length},l.reflowSmallerGetNewLineLengths=function(_,v,f){const w=[],x=_.map(((o,c)=>d(_,c,v))).reduce(((o,c)=>o+c));let R=0,E=0,a=0;for(;a<x;){if(x-a<f){w.push(x-a);break}R+=f;const o=d(_,E,v);R>o&&(R-=o,E++);const c=_[E].getWidth(R-1)===2;c&&R--;const h=c?f-1:f;w.push(h),a+=h}return w},l.getWrappedLineTrimmedLength=d},5295:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferSet=void 0;const _=d(8460),v=d(844),f=d(9092);class w extends v.Disposable{constructor(R,E){super(),this._optionsService=R,this._bufferService=E,this._onBufferActivate=this.register(new _.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(R){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(R),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(R,E){this._normal.resize(R,E),this._alt.resize(R,E),this.setupTabStops(R)}setupTabStops(R){this._normal.setupTabStops(R),this._alt.setupTabStops(R)}}l.BufferSet=w},511:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CellData=void 0;const _=d(482),v=d(643),f=d(3734);class w extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(R){const E=new w;return E.setFromCharData(R),E}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,_.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(R){this.fg=R[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let E=!1;if(R[v.CHAR_DATA_CHAR_INDEX].length>2)E=!0;else if(R[v.CHAR_DATA_CHAR_INDEX].length===2){const a=R[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){const o=R[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(a-55296)+o-56320+65536|R[v.CHAR_DATA_WIDTH_INDEX]<<22:E=!0}else E=!0}else this.content=R[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|R[v.CHAR_DATA_WIDTH_INDEX]<<22;E&&(this.combinedData=R[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|R[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}l.CellData=w},643:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WHITESPACE_CELL_CODE=l.WHITESPACE_CELL_WIDTH=l.WHITESPACE_CELL_CHAR=l.NULL_CELL_CODE=l.NULL_CELL_WIDTH=l.NULL_CELL_CHAR=l.CHAR_DATA_CODE_INDEX=l.CHAR_DATA_WIDTH_INDEX=l.CHAR_DATA_CHAR_INDEX=l.CHAR_DATA_ATTR_INDEX=l.DEFAULT_EXT=l.DEFAULT_ATTR=l.DEFAULT_COLOR=void 0,l.DEFAULT_COLOR=0,l.DEFAULT_ATTR=256|l.DEFAULT_COLOR<<9,l.DEFAULT_EXT=0,l.CHAR_DATA_ATTR_INDEX=0,l.CHAR_DATA_CHAR_INDEX=1,l.CHAR_DATA_WIDTH_INDEX=2,l.CHAR_DATA_CODE_INDEX=3,l.NULL_CELL_CHAR="",l.NULL_CELL_WIDTH=1,l.NULL_CELL_CODE=0,l.WHITESPACE_CELL_CHAR=" ",l.WHITESPACE_CELL_WIDTH=1,l.WHITESPACE_CELL_CODE=32},4863:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Marker=void 0;const _=d(8460),v=d(844);class f{get id(){return this._id}constructor(x){this.line=x,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new _.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(x){return this._disposables.push(x),x}}l.Marker=f,f._nextId=1},7116:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_CHARSET=l.CHARSETS=void 0,l.CHARSETS={},l.DEFAULT_CHARSET=l.CHARSETS.B,l.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},l.CHARSETS.A={"#":""},l.CHARSETS.B=void 0,l.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},l.CHARSETS.C=l.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},l.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.E=l.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},l.CHARSETS.H=l.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},l.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(k,l)=>{var d,_,v;Object.defineProperty(l,"__esModule",{value:!0}),l.C1_ESCAPED=l.C1=l.C0=void 0,(function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""})(d||(l.C0=d={})),(function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""})(_||(l.C1=_={})),(function(f){f.ST=`${d.ESC}\\`})(v||(l.C1_ESCAPED=v={}))},7399:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.evaluateKeyboardEvent=void 0;const _=d(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};l.evaluateKeyboardEvent=function(f,w,x,R){const E={type:0,cancel:!1,key:void 0},a=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?E.key=w?_.C0.ESC+"OA":_.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?E.key=w?_.C0.ESC+"OD":_.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?E.key=w?_.C0.ESC+"OC":_.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(E.key=w?_.C0.ESC+"OB":_.C0.ESC+"[B");break;case 8:if(f.altKey){E.key=_.C0.ESC+_.C0.DEL;break}E.key=_.C0.DEL;break;case 9:if(f.shiftKey){E.key=_.C0.ESC+"[Z";break}E.key=_.C0.HT,E.cancel=!0;break;case 13:E.key=f.altKey?_.C0.ESC+_.C0.CR:_.C0.CR,E.cancel=!0;break;case 27:E.key=_.C0.ESC,f.altKey&&(E.key=_.C0.ESC+_.C0.ESC),E.cancel=!0;break;case 37:if(f.metaKey)break;a?(E.key=_.C0.ESC+"[1;"+(a+1)+"D",E.key===_.C0.ESC+"[1;3D"&&(E.key=_.C0.ESC+(x?"b":"[1;5D"))):E.key=w?_.C0.ESC+"OD":_.C0.ESC+"[D";break;case 39:if(f.metaKey)break;a?(E.key=_.C0.ESC+"[1;"+(a+1)+"C",E.key===_.C0.ESC+"[1;3C"&&(E.key=_.C0.ESC+(x?"f":"[1;5C"))):E.key=w?_.C0.ESC+"OC":_.C0.ESC+"[C";break;case 38:if(f.metaKey)break;a?(E.key=_.C0.ESC+"[1;"+(a+1)+"A",x||E.key!==_.C0.ESC+"[1;3A"||(E.key=_.C0.ESC+"[1;5A")):E.key=w?_.C0.ESC+"OA":_.C0.ESC+"[A";break;case 40:if(f.metaKey)break;a?(E.key=_.C0.ESC+"[1;"+(a+1)+"B",x||E.key!==_.C0.ESC+"[1;3B"||(E.key=_.C0.ESC+"[1;5B")):E.key=w?_.C0.ESC+"OB":_.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(E.key=_.C0.ESC+"[2~");break;case 46:E.key=a?_.C0.ESC+"[3;"+(a+1)+"~":_.C0.ESC+"[3~";break;case 36:E.key=a?_.C0.ESC+"[1;"+(a+1)+"H":w?_.C0.ESC+"OH":_.C0.ESC+"[H";break;case 35:E.key=a?_.C0.ESC+"[1;"+(a+1)+"F":w?_.C0.ESC+"OF":_.C0.ESC+"[F";break;case 33:f.shiftKey?E.type=2:f.ctrlKey?E.key=_.C0.ESC+"[5;"+(a+1)+"~":E.key=_.C0.ESC+"[5~";break;case 34:f.shiftKey?E.type=3:f.ctrlKey?E.key=_.C0.ESC+"[6;"+(a+1)+"~":E.key=_.C0.ESC+"[6~";break;case 112:E.key=a?_.C0.ESC+"[1;"+(a+1)+"P":_.C0.ESC+"OP";break;case 113:E.key=a?_.C0.ESC+"[1;"+(a+1)+"Q":_.C0.ESC+"OQ";break;case 114:E.key=a?_.C0.ESC+"[1;"+(a+1)+"R":_.C0.ESC+"OR";break;case 115:E.key=a?_.C0.ESC+"[1;"+(a+1)+"S":_.C0.ESC+"OS";break;case 116:E.key=a?_.C0.ESC+"[15;"+(a+1)+"~":_.C0.ESC+"[15~";break;case 117:E.key=a?_.C0.ESC+"[17;"+(a+1)+"~":_.C0.ESC+"[17~";break;case 118:E.key=a?_.C0.ESC+"[18;"+(a+1)+"~":_.C0.ESC+"[18~";break;case 119:E.key=a?_.C0.ESC+"[19;"+(a+1)+"~":_.C0.ESC+"[19~";break;case 120:E.key=a?_.C0.ESC+"[20;"+(a+1)+"~":_.C0.ESC+"[20~";break;case 121:E.key=a?_.C0.ESC+"[21;"+(a+1)+"~":_.C0.ESC+"[21~";break;case 122:E.key=a?_.C0.ESC+"[23;"+(a+1)+"~":_.C0.ESC+"[23~";break;case 123:E.key=a?_.C0.ESC+"[24;"+(a+1)+"~":_.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(x&&!R||!f.altKey||f.metaKey)!x||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?E.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(E.key=_.C0.US),f.key==="@"&&(E.key=_.C0.NUL)):f.keyCode===65&&(E.type=1);else{const o=v[f.keyCode],c=o?.[f.shiftKey?1:0];if(c)E.key=_.C0.ESC+c;else if(f.keyCode>=65&&f.keyCode<=90){const h=f.ctrlKey?f.keyCode-64:f.keyCode+32;let S=String.fromCharCode(h);f.shiftKey&&(S=S.toUpperCase()),E.key=_.C0.ESC+S}else if(f.keyCode===32)E.key=_.C0.ESC+(f.ctrlKey?_.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let h=f.code.slice(3,4);f.shiftKey||(h=h.toLowerCase()),E.key=_.C0.ESC+h,E.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?E.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?E.key=_.C0.NUL:f.keyCode>=51&&f.keyCode<=55?E.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?E.key=_.C0.DEL:f.keyCode===219?E.key=_.C0.ESC:f.keyCode===220?E.key=_.C0.FS:f.keyCode===221&&(E.key=_.C0.GS)}return E}},482:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Utf8ToUtf32=l.StringToUtf32=l.utf32ToString=l.stringFromCodePoint=void 0,l.stringFromCodePoint=function(d){return d>65535?(d-=65536,String.fromCharCode(55296+(d>>10))+String.fromCharCode(d%1024+56320)):String.fromCharCode(d)},l.utf32ToString=function(d,_=0,v=d.length){let f="";for(let w=_;w<v;++w){let x=d[w];x>65535?(x-=65536,f+=String.fromCharCode(55296+(x>>10))+String.fromCharCode(x%1024+56320)):f+=String.fromCharCode(x)}return f},l.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(d,_){const v=d.length;if(!v)return 0;let f=0,w=0;if(this._interim){const x=d.charCodeAt(w++);56320<=x&&x<=57343?_[f++]=1024*(this._interim-55296)+x-56320+65536:(_[f++]=this._interim,_[f++]=x),this._interim=0}for(let x=w;x<v;++x){const R=d.charCodeAt(x);if(55296<=R&&R<=56319){if(++x>=v)return this._interim=R,f;const E=d.charCodeAt(x);56320<=E&&E<=57343?_[f++]=1024*(R-55296)+E-56320+65536:(_[f++]=R,_[f++]=E)}else R!==65279&&(_[f++]=R)}return f}},l.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(d,_){const v=d.length;if(!v)return 0;let f,w,x,R,E=0,a=0,o=0;if(this.interim[0]){let S=!1,y=this.interim[0];y&=(224&y)==192?31:(240&y)==224?15:7;let A,D=0;for(;(A=63&this.interim[++D])&&D<4;)y<<=6,y|=A;const g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=g-D;for(;o<L;){if(o>=v)return 0;if(A=d[o++],(192&A)!=128){o--,S=!0;break}this.interim[D++]=A,y<<=6,y|=63&A}S||(g===2?y<128?o--:_[E++]=y:g===3?y<2048||y>=55296&&y<=57343||y===65279||(_[E++]=y):y<65536||y>1114111||(_[E++]=y)),this.interim.fill(0)}const c=v-4;let h=o;for(;h<v;){for(;!(!(h<c)||128&(f=d[h])||128&(w=d[h+1])||128&(x=d[h+2])||128&(R=d[h+3]));)_[E++]=f,_[E++]=w,_[E++]=x,_[E++]=R,h+=4;if(f=d[h++],f<128)_[E++]=f;else if((224&f)==192){if(h>=v)return this.interim[0]=f,E;if(w=d[h++],(192&w)!=128){h--;continue}if(a=(31&f)<<6|63&w,a<128){h--;continue}_[E++]=a}else if((240&f)==224){if(h>=v)return this.interim[0]=f,E;if(w=d[h++],(192&w)!=128){h--;continue}if(h>=v)return this.interim[0]=f,this.interim[1]=w,E;if(x=d[h++],(192&x)!=128){h--;continue}if(a=(15&f)<<12|(63&w)<<6|63&x,a<2048||a>=55296&&a<=57343||a===65279)continue;_[E++]=a}else if((248&f)==240){if(h>=v)return this.interim[0]=f,E;if(w=d[h++],(192&w)!=128){h--;continue}if(h>=v)return this.interim[0]=f,this.interim[1]=w,E;if(x=d[h++],(192&x)!=128){h--;continue}if(h>=v)return this.interim[0]=f,this.interim[1]=w,this.interim[2]=x,E;if(R=d[h++],(192&R)!=128){h--;continue}if(a=(7&f)<<18|(63&w)<<12|(63&x)<<6|63&R,a<65536||a>1114111)continue;_[E++]=a}}return E}}},225:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeV6=void 0;const d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],_=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;l.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let f=0;f<d.length;++f)v.fill(0,d[f][0],d[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?v[f]:(function(w,x){let R,E=0,a=x.length-1;if(w<x[0][0]||w>x[a][1])return!1;for(;a>=E;)if(R=E+a>>1,w>x[R][1])E=R+1;else{if(!(w<x[R][0]))return!0;a=R-1}return!1})(f,_)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.WriteBuffer=void 0;const _=d(8460),v=d(844);class f extends v.Disposable{constructor(x){super(),this._action=x,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new _.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(x,R){if(R!==void 0&&this._syncCalls>R)return void(this._syncCalls=0);if(this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let E;for(this._isSyncWriting=!0;E=this._writeBuffer.shift();){this._action(E);const a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(x,R){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(R),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=x.length,this._writeBuffer.push(x),this._callbacks.push(R)}_innerWrite(x=0,R=!0){const E=x||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const a=this._writeBuffer[this._bufferOffset],o=this._action(a,R);if(o){const h=S=>Date.now()-E>=12?setTimeout((()=>this._innerWrite(0,S))):this._innerWrite(E,S);return void o.catch((S=>(queueMicrotask((()=>{throw S})),Promise.resolve(!1)))).then(h)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-E>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}l.WriteBuffer=f},5941:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.toRgbString=l.parseColor=void 0;const d=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,_=/^[\da-f]+$/;function v(f,w){const x=f.toString(16),R=x.length<2?"0"+x:x;switch(w){case 4:return x[0];case 8:return R;case 12:return(R+R).slice(0,3);default:return R+R}}l.parseColor=function(f){if(!f)return;let w=f.toLowerCase();if(w.indexOf("rgb:")===0){w=w.slice(4);const x=d.exec(w);if(x){const R=x[1]?15:x[4]?255:x[7]?4095:65535;return[Math.round(parseInt(x[1]||x[4]||x[7]||x[10],16)/R*255),Math.round(parseInt(x[2]||x[5]||x[8]||x[11],16)/R*255),Math.round(parseInt(x[3]||x[6]||x[9]||x[12],16)/R*255)]}}else if(w.indexOf("#")===0&&(w=w.slice(1),_.exec(w)&&[3,6,9,12].includes(w.length))){const x=w.length/3,R=[0,0,0];for(let E=0;E<3;++E){const a=parseInt(w.slice(x*E,x*E+x),16);R[E]=x===1?a<<4:x===2?a:x===3?a>>4:a>>8}return R}},l.toRgbString=function(f,w=16){const[x,R,E]=f;return`rgb:${v(x,w)}/${v(R,w)}/${v(E,w)}`}},5770:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PAYLOAD_LIMIT=void 0,l.PAYLOAD_LIMIT=1e7},6351:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DcsHandler=l.DcsParser=void 0;const _=d(482),v=d(8742),f=d(5770),w=[];l.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=w,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=w}registerHandler(R,E){this._handlers[R]===void 0&&(this._handlers[R]=[]);const a=this._handlers[R];return a.push(E),{dispose:()=>{const o=a.indexOf(E);o!==-1&&a.splice(o,1)}}}clearHandler(R){this._handlers[R]&&delete this._handlers[R]}setHandlerFallback(R){this._handlerFb=R}reset(){if(this._active.length)for(let R=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;R>=0;--R)this._active[R].unhook(!1);this._stack.paused=!1,this._active=w,this._ident=0}hook(R,E){if(this.reset(),this._ident=R,this._active=this._handlers[R]||w,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(E);else this._handlerFb(this._ident,"HOOK",E)}put(R,E,a){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(R,E,a);else this._handlerFb(this._ident,"PUT",(0,_.utf32ToString)(R,E,a))}unhook(R,E=!0){if(this._active.length){let a=!1,o=this._active.length-1,c=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,a=E,c=this._stack.fallThrough,this._stack.paused=!1),!c&&a===!1){for(;o>=0&&(a=this._active[o].unhook(R),a!==!0);o--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,a;o--}for(;o>=0;o--)if(a=this._active[o].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",R);this._active=w,this._ident=0}};const x=new v.Params;x.addParam(0),l.DcsHandler=class{constructor(R){this._handler=R,this._data="",this._params=x,this._hitLimit=!1}hook(R){this._params=R.length>1||R.params[0]?R.clone():x,this._data="",this._hitLimit=!1}put(R,E,a){this._hitLimit||(this._data+=(0,_.utf32ToString)(R,E,a),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(R){let E=!1;if(this._hitLimit)E=!1;else if(R&&(E=this._handler(this._data,this._params),E instanceof Promise))return E.then((a=>(this._params=x,this._data="",this._hitLimit=!1,a)));return this._params=x,this._data="",this._hitLimit=!1,E}}},2015:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.EscapeSequenceParser=l.VT500_TRANSITION_TABLE=l.TransitionTable=void 0;const _=d(844),v=d(8742),f=d(6242),w=d(6351);class x{constructor(o){this.table=new Uint8Array(o)}setDefault(o,c){this.table.fill(o<<4|c)}add(o,c,h,S){this.table[c<<8|o]=h<<4|S}addMany(o,c,h,S){for(let y=0;y<o.length;y++)this.table[c<<8|o[y]]=h<<4|S}}l.TransitionTable=x;const R=160;l.VT500_TRANSITION_TABLE=(function(){const a=new x(4095),o=Array.apply(null,Array(256)).map(((D,g)=>g)),c=(D,g)=>o.slice(D,g),h=c(32,127),S=c(0,24);S.push(25),S.push.apply(S,c(28,32));const y=c(0,14);let A;for(A in a.setDefault(1,0),a.addMany(h,0,2,0),y)a.addMany([24,26,153,154],A,3,0),a.addMany(c(128,144),A,3,0),a.addMany(c(144,152),A,3,0),a.add(156,A,0,0),a.add(27,A,11,1),a.add(157,A,4,8),a.addMany([152,158,159],A,0,7),a.add(155,A,11,3),a.add(144,A,11,9);return a.addMany(S,0,3,0),a.addMany(S,1,3,1),a.add(127,1,0,1),a.addMany(S,8,0,8),a.addMany(S,3,3,3),a.add(127,3,0,3),a.addMany(S,4,3,4),a.add(127,4,0,4),a.addMany(S,6,3,6),a.addMany(S,5,3,5),a.add(127,5,0,5),a.addMany(S,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(h,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(c(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(h,7,0,7),a.addMany(S,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(c(64,127),3,7,0),a.addMany(c(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(c(48,60),4,8,4),a.addMany(c(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(c(32,64),6,0,6),a.add(127,6,0,6),a.addMany(c(64,127),6,0,0),a.addMany(c(32,48),3,9,5),a.addMany(c(32,48),5,9,5),a.addMany(c(48,64),5,0,6),a.addMany(c(64,127),5,7,0),a.addMany(c(32,48),4,9,5),a.addMany(c(32,48),1,9,2),a.addMany(c(32,48),2,9,2),a.addMany(c(48,127),2,10,0),a.addMany(c(48,80),1,10,0),a.addMany(c(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(c(96,127),1,10,0),a.add(80,1,11,9),a.addMany(S,9,0,9),a.add(127,9,0,9),a.addMany(c(28,32),9,0,9),a.addMany(c(32,48),9,9,12),a.addMany(c(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(S,11,0,11),a.addMany(c(32,128),11,0,11),a.addMany(c(28,32),11,0,11),a.addMany(S,10,0,10),a.add(127,10,0,10),a.addMany(c(28,32),10,0,10),a.addMany(c(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(c(32,48),10,9,12),a.addMany(S,12,0,12),a.add(127,12,0,12),a.addMany(c(28,32),12,0,12),a.addMany(c(32,48),12,9,12),a.addMany(c(48,64),12,0,11),a.addMany(c(64,127),12,12,13),a.addMany(c(64,127),10,12,13),a.addMany(c(64,127),9,12,13),a.addMany(S,13,13,13),a.addMany(h,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(R,0,2,0),a.add(R,8,5,8),a.add(R,6,0,6),a.add(R,11,0,11),a.add(R,13,13,13),a})();class E extends _.Disposable{constructor(o=l.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,h,S)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,h)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,_.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new w.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(o,c=[64,126]){let h=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=o.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let y=0;y<o.intermediates.length;++y){const A=o.intermediates.charCodeAt(y);if(32>A||A>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=A}}if(o.final.length!==1)throw new Error("final must be a single byte");const S=o.final.charCodeAt(0);if(c[0]>S||S>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return h<<=8,h|=S,h}identToString(o){const c=[];for(;o;)c.push(String.fromCharCode(255&o)),o>>=8;return c.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,c){const h=this._identifier(o,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const S=this._escHandlers[h];return S.push(c),{dispose:()=>{const y=S.indexOf(c);y!==-1&&S.splice(y,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,c){this._executeHandlers[o.charCodeAt(0)]=c}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,c){const h=this._identifier(o);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const S=this._csiHandlers[h];return S.push(c),{dispose:()=>{const y=S.indexOf(c);y!==-1&&S.splice(y,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,c){return this._dcsParser.registerHandler(this._identifier(o),c)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,c){return this._oscParser.registerHandler(o,c)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,c,h,S,y){this._parseStack.state=o,this._parseStack.handlers=c,this._parseStack.handlerPos=h,this._parseStack.transition=S,this._parseStack.chunkPos=y}parse(o,c,h){let S,y=0,A=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const g=this._parseStack.handlers;let L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&L>-1){for(;L>=0&&(S=g[L](this._params),S!==!0);L--)if(S instanceof Promise)return this._parseStack.handlerPos=L,S}this._parseStack.handlers=[];break;case 4:if(h===!1&&L>-1){for(;L>=0&&(S=g[L](),S!==!0);L--)if(S instanceof Promise)return this._parseStack.handlerPos=L,S}this._parseStack.handlers=[];break;case 6:if(y=o[this._parseStack.chunkPos],S=this._dcsParser.unhook(y!==24&&y!==26,h),S)return S;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=o[this._parseStack.chunkPos],S=this._oscParser.end(y!==24&&y!==26,h),S)return S;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<c;++g){switch(y=o[g],A=this._transitions.table[this.currentState<<8|(y<160?y:R)],A>>4){case 2:for(let I=g+1;;++I){if(I>=c||(y=o[I])<32||y>126&&y<R){this._printHandler(o,g,I),g=I-1;break}if(++I>=c||(y=o[I])<32||y>126&&y<R){this._printHandler(o,g,I),g=I-1;break}if(++I>=c||(y=o[I])<32||y>126&&y<R){this._printHandler(o,g,I),g=I-1;break}if(++I>=c||(y=o[I])<32||y>126&&y<R){this._printHandler(o,g,I),g=I-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const L=this._csiHandlers[this._collect<<8|y];let O=L?L.length-1:-1;for(;O>=0&&(S=L[O](this._params),S!==!0);O--)if(S instanceof Promise)return this._preserveStack(3,L,O,A,g),S;O<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++g<c&&(y=o[g])>47&&y<60);g--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:const z=this._escHandlers[this._collect<<8|y];let U=z?z.length-1:-1;for(;U>=0&&(S=z[U](),S!==!0);U--)if(S instanceof Promise)return this._preserveStack(4,z,U,A,g),S;U<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(let I=g+1;;++I)if(I>=c||(y=o[I])===24||y===26||y===27||y>127&&y<R){this._dcsParser.put(o,g,I),g=I-1;break}break;case 14:if(S=this._dcsParser.unhook(y!==24&&y!==26),S)return this._preserveStack(6,[],0,A,g),S;y===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let I=g+1;;I++)if(I>=c||(y=o[I])<32||y>127&&y<R){this._oscParser.put(o,g,I),g=I-1;break}break;case 6:if(S=this._oscParser.end(y!==24&&y!==26),S)return this._preserveStack(5,[],0,A,g),S;y===27&&(A|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&A}}}l.EscapeSequenceParser=E},6242:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OscHandler=l.OscParser=void 0;const _=d(5770),v=d(482),f=[];l.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(w,x){this._handlers[w]===void 0&&(this._handlers[w]=[]);const R=this._handlers[w];return R.push(x),{dispose:()=>{const E=R.indexOf(x);E!==-1&&R.splice(E,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].start();else this._handlerFb(this._id,"START")}_put(w,x,R){if(this._active.length)for(let E=this._active.length-1;E>=0;E--)this._active[E].put(w,x,R);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(w,x,R))}start(){this.reset(),this._state=1}put(w,x,R){if(this._state!==3){if(this._state===1)for(;x<R;){const E=w[x++];if(E===59){this._state=2,this._start();break}if(E<48||57<E)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+E-48}this._state===2&&R-x>0&&this._put(w,x,R)}}end(w,x=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let R=!1,E=this._active.length-1,a=!1;if(this._stack.paused&&(E=this._stack.loopPosition-1,R=x,a=this._stack.fallThrough,this._stack.paused=!1),!a&&R===!1){for(;E>=0&&(R=this._active[E].end(w),R!==!0);E--)if(R instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=E,this._stack.fallThrough=!1,R;E--}for(;E>=0;E--)if(R=this._active[E].end(!1),R instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=E,this._stack.fallThrough=!0,R}else this._handlerFb(this._id,"END",w);this._active=f,this._id=-1,this._state=0}}},l.OscHandler=class{constructor(w){this._handler=w,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(w,x,R){this._hitLimit||(this._data+=(0,v.utf32ToString)(w,x,R),this._data.length>_.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(w){let x=!1;if(this._hitLimit)x=!1;else if(w&&(x=this._handler(this._data),x instanceof Promise))return x.then((R=>(this._data="",this._hitLimit=!1,R)));return this._data="",this._hitLimit=!1,x}}},8742:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Params=void 0;const d=2147483647;class _{static fromArray(f){const w=new _;if(!f.length)return w;for(let x=Array.isArray(f[0])?1:0;x<f.length;++x){const R=f[x];if(Array.isArray(R))for(let E=0;E<R.length;++E)w.addSubParam(R[E]);else w.addParam(R)}return w}constructor(f=32,w=32){if(this.maxLength=f,this.maxSubParamsLength=w,w>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(w),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let w=0;w<this.length;++w){f.push(this.params[w]);const x=this._subParamsIdx[w]>>8,R=255&this._subParamsIdx[w];R-x>0&&f.push(Array.prototype.slice.call(this._subParams,x,R))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>d?d:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>d?d:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const w=this._subParamsIdx[f]>>8,x=255&this._subParamsIdx[f];return x-w>0?this._subParams.subarray(w,x):null}getSubParamsAll(){const f={};for(let w=0;w<this.length;++w){const x=this._subParamsIdx[w]>>8,R=255&this._subParamsIdx[w];R-x>0&&(f[w]=this._subParams.slice(x,R))}return f}addDigit(f){let w;if(this._rejectDigits||!(w=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const x=this._digitIsSub?this._subParams:this.params,R=x[w-1];x[w-1]=~R?Math.min(10*R+f,d):f}}l.Params=_},5741:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AddonManager=void 0,l.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let d=this._addons.length-1;d>=0;d--)this._addons[d].instance.dispose()}loadAddon(d,_){const v={instance:_,dispose:_.dispose,isDisposed:!1};this._addons.push(v),_.dispose=()=>this._wrappedAddonDispose(v),_.activate(d)}_wrappedAddonDispose(d){if(d.isDisposed)return;let _=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===d){_=v;break}if(_===-1)throw new Error("Could not dispose an addon that has not been loaded");d.isDisposed=!0,d.dispose.apply(d.instance),this._addons.splice(_,1)}}},8771:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferApiView=void 0;const _=d(3785),v=d(511);l.BufferApiView=class{constructor(f,w){this._buffer=f,this.type=w}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const w=this._buffer.lines.get(f);if(w)return new _.BufferLineApiView(w)}getNullCell(){return new v.CellData}}},3785:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferLineApiView=void 0;const _=d(511);l.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,f){if(!(v<0||v>=this._line.length))return f?(this._line.loadCell(v,f),f):this._line.loadCell(v,new _.CellData)}translateToString(v,f,w){return this._line.translateToString(v,f,w)}}},8285:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BufferNamespaceApi=void 0;const _=d(8771),v=d(8460),f=d(844);class w extends f.Disposable{constructor(R){super(),this._core=R,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new _.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new _.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}l.BufferNamespaceApi=w},7975:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.ParserApi=void 0,l.ParserApi=class{constructor(d){this._core=d}registerCsiHandler(d,_){return this._core.registerCsiHandler(d,(v=>_(v.toArray())))}addCsiHandler(d,_){return this.registerCsiHandler(d,_)}registerDcsHandler(d,_){return this._core.registerDcsHandler(d,((v,f)=>_(v,f.toArray())))}addDcsHandler(d,_){return this.registerDcsHandler(d,_)}registerEscHandler(d,_){return this._core.registerEscHandler(d,_)}addEscHandler(d,_){return this.registerEscHandler(d,_)}registerOscHandler(d,_){return this._core.registerOscHandler(d,_)}addOscHandler(d,_){return this.registerOscHandler(d,_)}}},7090:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeApi=void 0,l.UnicodeApi=class{constructor(d){this._core=d}register(d){this._core.unicodeService.register(d)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(d){this._core.unicodeService.activeVersion=d}}},744:function(k,l,d){var _=this&&this.__decorate||function(a,o,c,h){var S,y=arguments.length,A=y<3?o:h===null?h=Object.getOwnPropertyDescriptor(o,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,h);else for(var D=a.length-1;D>=0;D--)(S=a[D])&&(A=(y<3?S(A):y>3?S(o,c,A):S(o,c))||A);return y>3&&A&&Object.defineProperty(o,c,A),A},v=this&&this.__param||function(a,o){return function(c,h){o(c,h,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.BufferService=l.MINIMUM_ROWS=l.MINIMUM_COLS=void 0;const f=d(8460),w=d(844),x=d(5295),R=d(2585);l.MINIMUM_COLS=2,l.MINIMUM_ROWS=1;let E=l.BufferService=class extends w.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,l.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,l.MINIMUM_ROWS),this.buffers=this.register(new x.BufferSet(a,this))}resize(a,o){this.cols=a,this.rows=o,this.buffers.resize(a,o),this._onResize.fire({cols:a,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,o=!1){const c=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===a.fg&&h.getBg(0)===a.bg||(h=c.getBlankLine(a,o),this._cachedBlankLine=h),h.isWrapped=o;const S=c.ybase+c.scrollTop,y=c.ybase+c.scrollBottom;if(c.scrollTop===0){const A=c.lines.isFull;y===c.lines.length-1?A?c.lines.recycle().copyFrom(h):c.lines.push(h.clone()):c.lines.splice(y+1,0,h.clone()),A?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const A=y-S+1;c.lines.shiftElements(S+1,A-1,-1),c.lines.set(y,h.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(a,o,c){const h=this.buffer;if(a<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else a+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const S=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+a,h.ybase),0),S!==h.ydisp&&(o||this._onScroll.fire(h.ydisp))}};l.BufferService=E=_([v(0,R.IOptionsService)],E)},7994:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CharsetService=void 0,l.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(d){this.glevel=d,this.charset=this._charsets[d]}setgCharset(d,_){this._charsets[d]=_,this.glevel===d&&(this.charset=_)}}},1753:function(k,l,d){var _=this&&this.__decorate||function(h,S,y,A){var D,g=arguments.length,L=g<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(h,S,y,A);else for(var O=h.length-1;O>=0;O--)(D=h[O])&&(L=(g<3?D(L):g>3?D(S,y,L):D(S,y))||L);return g>3&&L&&Object.defineProperty(S,y,L),L},v=this&&this.__param||function(h,S){return function(y,A){S(y,A,h)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreMouseService=void 0;const f=d(2585),w=d(8460),x=d(844),R={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function E(h,S){let y=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(y|=64,y|=h.action):(y|=3&h.button,4&h.button&&(y|=64),8&h.button&&(y|=128),h.action===32?y|=32:h.action!==0||S||(y|=3)),y}const a=String.fromCharCode,o={DEFAULT:h=>{const S=[E(h,!1)+32,h.col+32,h.row+32];return S[0]>255||S[1]>255||S[2]>255?"":`\x1B[M${a(S[0])}${a(S[1])}${a(S[2])}`},SGR:h=>{const S=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${E(h,!0)};${h.col};${h.row}${S}`},SGR_PIXELS:h=>{const S=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${E(h,!0)};${h.x};${h.y}${S}`}};let c=l.CoreMouseService=class extends x.Disposable{constructor(h,S){super(),this._bufferService=h,this._coreService=S,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new w.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const y of Object.keys(R))this.addProtocol(y,R[y]);for(const y of Object.keys(o))this.addEncoding(y,o[y]);this.reset()}addProtocol(h,S){this._protocols[h]=S}addEncoding(h,S){this._encodings[h]=S}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const S=this._encodings[this._activeEncoding](h);return S&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(S):this._coreService.triggerDataEvent(S,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,S,y){if(y){if(h.x!==S.x||h.y!==S.y)return!1}else if(h.col!==S.col||h.row!==S.row)return!1;return h.button===S.button&&h.action===S.action&&h.ctrl===S.ctrl&&h.alt===S.alt&&h.shift===S.shift}};l.CoreMouseService=c=_([v(0,f.IBufferService),v(1,f.ICoreService)],c)},6975:function(k,l,d){var _=this&&this.__decorate||function(c,h,S,y){var A,D=arguments.length,g=D<3?h:y===null?y=Object.getOwnPropertyDescriptor(h,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(c,h,S,y);else for(var L=c.length-1;L>=0;L--)(A=c[L])&&(g=(D<3?A(g):D>3?A(h,S,g):A(h,S))||g);return D>3&&g&&Object.defineProperty(h,S,g),g},v=this&&this.__param||function(c,h){return function(S,y){h(S,y,c)}};Object.defineProperty(l,"__esModule",{value:!0}),l.CoreService=void 0;const f=d(1439),w=d(8460),x=d(844),R=d(2585),E=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=l.CoreService=class extends x.Disposable{constructor(c,h,S){super(),this._bufferService=c,this._logService=h,this._optionsService=S,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new w.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new w.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new w.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new w.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(E),this.decPrivateModes=(0,f.clone)(a)}reset(){this.modes=(0,f.clone)(E),this.decPrivateModes=(0,f.clone)(a)}triggerDataEvent(c,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const S=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&S.ybase!==S.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,(()=>c.split("").map((y=>y.charCodeAt(0))))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,(()=>c.split("").map((h=>h.charCodeAt(0))))),this._onBinary.fire(c))}};l.CoreService=o=_([v(0,R.IBufferService),v(1,R.ILogService),v(2,R.IOptionsService)],o)},9074:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.DecorationService=void 0;const _=d(8055),v=d(8460),f=d(844),w=d(6106);let x=0,R=0;class E extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new w.SortedList((c=>c?.marker.line)),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)((()=>this.reset())))}registerDecoration(c){if(c.marker.isDisposed)return;const h=new a(c);if(h){const S=h.marker.onDispose((()=>h.dispose()));h.onDispose((()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),S.dispose())})),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,h,S){var y,A,D;let g=0,L=0;for(const O of this._decorations.getKeyIterator(h))g=(y=O.options.x)!==null&&y!==void 0?y:0,L=g+((A=O.options.width)!==null&&A!==void 0?A:1),c>=g&&c<L&&(!S||((D=O.options.layer)!==null&&D!==void 0?D:"bottom")===S)&&(yield O)}forEachDecorationAtCell(c,h,S,y){this._decorations.forEachByKey(h,(A=>{var D,g,L;x=(D=A.options.x)!==null&&D!==void 0?D:0,R=x+((g=A.options.width)!==null&&g!==void 0?g:1),c>=x&&c<R&&(!S||((L=A.options.layer)!==null&&L!==void 0?L:"bottom")===S)&&y(A)}))}}l.DecorationService=E;class a extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=_.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=_.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.InstantiationService=l.ServiceCollection=void 0;const _=d(2585),v=d(8343);class f{constructor(...x){this._entries=new Map;for(const[R,E]of x)this.set(R,E)}set(x,R){const E=this._entries.get(x);return this._entries.set(x,R),E}forEach(x){for(const[R,E]of this._entries.entries())x(R,E)}has(x){return this._entries.has(x)}get(x){return this._entries.get(x)}}l.ServiceCollection=f,l.InstantiationService=class{constructor(){this._services=new f,this._services.set(_.IInstantiationService,this)}setService(w,x){this._services.set(w,x)}getService(w){return this._services.get(w)}createInstance(w,...x){const R=(0,v.getServiceDependencies)(w).sort(((o,c)=>o.index-c.index)),E=[];for(const o of R){const c=this._services.get(o.id);if(!c)throw new Error(`[createInstance] ${w.name} depends on UNKNOWN service ${o.id}.`);E.push(c)}const a=R.length>0?R[0].index:x.length;if(x.length!==a)throw new Error(`[createInstance] First service dependency of ${w.name} at position ${a+1} conflicts with ${x.length} static arguments`);return new w(...x,...E)}}},7866:function(k,l,d){var _=this&&this.__decorate||function(a,o,c,h){var S,y=arguments.length,A=y<3?o:h===null?h=Object.getOwnPropertyDescriptor(o,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,o,c,h);else for(var D=a.length-1;D>=0;D--)(S=a[D])&&(A=(y<3?S(A):y>3?S(o,c,A):S(o,c))||A);return y>3&&A&&Object.defineProperty(o,c,A),A},v=this&&this.__param||function(a,o){return function(c,h){o(c,h,a)}};Object.defineProperty(l,"__esModule",{value:!0}),l.traceCall=l.setTraceLogger=l.LogService=void 0;const f=d(844),w=d(2585),x={trace:w.LogLevelEnum.TRACE,debug:w.LogLevelEnum.DEBUG,info:w.LogLevelEnum.INFO,warn:w.LogLevelEnum.WARN,error:w.LogLevelEnum.ERROR,off:w.LogLevelEnum.OFF};let R,E=l.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=w.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),R=this}_updateLogLevel(){this._logLevel=x[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let o=0;o<a.length;o++)typeof a[o]=="function"&&(a[o]=a[o]())}_log(a,o,c){this._evalLazyOptionalParams(c),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...c)}trace(a,...o){var c,h;this._logLevel<=w.LogLevelEnum.TRACE&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,a,o)}debug(a,...o){var c,h;this._logLevel<=w.LogLevelEnum.DEBUG&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,a,o)}info(a,...o){var c,h;this._logLevel<=w.LogLevelEnum.INFO&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,a,o)}warn(a,...o){var c,h;this._logLevel<=w.LogLevelEnum.WARN&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,a,o)}error(a,...o){var c,h;this._logLevel<=w.LogLevelEnum.ERROR&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,a,o)}};l.LogService=E=_([v(0,w.IOptionsService)],E),l.setTraceLogger=function(a){R=a},l.traceCall=function(a,o,c){if(typeof c.value!="function")throw new Error("not supported");const h=c.value;c.value=function(...S){if(R.logLevel!==w.LogLevelEnum.TRACE)return h.apply(this,S);R.trace(`GlyphRenderer#${h.name}(${S.map((A=>JSON.stringify(A))).join(", ")})`);const y=h.apply(this,S);return R.trace(`GlyphRenderer#${h.name} return`,y),y}}},7302:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionsService=l.DEFAULT_OPTIONS=void 0;const _=d(8460),v=d(844),f=d(6114);l.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const w=["normal","bold","100","200","300","400","500","600","700","800","900"];class x extends v.Disposable{constructor(E){super(),this._onOptionChange=this.register(new _.EventEmitter),this.onOptionChange=this._onOptionChange.event;const a=Object.assign({},l.DEFAULT_OPTIONS);for(const o in E)if(o in a)try{const c=E[o];a[o]=this._sanitizeAndValidateOption(o,c)}catch(c){console.error(c)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(E,a){return this.onOptionChange((o=>{o===E&&a(this.rawOptions[E])}))}onMultipleOptionChange(E,a){return this.onOptionChange((o=>{E.indexOf(o)!==-1&&a()}))}_setupOptions(){const E=o=>{if(!(o in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},a=(o,c)=>{if(!(o in l.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);c=this._sanitizeAndValidateOption(o,c),this.rawOptions[o]!==c&&(this.rawOptions[o]=c,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const c={get:E.bind(this,o),set:a.bind(this,o)};Object.defineProperty(this.options,o,c)}}_sanitizeAndValidateOption(E,a){switch(E){case"cursorStyle":if(a||(a=l.DEFAULT_OPTIONS[E]),!(function(o){return o==="block"||o==="underline"||o==="bar"})(a))throw new Error(`"${a}" is not a valid value for ${E}`);break;case"wordSeparator":a||(a=l.DEFAULT_OPTIONS[E]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=w.includes(a)?a:l.DEFAULT_OPTIONS[E];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${E} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${E} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${E} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${E} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}l.OptionsService=x},2660:function(k,l,d){var _=this&&this.__decorate||function(x,R,E,a){var o,c=arguments.length,h=c<3?R:a===null?a=Object.getOwnPropertyDescriptor(R,E):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(x,R,E,a);else for(var S=x.length-1;S>=0;S--)(o=x[S])&&(h=(c<3?o(h):c>3?o(R,E,h):o(R,E))||h);return c>3&&h&&Object.defineProperty(R,E,h),h},v=this&&this.__param||function(x,R){return function(E,a){R(E,a,x)}};Object.defineProperty(l,"__esModule",{value:!0}),l.OscLinkService=void 0;const f=d(2585);let w=l.OscLinkService=class{constructor(x){this._bufferService=x,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(x){const R=this._bufferService.buffer;if(x.id===void 0){const S=R.addMarker(R.ybase+R.y),y={data:x,id:this._nextId++,lines:[S]};return S.onDispose((()=>this._removeMarkerFromLink(y,S))),this._dataByLinkId.set(y.id,y),y.id}const E=x,a=this._getEntryIdKey(E),o=this._entriesWithId.get(a);if(o)return this.addLineToLink(o.id,R.ybase+R.y),o.id;const c=R.addMarker(R.ybase+R.y),h={id:this._nextId++,key:this._getEntryIdKey(E),data:E,lines:[c]};return c.onDispose((()=>this._removeMarkerFromLink(h,c))),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(x,R){const E=this._dataByLinkId.get(x);if(E&&E.lines.every((a=>a.line!==R))){const a=this._bufferService.buffer.addMarker(R);E.lines.push(a),a.onDispose((()=>this._removeMarkerFromLink(E,a)))}}getLinkData(x){var R;return(R=this._dataByLinkId.get(x))===null||R===void 0?void 0:R.data}_getEntryIdKey(x){return`${x.id};;${x.uri}`}_removeMarkerFromLink(x,R){const E=x.lines.indexOf(R);E!==-1&&(x.lines.splice(E,1),x.lines.length===0&&(x.data.id!==void 0&&this._entriesWithId.delete(x.key),this._dataByLinkId.delete(x.id)))}};l.OscLinkService=w=_([v(0,f.IBufferService)],w)},8343:(k,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createDecorator=l.getServiceDependencies=l.serviceRegistry=void 0;const d="di$target",_="di$dependencies";l.serviceRegistry=new Map,l.getServiceDependencies=function(v){return v[_]||[]},l.createDecorator=function(v){if(l.serviceRegistry.has(v))return l.serviceRegistry.get(v);const f=function(w,x,R){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(E,a,o){a[d]===a?a[_].push({id:E,index:o}):(a[_]=[{id:E,index:o}],a[d]=a)})(f,w,R)};return f.toString=()=>v,l.serviceRegistry.set(v,f),f}},2585:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.IDecorationService=l.IUnicodeService=l.IOscLinkService=l.IOptionsService=l.ILogService=l.LogLevelEnum=l.IInstantiationService=l.ICharsetService=l.ICoreService=l.ICoreMouseService=l.IBufferService=void 0;const _=d(8343);var v;l.IBufferService=(0,_.createDecorator)("BufferService"),l.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),l.ICoreService=(0,_.createDecorator)("CoreService"),l.ICharsetService=(0,_.createDecorator)("CharsetService"),l.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"})(v||(l.LogLevelEnum=v={})),l.ILogService=(0,_.createDecorator)("LogService"),l.IOptionsService=(0,_.createDecorator)("OptionsService"),l.IOscLinkService=(0,_.createDecorator)("OscLinkService"),l.IUnicodeService=(0,_.createDecorator)("UnicodeService"),l.IDecorationService=(0,_.createDecorator)("DecorationService")},1480:(k,l,d)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.UnicodeService=void 0;const _=d(8460),v=d(225);l.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new _.EventEmitter,this.onChange=this._onChange.event;const f=new v.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let w=0;const x=f.length;for(let R=0;R<x;++R){let E=f.charCodeAt(R);if(55296<=E&&E<=56319){if(++R>=x)return w+this.wcwidth(E);const a=f.charCodeAt(R);56320<=a&&a<=57343?E=1024*(E-55296)+a-56320+65536:w+=this.wcwidth(a)}w+=this.wcwidth(E)}return w}}}},p={};function T(k){var l=p[k];if(l!==void 0)return l.exports;var d=p[k]={exports:{}};return b[k].call(d.exports,d,d.exports,T),d.exports}var H={};return(()=>{var k=H;Object.defineProperty(k,"__esModule",{value:!0}),k.Terminal=void 0;const l=T(9042),d=T(3236),_=T(844),v=T(5741),f=T(8285),w=T(7975),x=T(7090),R=["cols","rows"];class E extends _.Disposable{constructor(o){super(),this._core=this.register(new d.Terminal(o)),this._addonManager=this.register(new v.AddonManager),this._publicOptions=Object.assign({},this._core.options);const c=S=>this._core.options[S],h=(S,y)=>{this._checkReadonlyOptions(S),this._core.options[S]=y};for(const S in this._core.options){const y={get:c.bind(this,S),set:h.bind(this,S)};Object.defineProperty(this._publicOptions,S,y)}}_checkReadonlyOptions(o){if(R.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new w.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new x.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const c in o)this._publicOptions[c]=o[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(o,c){this._verifyIntegers(o,c),this._core.resize(o,c)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){var c,h,S;return this._checkProposedApi(),this._verifyPositiveIntegers((c=o.x)!==null&&c!==void 0?c:0,(h=o.width)!==null&&h!==void 0?h:0,(S=o.height)!==null&&S!==void 0?S:0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,c,h){this._verifyIntegers(o,c,h),this._core.select(o,c,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,c){this._verifyIntegers(o,c),this._core.selectLines(o,c)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,c){this._core.write(o,c)}writeln(o,c){this._core.write(o),this._core.write(`\r
`,c)}paste(o){this._core.paste(o)}refresh(o,c){this._verifyIntegers(o,c),this._core.refresh(o,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return l}_verifyIntegers(...o){for(const c of o)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const c of o)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}k.Terminal=E})(),H})()))})(Zc)),Zc.exports}var ub=cb(),Qc={exports:{}},sm;function hb(){return sm||(sm=1,(function(n,m){(function(b,p){n.exports=p()})(self,(()=>(()=>{var b={};return(()=>{var p=b;Object.defineProperty(p,"__esModule",{value:!0}),p.FitAddon=void 0,p.FitAddon=class{activate(T){this._terminal=T}dispose(){}fit(){const T=this.proposeDimensions();if(!T||!this._terminal||isNaN(T.cols)||isNaN(T.rows))return;const H=this._terminal._core;this._terminal.rows===T.rows&&this._terminal.cols===T.cols||(H._renderService.clear(),this._terminal.resize(T.cols,T.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const T=this._terminal._core,H=T._renderService.dimensions;if(H.css.cell.width===0||H.css.cell.height===0)return;const k=this._terminal.options.scrollback===0?0:T.viewport.scrollBarWidth,l=window.getComputedStyle(this._terminal.element.parentElement),d=parseInt(l.getPropertyValue("height")),_=Math.max(0,parseInt(l.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),f=d-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),w=_-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-k;return{cols:Math.max(2,Math.floor(w/H.css.cell.width)),rows:Math.max(1,Math.floor(f/H.css.cell.height))}}}})(),b})()))})(Qc)),Qc.exports}var db=hb();const Xr=new Map;function fb(n,m){const b=new ub.Terminal({convertEol:!0,cursorBlink:!0,fontSize:14,fontFamily:"IBM Plex Mono, JetBrains Mono, Menlo, monospace",disableStdin:!1,theme:{background:"#1e1e1e"}}),p=new db.FitAddon,T={current:m};b.loadAddon(p),b.attachCustomKeyEventHandler(l=>l.type!=="keydown"?!0:l.ctrlKey&&!l.altKey&&!l.metaKey&&l.code==="KeyD"?(au({id:n,data:""}),!1):!0);const H=b.onData(l=>{au({id:n,data:l}),T.current?.(l)}),k={term:b,fitAddon:p,onInput:T,dataListener:H,disposed:!1};return k.unlisten=wS(l=>{l.id===n&&b.write(l.data)}),k}function _b(n,m,b){const p=Xr.get(n)??fb(n,b);return p.onInput.current=b,Xr.set(n,p),p.term.element?p.term.element.parentElement!==m&&m.appendChild(p.term.element):p.term.open(m),{term:p.term,fitAddon:p.fitAddon}}function mb(n,m){const b=Xr.get(n);if(!b||!m)return;const p=b.term.element;p&&p.parentElement===m&&m.removeChild(p)}function gl(n){const m=Xr.get(n);m&&(m.disposed=!0,m.dataListener.dispose(),m.unlisten&&m.unlisten(),m.term.dispose(),Xr.delete(n))}async function cu(n){const m=await bS({cwd:n?.cwd}),b=n?.meta?{...n.meta,cwd:n?.cwd??n.meta.cwd}:n?.cwd?{cwd:n.cwd}:void 0;return{type:"pane",id:Ll(),sessionId:m,meta:b}}async function Zm(n){const m=Vr(n);await Promise.all(m.map(async b=>{try{await pl({id:b.sessionId})}catch{}finally{gl(b.sessionId)}}))}function pb({repos:n,enabledRepoIds:m,setEnabledRepoIds:b,onRemoveRepo:p,onTriggerOpenFolder:T,width:H,gitRefreshRequest:k,onRebaseBranch:l,onSwitchBranchWithCheck:d,onSquashCommitsWithCheck:_,appendPane:v}){const{statusByRepo:f,statusByWorktreeByRepo:w,localBranchesByRepo:x,remoteBranchesByRepo:R,worktreeCommitsByRepo:E,worktreesByRepo:a,remotesByRepo:o,submodulesByRepo:c,stashesByRepo:h,tagsByRepo:S,changedFilesByRepo:y,changedFilesByWorktreeByRepo:A,loading:D,error:g,setRepos:L,refreshRepos:O,stageFiles:z,unstageFiles:U,discardFiles:I,stageAll:$,unstageAll:te,commit:G,pull:K,push:B,mergeIntoBranch:F,rebaseBranch:W,createBranch:j,deleteBranch:V,switchBranch:ee,smartUpdateWorktrees:Y,reset:se,revert:me,squashCommits:N,commitsInRemote:Q,createWorktree:ie,removeWorktree:ne,applyStash:Re,dropStash:ve,createStash:Le,loadMoreTags:Ne,canLoadMoreTags:Fe,isLoadingMoreTags:Ce,loadMoreCommits:Be,loadMoreLocalBranches:Ut,loadMoreRemoteBranches:Xt,canLoadMoreCommits:Kt,canLoadMoreLocalBranches:Lt,canLoadMoreRemoteBranches:jt,isLoadingMoreCommits:lt}=Xm(),{runGitCommand:Ae,showGitCommandError:ut}=Km();P.useEffect(()=>{L(n)},[n,L]),P.useEffect(()=>{n.length&&O()},[n,O]),P.useEffect(()=>{n.length&&k.seq!==0&&O(k.repoId??void 0)},[k.repoId,k.seq,O,n.length]);const mt=P.useMemo(()=>n.map(pe=>({repoId:pe.repo_id,name:pe.name||pe.root_path,path:pe.root_path,activeBranch:f[pe.repo_id]?.branch})),[n,f]),Ke=P.useMemo(()=>mt.filter(pe=>m.includes(pe.repoId)),[mt,m]),ht=P.useMemo(()=>Ke.map(pe=>({repo:pe,localBranches:x[pe.repoId]??[],remoteBranches:R[pe.repoId]??[]})),[x,R,Ke]),Pt=P.useMemo(()=>Ke.map(pe=>({repo:pe,items:(a[pe.repoId]??[]).map(le=>({worktree:le,commits:E[pe.repoId]?.[le.path]??[]}))})),[Ke,a,E]),wt=P.useMemo(()=>Ke.map(pe=>({repo:pe,items:a[pe.repoId]??[]})),[Ke,a]),Nt=P.useMemo(()=>Ke.map(pe=>({repo:pe,items:o[pe.repoId]??[]})),[Ke,o]),We=P.useMemo(()=>mt.map(pe=>({repo:pe,items:c[pe.repoId]??[]})),[mt,c]),It=P.useMemo(()=>Ke.map(pe=>({repo:pe,items:h[pe.repoId]??[]})),[Ke,h]),pt=P.useMemo(()=>Ke.map(pe=>({repo:pe,items:S[pe.repoId]??[]})),[Ke,S]),Bt=P.useMemo(()=>{const pe=Ke.map(ue=>({repo:ue,items:y[ue.repoId]??[]})),le=Ke.flatMap(ue=>{const _e=a[ue.repoId]??[],we=new Map(_e.map(Se=>[Se.path,Se])),ye=w[ue.repoId]??{},be=new Set([...we.keys(),...Object.keys(ye)]);return Array.from(be).filter(Se=>Se!==ue.path).map(Se=>{const Rt=we.get(Se)?.branch??ye[Se]?.branch??"HEAD";return{repo:{repoId:QS(ue.repoId,Se),name:`${ue.name}:${Rt}`,path:Se,activeBranch:Rt},items:A[ue.repoId]?.[Se]??[]}})});return[...pe,...le]},[Ke,y,a,w,A]),rt=P.useCallback(async(pe,le)=>{try{const ue=await cu({cwd:le,meta:{title:pe,subtitle:le,cwd:le}});v(ue,pe)}catch(ue){console.warn("Failed to open terminal pane",ue)}},[v]),Ni=P.useCallback(pe=>{rt(pe.name,pe.path)},[rt]),Hi=P.useCallback(async pe=>{try{await ru(pe.path)}catch(le){ut("Open folder failed",le,"Failed to open repo folder.")}},[ut]),kt=P.useCallback((pe,le)=>{const ue=`${pe.name}:${le.branch}`;rt(ue,le.path)},[rt]),pi=P.useCallback(async(pe,le)=>{try{await ru(le.path)}catch(ue){ut("Open folder failed",ue,"Failed to open worktree folder.")}},[ut]),gi=P.useCallback((pe,le,ue)=>{if(l){l(pe,le,ue);return}Ae("Rebase failed","Failed to rebase branch.",()=>W(pe,le,ue))},[l,Ae,W]),vi=P.useCallback((pe,le)=>{const ue=f[pe];if(ue&&(ue.has_staged||ue.has_unstaged)){d&&d(pe,le);return}Ae("Switch branch failed","Failed to switch branch.",()=>ee(pe,le))},[f,d,Ae,ee]),Ht=P.useCallback((pe,le,ue)=>{Ae("Squash failed","Failed to squash commits.",async()=>{if(await Q(pe,ue,le)){_&&_(pe,le,ue);return}await N(pe,ue,le)})},[Ae,Q,_,N]),yi=P.useCallback(pe=>{Ae("Smart update failed","Failed to smart update worktrees.",()=>Y(pe))},[Ae,Y]);return C.jsx(SS,{width:H,loading:D,error:g,repos:mt,enabledRepoIds:m,onEnableRepos:b,branchGroups:ht,commitGroups:Pt,worktreeGroups:wt,remoteGroups:Nt,submoduleGroups:We,stashGroups:It,tagGroups:pt,onLoadMoreTags:Ne,canLoadMoreTags:Fe,isLoadingMoreTags:Ce,changedFileGroups:Bt,onRemoveRepo:p,onRefresh:()=>{Ae("Refresh failed","Failed to refresh git data.",()=>O())},onStageAll:pe=>Ae("Stage all failed","Failed to stage all files.",()=>$(pe)),onUnstageAll:pe=>{Ae("Unstage all failed","Failed to unstage all files.",()=>te(pe))},onStageFile:(pe,le)=>{Ae("Stage file failed","Failed to stage file.",()=>z(pe,[le]))},onUnstageFile:(pe,le)=>{Ae("Unstage file failed","Failed to unstage file.",()=>U(pe,[le]))},onRollbackFiles:(pe,le)=>{Ae("Roll back failed","Failed to roll back files.",()=>I(pe,le))},onCommit:(pe,le)=>Ae("Commit failed","Failed to commit changes.",()=>G(pe,le)),onPull:pe=>{Ae("Pull failed","Failed to pull changes.",()=>K(pe))},onPush:(pe,le)=>{Ae("Push failed","Failed to push changes.",()=>B(pe,le))},onCreateBranch:(pe,le,ue)=>{Ae("Create branch failed","Failed to create branch.",()=>j(pe,le,ue))},onDeleteBranch:(pe,le)=>{Ae("Delete branch failed","Failed to delete branch.",()=>V(pe,le))},onSwitchBranch:vi,onMergeBranch:(pe,le,ue)=>{Ae("Merge failed","Failed to merge branch.",()=>F(pe,le,ue))},onRebaseBranch:gi,onReset:(pe,le,ue,_e)=>{Ae("Reset failed","Failed to reset commit.",()=>se(pe,ue,_e,le))},onRevert:(pe,le,ue)=>{Ae("Revert failed","Failed to revert commit.",()=>me(pe,ue,le))},onSquashCommits:Ht,onCreateWorktree:(pe,le,ue)=>{Ae("Create worktree failed","Failed to create worktree.",()=>ie(pe,le,ue))},onDeleteWorktree:(pe,le)=>{Ae("Delete worktree failed","Failed to delete worktree.",()=>ne(pe,le))},onApplyStash:(pe,le)=>{Ae("Apply stash failed","Failed to apply stash.",()=>Re(pe,le))},onStash:(pe,le)=>{Ae("Stash failed","Failed to stash changes.",()=>Le(pe,le))},onDeleteStash:(pe,le)=>{Ae("Delete stash failed","Failed to delete stash.",()=>ve(pe,le))},onOpenRepoTerminal:Ni,onOpenRepoFolder:Hi,onOpenWorktreeTerminal:kt,onOpenWorktreeFolder:pi,onSmartUpdateWorktrees:yi,onOpenFolder:T,onLoadMoreCommits:(pe,le)=>{Ae("Load commits failed","Failed to load more commits.",()=>Be(pe,le))},onLoadMoreLocalBranches:Ut,onLoadMoreRemoteBranches:Xt,canLoadMoreCommits:Kt,canLoadMoreLocalBranches:Lt,canLoadMoreRemoteBranches:jt,isLoadingMoreCommits:lt})}function gb({pane:n,isActive:m,onFocused:b,onInput:p,layoutTick:T}){const H=P.useRef(null),k=P.useRef(null),l=P.useRef(p),d=P.useRef(null);P.useEffect(()=>{l.current=p},[p]);const _=P.useCallback(async()=>{const f=k.current,w=f?.term??null,x=f?.fitAddon??null;if(!w||!x)return;x.fit();const R=w.cols,E=w.rows;await CS({id:n.sessionId,cols:R,rows:E}),w.refresh(0,Math.max(0,w.rows-1))},[n.sessionId]),v=P.useCallback(()=>{d.current===null&&(d.current=window.setTimeout(()=>{d.current=null,_()},100))},[_]);return P.useEffect(()=>{const f=H.current;if(!f)return;const w=_b(n.sessionId,f,R=>{l.current&&l.current(n,R)});k.current=w,_();const x=new ResizeObserver(()=>{v()});return x.observe(f),window.addEventListener("resize",v),()=>{x.disconnect(),window.removeEventListener("resize",v),d.current!==null&&(window.clearTimeout(d.current),d.current=null),mb(n.sessionId,f)}},[n,n.sessionId,v,_]),P.useEffect(()=>{const f=k.current?.term;m&&f&&f.focus()},[m]),P.useEffect(()=>{T!==void 0&&v()},[T,v]),C.jsx("div",{className:`pane ${m?"pane-active":""}`,ref:H,tabIndex:0,onClick:()=>b(n.id),children:C.jsxs("div",{className:"pane-label","aria-hidden":!0,children:[C.jsx("div",{className:"pane-label-primary",children:n.meta?.title??"Terminal"}),n.meta?.subtitle?C.jsx("div",{className:"pane-label-sub",children:n.meta.subtitle}):null]})})}function uu({node:n,activePaneId:m,onFocus:b,layoutTick:p}){if(n.type==="pane")return C.jsx(gb,{pane:n,isActive:n.id===m,onFocused:b,layoutTick:p});const T=n.orientation==="vertical";return C.jsxs("div",{className:`split ${T?"split-vertical":"split-horizontal"}`,children:[C.jsx(uu,{node:n.children[0],activePaneId:m,onFocus:b,layoutTick:p}),C.jsx(uu,{node:n.children[1],activePaneId:m,onFocus:b,layoutTick:p})]})}function vb({tabs:n,activeTabId:m,terminalSplitPaneIds:b,terminalSplitViews:p,layoutTick:T,onSetActiveTab:H,onSetActivePane:k,onCloseTab:l,onNewPane:d,onSetTerminalView:_}){const[v,f]=P.useState(null),w=P.useMemo(()=>{if(!v)return[];const x=n.find(o=>o.id===v.tabId),R=p[v.tabId]??"single",a=!!(b[v.tabId]??[]).length&&(x?Xn(x.layout)>1:!1);return[{id:"view",label:"View",type:"separator"},{id:"single",label:"Single view",type:"radio",selected:R==="single"||!a},{id:"vertical",label:"Vertical split view",type:"radio",selected:R==="vertical"&&a},{id:"horizontal",label:"Horizontal split view",type:"radio",selected:R==="horizontal"&&a},{id:"quad",label:"4 split view",type:"radio",selected:R==="quad"&&a}]},[v,n,b,p]);return C.jsxs("section",{className:"terminal-panel",children:[C.jsx("div",{className:"terminal-tabbar",children:C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"terminal-tabs",role:"tablist","aria-label":"Terminal sessions",children:n.map((x,R)=>{const E=x.id===m;return C.jsxs("div",{className:`terminal-tab ${E?"is-active":""}`,role:"tab",tabIndex:0,"aria-selected":E,onClick:()=>H(x.id),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),H(x.id))},children:[C.jsx(Te,{name:"terminal",size:14}),C.jsx("span",{children:x.title||`Terminal ${R+1}`}),C.jsx("button",{type:"button",className:"terminal-tab-menu",onClick:a=>{a.stopPropagation(),H(x.id);const o=a.currentTarget.getBoundingClientRect();f({tabId:x.id,position:{x:o.left,y:o.bottom+6}})},title:"Terminal options",children:C.jsx(Te,{name:"ellipsis",size:14})}),C.jsx("button",{type:"button",className:"terminal-tab-close",onClick:a=>{a.stopPropagation(),l(x.id)},title:"Close terminal",children:C.jsx(Te,{name:"close",size:12})})]},x.id)})}),C.jsx("div",{className:"terminal-actions",children:C.jsx("button",{type:"button",className:"icon-button",title:"New terminal",onClick:d,children:C.jsx(Te,{name:"plus",size:16})})})]})}),C.jsxs("section",{className:"terminal-shell",children:[n.length?n.map(x=>{const R=x.id===m,E=!R;return C.jsx("div",{className:`terminal-shell-body ${E?"is-hidden":""}`,children:C.jsx(uu,{node:x.layout,activePaneId:R?x.activePaneId:null,onFocus:k,layoutTick:T})},x.id)}):C.jsx("div",{className:"terminal-placeholder",children:"No terminals yet. Use + to start one."}),null]}),v?C.jsx(fu,{items:w,position:v.position,onClose:()=>f(null),onSelect:x=>{x==="single"&&_(v.tabId,"single"),x==="vertical"&&_(v.tabId,"vertical"),x==="horizontal"&&_(v.tabId,"horizontal"),x==="quad"&&_(v.tabId,"quad")}}):null]})}function yb({tabs:n,activeTabId:m,closeTab:b,closePanesInTab:p,splitPaneInTab:T,appendPane:H,setActiveTabId:k,setActivePaneId:l}){const[d,_]=P.useState({}),[v,f]=P.useState({}),[w,x]=P.useState(0);P.useEffect(()=>{_(o=>{let c=!1;const h={...o},S=new Set(n.map(y=>y.id));return Object.keys(h).forEach(y=>{S.has(y)||(delete h[y],c=!0)}),n.forEach(y=>{const A=o[y.id]??[];if(!A.length)return;const D=A.filter(g=>nn(y.layout,g));D.length!==A.length&&(h[y.id]=D,c=!0)}),c?h:o}),f(o=>{let c=!1;const h={...o},S=new Set(n.map(y=>y.id));return Object.keys(h).forEach(y=>{S.has(y)||(delete h[y],c=!0)}),n.forEach(y=>{!(d[y.id]??[]).length&&h[y.id]&&h[y.id]!=="single"&&(h[y.id]="single",c=!0)}),c?h:o})},[n,d]);const R=P.useCallback(async()=>{const c=`Terminal ${n.length+1}`,h=await cu({meta:{title:c}});H(h,c)},[H,n.length]),E=P.useCallback(async(o,c)=>{const h=n.find(I=>I.id===o);if(!h)return;const S=v[o]??"single";if(c===S)return;const y=d[o]??[];if(y.length&&await p(o,y),c==="single"){_(I=>({...I,[o]:[]})),f(I=>({...I,[o]:"single"})),requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))}),x(I=>I+1);return}let A=h.activePaneId;if(y.length){const $=Vr(h.layout).find(te=>!y.includes(te.id));$&&(A=$.id)}if(A||(A=Wn(h.layout)?.id??null),!A)return;const D=A,g=nn(h.layout,D),L=g?.meta?.cwd??g?.meta?.subtitle,O=g?.meta?.subtitle,z=Xn(h.layout),U=async I=>cu({cwd:L,meta:{title:`Terminal ${z+I}`,subtitle:O,cwd:L}});if(c==="vertical"||c==="horizontal"){const I=await U(1);T(o,I,D,c==="vertical"?"vertical":"horizontal"),_($=>({...$,[o]:[I.id]})),f($=>({...$,[o]:c}))}else{const I=await U(1);T(o,I,D,"vertical");const $=await U(2);T(o,$,D,"horizontal");const te=await U(3);T(o,te,I.id,"horizontal"),_(G=>({...G,[o]:[I.id,$.id,te.id]})),f(G=>({...G,[o]:"quad"}))}requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))}),x(I=>I+1)},[p,T,n,d,v]),a=m??n[0]?.id??null;return C.jsx(vb,{tabs:n,activeTabId:a,terminalSplitPaneIds:d,terminalSplitViews:v,layoutTick:w,onSetActiveTab:k,onSetActivePane:l,onCloseTab:o=>b(o),onNewPane:()=>void R(),onSetTerminalView:(o,c)=>void E(o,c)})}function Sb(){const[n,m]=P.useState([]),[b,p]=P.useState(null),T=P.useRef(n),H=P.useRef(b);P.useEffect(()=>{T.current=n},[n]),P.useEffect(()=>{H.current=b},[b]),P.useEffect(()=>{if(!n.length){b!==null&&p(null);return}(!b||!n.some(y=>y.id===b))&&p(n[0].id)},[n,b]);const k=P.useMemo(()=>n.length?b?n.find(y=>y.id===b)??n[0]:n[0]:null,[n,b]),l=k?.layout??null,d=k?.activePaneId??null,_=P.useCallback(()=>H.current??T.current[0]?.id??null,[]),v=P.useCallback(y=>{const A=_();A&&m(D=>D.map(g=>g.id===A?{...g,activePaneId:y}:g))},[_]),f=P.useCallback((y,A)=>{const D=Ll(),g=A??y.meta?.title??`Terminal ${T.current.length+1}`;m(L=>[...L,{id:D,title:g,layout:y,activePaneId:y.id}]),p(D)},[]),w=P.useCallback((y,A,D)=>{const g=_();g&&m(L=>L.map(O=>{if(O.id!==g)return O;const z=tm(O.layout,A,y,D),U=z===O.layout?J_(O.layout,y,em(O.layout)):z;return{...O,layout:U??y,activePaneId:y.id}}))},[_]),x=P.useCallback((y,A,D,g)=>{m(L=>L.map(O=>{if(O.id!==y)return O;const z=tm(O.layout,D,A,g),U=z===O.layout?J_(O.layout,A,em(O.layout)):z;return{...O,layout:U??A,activePaneId:A.id}}))},[]),R=P.useCallback(y=>{const A=T.current,D=A.findIndex(O=>O.id===y);if(D===-1)return;const g=A[D],L=A.filter(O=>O.id!==y);if(m(L),H.current===y){const O=L[D-1]??L[D]??L[0];p(O?.id??null)}Zm(g.layout)},[]),E=P.useCallback(async y=>{const A=_();if(!A)return;const D=T.current.find(L=>L.id===A);if(!D)return;const g=nn(D.layout,y);if(g){if(Xn(D.layout)===1){R(A);return}try{await pl({id:g.sessionId})}catch(L){console.warn("Failed to kill session",L)}gl(g.sessionId),m(L=>L.map(O=>{if(O.id!==A)return O;const z=Fr(O.layout,y);if(!z)return O;const U=O.activePaneId===y?Wn(z)?.id??null:O.activePaneId;return{...O,layout:z,activePaneId:U}}))}},[R,_]),a=P.useCallback(async(y,A)=>{const D=T.current.find(L=>L.id===y);if(!D)return;const g=nn(D.layout,A);if(g){if(Xn(D.layout)===1){R(y);return}try{await pl({id:g.sessionId})}catch(L){console.warn("Failed to kill session",L)}gl(g.sessionId),m(L=>L.map(O=>{if(O.id!==y)return O;const z=Fr(O.layout,A);if(!z)return O;const U=O.activePaneId===A?Wn(z)?.id??null:O.activePaneId;return{...O,layout:z,activePaneId:U}}))}},[R]),o=P.useCallback(async(y,A)=>{const D=T.current.find(L=>L.id===y);if(!D)return;const g=A.map(L=>nn(D.layout,L)).filter(L=>!!L);g.length!==0&&(await Promise.all(g.map(async L=>{try{await pl({id:L.sessionId})}catch(O){console.warn("Failed to kill session",O)}gl(L.sessionId)})),m(L=>L.map(O=>{if(O.id!==y)return O;let z=O.layout;for(const I of A){const $=Fr(z,I);if(!$)return O;z=$}const U=O.activePaneId&&A.includes(O.activePaneId)?Wn(z)?.id??null:O.activePaneId;return{...O,layout:z,activePaneId:U}})))},[]),c=P.useCallback(async()=>{const y=_();if(!y)return;const A=T.current.find(D=>D.id===y);A?.activePaneId&&await E(A.activePaneId)},[E,_]),h=P.useCallback(()=>T.current,[]),S=P.useCallback((y,A)=>{const D=_();if(!D)return;const g=T.current.find(O=>O.id===D);if(!g)return;const L=Vr(g.layout).map(O=>O.sessionId).filter(O=>O!==y.sessionId);L.length&&L.forEach(O=>{au({id:O,data:A})})},[_]);return{tabs:n,activeTabId:b,setActiveTabId:p,layout:l,activePaneId:d,setActivePaneId:v,appendPane:f,splitPaneInLayout:w,splitPaneInTab:x,closePane:E,closePaneInTab:a,closePanesInTab:o,closeActivePane:c,closeTab:R,getTabsSnapshot:h,broadcastPaneInput:S}}function bb(n){P.useEffect(()=>{const m=b=>{!b.ctrlKey||!b.shiftKey||b.code==="KeyW"&&(b.preventDefault(),n())};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[n])}function Cb({repos:n,enabledRepoIds:m,setEnabledRepoIds:b,onRemoveRepo:p,onTriggerOpenFolder:T,gitRefreshRequest:H,onRebaseBranch:k,onSwitchBranchWithCheck:l,onSquashCommitsWithCheck:d,children:_}){const{tabs:v,activeTabId:f,setActiveTabId:w,setActivePaneId:x,appendPane:R,splitPaneInTab:E,closePanesInTab:a,closeActivePane:o,closeTab:c,getTabsSnapshot:h}=Sb();bb(o);const[S,y]=P.useState(320),[A,D]=P.useState(!1),g=P.useCallback(()=>{D(!0),document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),L=P.useCallback(()=>{D(!1),document.body.style.cursor="",document.body.style.userSelect=""},[]),O=P.useCallback(z=>{const U=Math.max(240,Math.min(z.clientX,800));y(U)},[]);return P.useEffect(()=>{if(A)return window.addEventListener("mousemove",O),window.addEventListener("mouseup",L),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",L)}},[A,O,L]),P.useEffect(()=>()=>{h().forEach(U=>{Zm(U.layout)})},[h]),C.jsx("main",{className:"app-shell",children:C.jsxs("div",{className:"workspace",style:{position:"relative"},children:[C.jsx(pb,{repos:n,enabledRepoIds:m,setEnabledRepoIds:b,onRemoveRepo:p,onTriggerOpenFolder:T,width:S,onRebaseBranch:k,onSwitchBranchWithCheck:l,onSquashCommitsWithCheck:d,gitRefreshRequest:H,appendPane:R}),C.jsx("div",{className:`resize-handle ${A?"is-resizing":""}`,style:{left:S-3},onMouseDown:g}),C.jsx(yb,{tabs:v,activeTabId:f,closeTab:c,closePanesInTab:a,splitPaneInTab:E,appendPane:R,setActiveTabId:w,setActivePaneId:x}),_]})})}function wb({open:n,repos:m,selectedRepoIds:b,error:p,onToggleRepo:T,onSelectAll:H,onClear:k,onConfirm:l,onClose:d}){if(!n)return null;const _=b.length,v=_===0||m.length===0;return C.jsx("div",{className:"repo-picker-overlay",onClick:f=>{f.target===f.currentTarget&&d()},children:C.jsxs("div",{className:"repo-picker",role:"dialog","aria-modal":"true","aria-label":"Bind repositories",children:[C.jsxs("div",{className:"repo-picker-header",children:[C.jsxs("div",{className:"repo-picker-title",children:[C.jsx(Te,{name:"folder",size:18}),C.jsxs("div",{children:[C.jsx("div",{className:"repo-picker-title-text",children:"Bind Repositories"}),C.jsx("div",{className:"repo-picker-subtitle",children:m.length?`Found ${m.length} repositories`:"No repositories found"})]})]}),C.jsx("button",{type:"button",className:"icon-button",title:"Close",onClick:d,children:C.jsx(Te,{name:"close",size:12})})]}),p?C.jsx("div",{className:"repo-picker-error",children:p}):null,C.jsxs("div",{className:"repo-picker-actions",children:[C.jsx("button",{type:"button",className:"repo-picker-action",onClick:H,children:"Select all"}),C.jsx("button",{type:"button",className:"repo-picker-action",onClick:k,children:"Clear"}),C.jsxs("div",{className:"repo-picker-count",children:[_," selected"]})]}),C.jsxs("div",{className:"repo-picker-list",children:[m.map(f=>{const w=b.includes(f.repo_id);return C.jsxs("label",{className:"repo-picker-item",children:[C.jsx("input",{type:"checkbox",checked:w,onChange:()=>T(f.repo_id)}),C.jsxs("div",{className:"repo-picker-item-body",children:[C.jsxs("div",{className:"repo-picker-item-title",children:[C.jsx("span",{children:f.name||"Unnamed repo"}),f.is_bare?C.jsx("span",{className:"repo-picker-badge",children:"bare"}):null]}),C.jsx("div",{className:"repo-picker-item-path",children:f.root_path})]})]},f.repo_id)}),!m.length&&!p?C.jsx("div",{className:"repo-picker-empty",children:"Select another folder to scan again."}):null]}),C.jsxs("div",{className:"repo-picker-footer",children:[C.jsx("button",{type:"button",className:"repo-picker-button",onClick:d,children:"Cancel"}),C.jsx("button",{type:"button",className:"repo-picker-button repo-picker-button--primary",onClick:l,disabled:v,children:"Bind selected"})]})]})})}function xb({open:n}){const[m,b]=P.useState("");return P.useEffect(()=>{if(!n)return;b("");const p=xS(T=>{b(T)});return()=>{p()}},[n]),n?C.jsx("div",{className:"scan-progress-overlay",children:C.jsxs("div",{className:"scan-progress-modal",children:[C.jsx("div",{className:"scan-progress-title",children:"Scanning for Repositories..."}),C.jsx("div",{className:"scan-progress-path",title:m,children:m||"Starting scan..."}),C.jsx("div",{className:"scan-progress-bar",children:C.jsx("div",{className:"scan-progress-bar-fill"})})]})}):null}function Eb({repos:n,setRepos:m,children:b}){const[p,T]=P.useState([]),[H,k]=P.useState([]),[l,d]=P.useState(!1),[_,v]=P.useState(!1),[f,w]=P.useState(null),[x,R]=P.useState([]),[E,a]=P.useState(!1),o=P.useCallback(async z=>{w(null),v(!0);try{const U=await ES({cwd:z});T(U),k(U.map(I=>I.repo_id)),d(!0)}catch(U){const I=Ru(U);w(I==="Unexpected error."?"Failed to scan repos.":I),T([]),k([]),d(!0)}finally{v(!1)}},[]),c=P.useCallback(async()=>{try{const z=await oS({directory:!0,multiple:!1,title:"Open Folder"});typeof z=="string"?o(z):Array.isArray(z)&&z[0]&&o(z[0])}catch(z){console.error("Failed to open folder picker",z)}},[o]),h=P.useCallback(z=>{k(U=>U.includes(z)?U.filter(I=>I!==z):[...U,z])},[]),S=P.useCallback(()=>{k(p.map(z=>z.repo_id))},[p]),y=P.useCallback(()=>{k([])},[]),A=P.useCallback(()=>{const z=p.filter(U=>H.includes(U.repo_id));m(z),R(z.map(U=>U.repo_id)),d(!1)},[p,H,m]),D=P.useCallback(()=>{d(!1)},[]),g=P.useCallback(z=>{m(n.filter(U=>U.repo_id!==z)),R(U=>U.filter(I=>I!==z))},[n,m]);P.useEffect(()=>{if(E||n.length>0||l||_)return;const{workspacePath:z}=Ml();z&&(a(!0),o(z))},[E,o,l,_,n.length]);const L={repoCandidates:p,selectedRepoIds:H,isRepoPickerOpen:l,isScanning:_,repoScanError:f,enabledRepoIds:x,autoOpenedWorkspace:E},O={setRepoCandidates:T,setSelectedRepoIds:k,setIsRepoPickerOpen:d,setEnabledRepoIds:R,setRepos:m,handleOpenFolder:o,handleTriggerOpenFolder:c,handleToggleRepo:h,handleSelectAllRepos:S,handleClearRepos:y,handleConfirmRepos:A,handleCloseRepoPicker:D,handleRemoveRepo:g};return C.jsxs(C.Fragment,{children:[b(L,O),C.jsx(xb,{open:_}),C.jsx(wb,{open:l,repos:p,selectedRepoIds:H,error:f,onToggleRepo:h,onSelectAll:S,onClear:y,onConfirm:A,onClose:D})]})}function Rb({open:n,title:m,message:b,onClose:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&p()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:m??"Git command failed"}),C.jsx("button",{type:"button",className:"icon-button",onClick:p,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"alert",size:12}),C.jsx("span",{children:b})]}),C.jsx("div",{className:"dialog-footer",children:C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary",onClick:p,children:"Ok"})})]})]})}):null}function Ab({open:n,targetBranch:m,ontoBranch:b,worktreePath:p,hasDirtyWorktree:T,onClose:H,onConfirmDetach:k}){return n?C.jsx("div",{className:"dialog-overlay",onClick:l=>{l.target===l.currentTarget&&H()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Rebase Blocked"}),C.jsx("button",{type:"button",className:"icon-button",onClick:H,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[C.jsxs("div",{className:"dialog-info",children:[C.jsx(Te,{name:"alert",size:12}),C.jsxs("span",{children:[C.jsx("strong",{children:m})," is checked out in another worktree."]})]}),C.jsxs("p",{className:"dialog-label",style:{marginTop:8},children:["Git cannot rebase ",C.jsx("strong",{children:m})," onto"," ",C.jsx("strong",{children:b})," while that branch is active elsewhere."]}),C.jsxs("p",{className:"dialog-label",children:["Worktree: ",p]}),T?C.jsx("p",{className:"dialog-label",children:"Note: this worktree has uncommitted changes. Detaching may fail or leave those changes in place."}):null,C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:H,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary",onClick:()=>{k(),H()},children:"Detach Worktree & Rebase"})]})]})]})}):null}function Db({open:n,branchName:m,onClose:b,onConfirmSmart:p,onConfirmForce:T}){return n?C.jsx("div",{className:"dialog-overlay",onClick:H=>{H.target===H.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsxs("div",{className:"dialog-title",children:["Switch to ",m]}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[C.jsx("p",{style:{marginBottom:"12px"},children:"You have uncommitted changes. How would you like to proceed?"}),C.jsxs("div",{className:"dialog-info",style:{flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[C.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[C.jsx(Te,{name:"alert",size:16}),C.jsx("span",{style:{fontWeight:600},children:"Action Required"})]}),C.jsxs("p",{className:"text-sm text-muted",style:{margin:0,paddingLeft:"24px"},children:[C.jsx("strong",{children:"Smart Switch:"})," Stashes changes, switches branch, and pops stash.",C.jsx("br",{}),C.jsx("strong",{children:"Force Switch:"})," Discards local changes (Dangerous)."]})]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--danger",onClick:()=>{T(),b()},children:"Force Switch"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--primary",onClick:()=>{p(),b()},children:"Smart Switch"})]})]})]})}):null}function Tb({open:n,commitCount:m,onClose:b,onConfirm:p}){return n?C.jsx("div",{className:"dialog-overlay",onClick:T=>{T.target===T.currentTarget&&b()},children:C.jsxs("div",{className:"dialog-modal",children:[C.jsxs("div",{className:"dialog-header",children:[C.jsx("div",{className:"dialog-title",children:"Squash Commits"}),C.jsx("button",{type:"button",className:"icon-button",onClick:b,children:C.jsx(Te,{name:"close",size:14})})]}),C.jsxs("div",{className:"dialog-body",children:[C.jsxs("div",{className:"dialog-info",style:{background:"rgba(244, 135, 113, 0.12)",color:"var(--danger)"},children:[C.jsx(Te,{name:"alert",size:14}),C.jsx("span",{children:"Warning: Published History"})]}),C.jsxs("p",{className:"text-sm text-muted",children:[m," selected ",m===1?"commit is":"commits are"," already on a remote branch. Squashing will rewrite published history and may require a force push."]}),C.jsxs("div",{className:"dialog-footer",children:[C.jsx("button",{type:"button",className:"dialog-button",onClick:b,children:"Cancel"}),C.jsx("button",{type:"button",className:"dialog-button dialog-button--danger",onClick:()=>{p(),b()},children:"Squash Anyway"})]})]})]})}):null}function Mb(){const[n,m]=P.useState({open:!1,repoId:"",branchName:""}),[b,p]=P.useState({open:!1,repoId:"",worktreePath:"",commitIds:[]}),[T,H]=P.useState({open:!1,repoId:"",targetBranch:"",ontoBranch:"",worktreePath:"",hasDirtyWorktree:!1});return[{smartSwitchDialog:n,squashDialog:b,rebaseGuardDialog:T},{setSmartSwitchDialog:m,setSquashDialog:p,setRebaseGuardDialog:H},{onSmartSwitchForce:()=>{},onSmartSwitchSmart:()=>{},onSquashConfirm:()=>{},onRebaseDetach:()=>{}}]}function Lb(){const{repos:n,setRepos:m,refreshRepos:b,rebaseBranch:p,checkoutBranchAtPath:T,detachWorktreeHead:H,switchBranch:k,smartSwitchBranch:l,squashCommits:d,worktreesByRepo:_}=Xm(),{gitCommandError:v,clearGitCommandError:f,runGitCommand:w}=Km(),[x,R]=P.useState({seq:0,repoId:null}),[E,a,o]=Mb();P.useEffect(()=>{n.length>0&&b()},[n,b]);const c=P.useCallback((A,D,g)=>{const L=()=>{R(I=>({seq:I.seq+1,repoId:A}))},O=n.find(I=>I.repo_id===A),z=_[A]??[],U=O?z.find(I=>I.branch===D&&I.path!==O.root_path):void 0;if(U){w("Rebase failed","Failed to detach the other worktree and rebase the branch.",async()=>{await H(A,U.path),await p(A,D,g),await T(A,U.path,D),L()});return}w("Rebase failed","Failed to rebase branch.",async()=>{await p(A,D,g),L()})},[T,H,p,n,w,_]),h=P.useCallback((A,D)=>{a.setSmartSwitchDialog({open:!0,repoId:A,branchName:D}),o.onSmartSwitchForce=()=>{w("Switch branch failed","Failed to force switch branch.",()=>k(A,D)),a.setSmartSwitchDialog({open:!1,repoId:"",branchName:""})},o.onSmartSwitchSmart=()=>{w("Smart switch failed","Failed to smart switch branch.",()=>l(A,D)),a.setSmartSwitchDialog({open:!1,repoId:"",branchName:""})}},[o,a,w,l,k]),S=P.useCallback((A,D,g)=>{a.setSquashDialog({open:!0,repoId:A,worktreePath:D,commitIds:g}),o.onSquashConfirm=()=>{w("Squash failed","Failed to squash commits.",()=>d(A,g,D)),a.setSquashDialog({open:!1,repoId:"",worktreePath:"",commitIds:[]})}},[o,a,w,d]),y=P.useCallback(()=>{const{repoId:A,targetBranch:D,ontoBranch:g,worktreePath:L}=E.rebaseGuardDialog;!A||!D||!g||!L||w("Rebase failed","Failed to detach the other worktree and rebase the branch.",async()=>{await H(A,L),await p(A,D,g),await T(A,L,D)})},[T,H,E.rebaseGuardDialog,p,w]);return C.jsx(Eb,{repos:n,setRepos:m,children:(A,D)=>C.jsxs(Cb,{repos:n,enabledRepoIds:A.enabledRepoIds,setEnabledRepoIds:D.setEnabledRepoIds,setRepos:D.setRepos,onRemoveRepo:D.handleRemoveRepo,onTriggerOpenFolder:D.handleTriggerOpenFolder,onRebaseBranch:c,onSwitchBranchWithCheck:h,onSquashCommitsWithCheck:S,gitRefreshRequest:x,children:[C.jsx(Rb,{open:!!v,title:v?.title,message:v?.message??"",onClose:f}),C.jsx(Ab,{open:E.rebaseGuardDialog.open,targetBranch:E.rebaseGuardDialog.targetBranch,ontoBranch:E.rebaseGuardDialog.ontoBranch,worktreePath:E.rebaseGuardDialog.worktreePath,hasDirtyWorktree:E.rebaseGuardDialog.hasDirtyWorktree,onClose:()=>a.setRebaseGuardDialog(g=>({...g,open:!1})),onConfirmDetach:y}),C.jsx(Db,{open:E.smartSwitchDialog.open,branchName:E.smartSwitchDialog.branchName,onClose:()=>a.setSmartSwitchDialog(g=>({...g,open:!1})),onConfirmForce:o.onSmartSwitchForce,onConfirmSmart:o.onSmartSwitchSmart}),C.jsx(Tb,{open:E.squashDialog.open,commitCount:E.squashDialog.commitIds.length,onClose:()=>a.setSquashDialog(g=>({...g,open:!1})),onConfirm:o.onSquashConfirm})]})})}class Bb extends P.Component{constructor(m){super(m),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(m){return{hasError:!0,error:m}}componentDidCatch(m,b){console.error("ErrorBoundary caught an error:",m,b),this.setState({errorInfo:b})}render(){return this.state.hasError?C.jsxs("div",{className:"error-boundary",children:[C.jsx("h1",{children:"Something went wrong."}),C.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),C.jsx("br",{}),this.state.errorInfo?.componentStack]}),C.jsx("button",{onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}pv.createRoot(document.getElementById("root")).render(C.jsx(nm.StrictMode,{children:C.jsx(Bb,{children:C.jsx(Gy,{delayDuration:350,children:C.jsx(Lb,{})})})}));
